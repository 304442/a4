var ps=Object.defineProperty;var sn=t=>{throw TypeError(t)};var _s=(t,e,a)=>e in t?ps(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var lt=(t,e,a)=>_s(t,typeof e!="symbol"?e+"":e,a),hs=(t,e,a)=>e.has(t)||sn("Cannot "+a);var x=(t,e,a)=>(hs(t,e,"read from private field"),a?a.call(t):e.get(t)),$=(t,e,a)=>e.has(t)?sn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}})();const rn=!1;var ca=Array.isArray,ms=Array.prototype.indexOf,Aa=Array.from,gs=Object.defineProperty,ct=Object.getOwnPropertyDescriptor,yn=Object.getOwnPropertyDescriptors,ys=Object.prototype,ws=Array.prototype,Na=Object.getPrototypeOf,ln=Object.isExtensible;function Ss(t){return t()}function Ta(t){for(var e=0;e<t.length;e++)t[e]()}const fe=2,wn=4,ua=8,Ra=16,$e=32,nt=64,Ma=128,ie=256,Xt=512,ve=1024,Pe=2048,Qe=4096,Re=8192,Pa=16384,Sn=32768,$a=65536,xs=1<<17,bs=1<<19,xn=1<<20,Ca=1<<21,Ge=Symbol("$state"),Ds=Symbol("");function bn(t){return t===this.v}function ks(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Dn(t){return!ks(t,this.v)}function Ts(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Cs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Is(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Es(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Os(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function As(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ns(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Yt=!1,Rs=!1;function Ms(){Yt=!0}const La=1,Fa=2,kn=4,Ps=8,$s=16,Ls=1,Fs=2,se=Symbol(),Ws="http://www.w3.org/1999/xhtml";function Us(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let j=null;function on(t){j=t}function oe(t,e=!1,a){var n=j={p:j,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Yt&&!e&&(j.l={s:null,u:null,r1:[],r2:ft(!1)}),Gs(()=>{n.d=!0})}function ce(t){const e=j;if(e!==null){const o=e.e;if(o!==null){var a=L,n=P;e.e=null;try{for(var s=0;s<o.length;s++){var r=o[s];Ye(r.effect),Te(r.reaction),va(r.fn)}}finally{Ye(a),Te(n)}}j=e.p,e.m=!0}return{}}function Jt(){return!Yt||j!==null&&j.l===null}function J(t){if(typeof t!="object"||t===null||Ge in t)return t;const e=Na(t);if(e!==ys&&e!==ws)return t;var a=new Map,n=ca(t),s=C(0),r=P,o=c=>{var l=P;Te(r);var d=c();return Te(l),d};return n&&a.set("length",C(t.length)),new Proxy(t,{defineProperty(c,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Os();var u=a.get(l);return u===void 0?u=o(()=>{var f=C(d.value);return a.set(l,f),f}):S(u,d.value,!0),!0},deleteProperty(c,l){var d=a.get(l);if(d===void 0){if(l in c){const v=o(()=>C(se));a.set(l,v),ba(s)}}else{if(n&&typeof l=="string"){var u=a.get("length"),f=Number(l);Number.isInteger(f)&&f<u.v&&S(u,f)}S(d,se),ba(s)}return!0},get(c,l,d){var m;if(l===Ge)return t;var u=a.get(l),f=l in c;if(u===void 0&&(!f||(m=ct(c,l))!=null&&m.writable)&&(u=o(()=>{var g=J(f?c[l]:se),T=C(g);return T}),a.set(l,u)),u!==void 0){var v=i(u);return v===se?void 0:v}return Reflect.get(c,l,d)},getOwnPropertyDescriptor(c,l){var d=Reflect.getOwnPropertyDescriptor(c,l);if(d&&"value"in d){var u=a.get(l);u&&(d.value=i(u))}else if(d===void 0){var f=a.get(l),v=f==null?void 0:f.v;if(f!==void 0&&v!==se)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return d},has(c,l){var v;if(l===Ge)return!0;var d=a.get(l),u=d!==void 0&&d.v!==se||Reflect.has(c,l);if(d!==void 0||L!==null&&(!u||(v=ct(c,l))!=null&&v.writable)){d===void 0&&(d=o(()=>{var m=u?J(c[l]):se,g=C(m);return g}),a.set(l,d));var f=i(d);if(f===se)return!1}return u},set(c,l,d,u){var I;var f=a.get(l),v=l in c;if(n&&l==="length")for(var m=d;m<f.v;m+=1){var g=a.get(m+"");g!==void 0?S(g,se):m in c&&(g=o(()=>C(se)),a.set(m+"",g))}if(f===void 0)(!v||(I=ct(c,l))!=null&&I.writable)&&(f=o(()=>C(void 0)),S(f,J(d)),a.set(l,f));else{v=f.v!==se;var T=o(()=>J(d));S(f,T)}var y=Reflect.getOwnPropertyDescriptor(c,l);if(y!=null&&y.set&&y.set.call(u,d),!v){if(n&&typeof l=="string"){var b=a.get("length"),D=Number(l);Number.isInteger(D)&&D>=b.v&&S(b,D+1)}ba(s)}return!0},ownKeys(c){i(s);var l=Reflect.ownKeys(c).filter(f=>{var v=a.get(f);return v===void 0||v.v!==se});for(var[d,u]of a)u.v!==se&&!(d in c)&&l.push(d);return l},setPrototypeOf(){As()}})}function ba(t,e=1){S(t,t.v+e)}function cn(t){try{if(t!==null&&typeof t=="object"&&Ge in t)return t[Ge]}catch{}return t}function qs(t,e){return Object.is(cn(t),cn(e))}function Wa(t){var e=fe|Pe,a=P!==null&&(P.f&fe)!==0?P:null;return L===null||a!==null&&(a.f&ie)!==0?e|=ie:L.f|=xn,{ctx:j,deps:null,effects:null,equals:bn,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:a??L}}function Ne(t){const e=Wa(t);return e.equals=Dn,e}function Tn(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Be(e[a])}}function Bs(t){for(var e=t.parent;e!==null;){if((e.f&fe)===0)return e;e=e.parent}return null}function Cn(t){var e,a=L;Ye(Bs(t));try{Tn(t),e=Jn(t)}finally{Ye(a)}return e}function In(t){var e=Cn(t);if(t.equals(e)||(t.v=e,t.wv=Bn()),!rt){var a=(We||(t.f&ie)!==0)&&t.deps!==null?Qe:ve;Ce(t,a)}}const dt=new Map;function ft(t,e){var a={f:0,v:t,reactions:null,equals:bn,rv:0,wv:0};return a}function C(t,e){const a=ft(t);return nr(a),a}function Ys(t,e=!1,a=!0){var s;const n=ft(t);return e||(n.equals=Dn),Yt&&a&&j!==null&&j.l!==null&&((s=j.l).s??(s.s=[])).push(n),n}function S(t,e,a=!1){P!==null&&!ke&&Jt()&&(P.f&(fe|Ra))!==0&&!(K!=null&&K[1].includes(t)&&K[0]===P)&&Ns();let n=a?J(e):e;return vt(t,n)}function vt(t,e){if(!t.equals(e)){var a=t.v;rt?dt.set(t,e):dt.set(t,a),t.v=e,(t.f&fe)!==0&&((t.f&Pe)!==0&&Cn(t),Ce(t,(t.f&ie)===0?ve:Qe)),t.wv=Bn(),En(t,Pe),Jt()&&L!==null&&(L.f&ve)!==0&&(L.f&($e|nt))===0&&(de===null?sr([t]):de.push(t))}return e}function En(t,e){var a=t.reactions;if(a!==null)for(var n=Jt(),s=a.length,r=0;r<s;r++){var o=a[r],c=o.f;(c&Pe)===0&&(!n&&o===L||(Ce(o,e),(c&(ve|ie))!==0&&((c&fe)!==0?En(o,Qe):Ya(o))))}}function Js(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let js=!1;var un,On,An,Nn;function zs(){if(un===void 0){un=window,On=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;An=ct(e,"firstChild").get,Nn=ct(e,"nextSibling").get,ln(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),ln(a)&&(a.__t=void 0)}}function da(t=""){return document.createTextNode(t)}function Zt(t){return An.call(t)}function fa(t){return Nn.call(t)}function _(t,e){return Zt(t)}function Me(t,e){{var a=Zt(t);return a instanceof Comment&&a.data===""?fa(a):a}}function h(t,e=1,a=!1){let n=t;for(;e--;)n=fa(n);return n}function Hs(t){t.textContent=""}function Rn(t){L===null&&P===null&&Is(),P!==null&&(P.f&ie)!==0&&L===null&&Cs(),rt&&Ts()}function Vs(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function st(t,e,a,n=!0){var s=L,r={ctx:j,deps:null,nodes_start:null,nodes_end:null,f:t|Pe,first:null,fn:e,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(a)try{Ba(r),r.f|=Sn}catch(l){throw Be(r),l}else e!==null&&Ya(r);var o=a&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&(xn|Ma))===0;if(!o&&n&&(s!==null&&Vs(r,s),P!==null&&(P.f&fe)!==0)){var c=P;(c.effects??(c.effects=[])).push(r)}return r}function Gs(t){const e=st(ua,null,!1);return Ce(e,ve),e.teardown=t,e}function ea(t){Rn();var e=L!==null&&(L.f&$e)!==0&&j!==null&&!j.m;if(e){var a=j;(a.e??(a.e=[])).push({fn:t,effect:L,reaction:P})}else{var n=va(t);return n}}function Ks(t){return Rn(),Mn(t)}function Qs(t){const e=st(nt,t,!0);return(a={})=>new Promise(n=>{a.outro?ta(e,()=>{Be(e),n(void 0)}):(Be(e),n(void 0))})}function va(t){return st(wn,t,!1)}function Mn(t){return st(ua,t,!0)}function W(t,e=[],a=Wa){const n=e.map(a);return Ua(()=>t(...n.map(i)))}function Ua(t,e=0){return st(ua|Ra|e,t,!0)}function pt(t,e=!0){return st(ua|$e,t,!0,e)}function Pn(t){var e=t.teardown;if(e!==null){const a=rt,n=P;dn(!0),Te(null);try{e.call(null)}finally{dn(a),Te(n)}}}function $n(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){var n=a.next;(a.f&nt)!==0?a.parent=null:Be(a,e),a=n}}function Xs(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&$e)===0&&Be(e),e=a}}function Be(t,e=!0){var a=!1;(e||(t.f&bs)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Zs(t.nodes_start,t.nodes_end),a=!0),$n(t,e&&!a),ia(t,0),Ce(t,Pa);var n=t.transitions;if(n!==null)for(const r of n)r.stop();Pn(t);var s=t.parent;s!==null&&s.first!==null&&Ln(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Zs(t,e){for(;t!==null;){var a=t===e?null:fa(t);t.remove(),t=a}}function Ln(t){var e=t.parent,a=t.prev,n=t.next;a!==null&&(a.next=n),n!==null&&(n.prev=a),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=a))}function ta(t,e){var a=[];qa(t,a,!0),Fn(a,()=>{Be(t),e&&e()})}function Fn(t,e){var a=t.length;if(a>0){var n=()=>--a||e();for(var s of t)s.out(n)}else e()}function qa(t,e,a){if((t.f&Re)===0){if(t.f^=Re,t.transitions!==null)for(const o of t.transitions)(o.is_global||a)&&e.push(o);for(var n=t.first;n!==null;){var s=n.next,r=(n.f&$a)!==0||(n.f&$e)!==0;qa(n,e,r?a:!1),n=s}}}function aa(t){Wn(t,!0)}function Wn(t,e){if((t.f&Re)!==0){t.f^=Re;for(var a=t.first;a!==null;){var n=a.next,s=(a.f&$a)!==0||(a.f&$e)!==0;Wn(a,s?e:!1),a=n}if(t.transitions!==null)for(const r of t.transitions)(r.is_global||e)&&r.in()}}let na=[];function er(){var t=na;na=[],Ta(t)}function tr(t){na.length===0&&queueMicrotask(er),na.push(t)}function ar(t){var e=L;if((e.f&Sn)===0){if((e.f&Ma)===0)throw t;e.fn(t)}else Un(t,e)}function Un(t,e){for(;e!==null;){if((e.f&Ma)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let Ia=!1,sa=null,Ke=!1,rt=!1;function dn(t){rt=t}let Qt=[];let P=null,ke=!1;function Te(t){P=t}let L=null;function Ye(t){L=t}let K=null;function nr(t){P!==null&&P.f&Ca&&(K===null?K=[P,[t]]:K[1].push(t))}let ee=null,re=0,de=null;function sr(t){de=t}let qn=1,ra=0,We=!1,Ve=null;function Bn(){return++qn}function pa(t){var f;var e=t.f;if((e&Pe)!==0)return!0;if((e&Qe)!==0){var a=t.deps,n=(e&ie)!==0;if(a!==null){var s,r,o=(e&Xt)!==0,c=n&&L!==null&&!We,l=a.length;if(o||c){var d=t,u=d.parent;for(s=0;s<l;s++)r=a[s],(o||!((f=r==null?void 0:r.reactions)!=null&&f.includes(d)))&&(r.reactions??(r.reactions=[])).push(d);o&&(d.f^=Xt),c&&u!==null&&(u.f&ie)===0&&(d.f^=ie)}for(s=0;s<l;s++)if(r=a[s],pa(r)&&In(r),r.wv>t.wv)return!0}(!n||L!==null&&!We)&&Ce(t,ve)}return!1}function Yn(t,e,a=!0){var n=t.reactions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];K!=null&&K[1].includes(t)&&K[0]===P||((r.f&fe)!==0?Yn(r,e,!1):e===r&&(a?Ce(r,Pe):(r.f&ve)!==0&&Ce(r,Qe),Ya(r)))}}function Jn(t){var m;var e=ee,a=re,n=de,s=P,r=We,o=K,c=j,l=ke,d=t.f;ee=null,re=0,de=null,We=(d&ie)!==0&&(ke||!Ke||P===null),P=(d&($e|nt))===0?t:null,K=null,on(t.ctx),ke=!1,ra++,t.f|=Ca;try{var u=(0,t.fn)(),f=t.deps;if(ee!==null){var v;if(ia(t,re),f!==null&&re>0)for(f.length=re+ee.length,v=0;v<ee.length;v++)f[re+v]=ee[v];else t.deps=f=ee;if(!We)for(v=re;v<f.length;v++)((m=f[v]).reactions??(m.reactions=[])).push(t)}else f!==null&&re<f.length&&(ia(t,re),f.length=re);if(Jt()&&de!==null&&!ke&&f!==null&&(t.f&(fe|Qe|Pe))===0)for(v=0;v<de.length;v++)Yn(de[v],t);return s!==null&&s!==t&&(ra++,de!==null&&(n===null?n=de:n.push(...de))),u}catch(g){ar(g)}finally{ee=e,re=a,de=n,P=s,We=r,K=o,on(c),ke=l,t.f^=Ca}}function rr(t,e){let a=e.reactions;if(a!==null){var n=ms.call(a,t);if(n!==-1){var s=a.length-1;s===0?a=e.reactions=null:(a[n]=a[s],a.pop())}}a===null&&(e.f&fe)!==0&&(ee===null||!ee.includes(e))&&(Ce(e,Qe),(e.f&(ie|Xt))===0&&(e.f^=Xt),Tn(e),ia(e,0))}function ia(t,e){var a=t.deps;if(a!==null)for(var n=e;n<a.length;n++)rr(t,a[n])}function Ba(t){var e=t.f;if((e&Pa)===0){Ce(t,ve);var a=L,n=Ke;L=t,Ke=!0;try{(e&Ra)!==0?Xs(t):$n(t),Pn(t);var s=Jn(t);t.teardown=typeof s=="function"?s:null,t.wv=qn;var r;rn&&Rs&&(t.f&Pe)!==0&&t.deps}finally{Ke=n,L=a}}}function ir(){try{Es()}catch(t){if(sa!==null)Un(t,sa);else throw t}}function lr(){var t=Ke;try{var e=0;for(Ke=!0;Qt.length>0;){e++>1e3&&ir();var a=Qt,n=a.length;Qt=[];for(var s=0;s<n;s++){var r=cr(a[s]);or(r)}dt.clear()}}finally{Ia=!1,Ke=t,sa=null}}function or(t){var e=t.length;if(e!==0)for(var a=0;a<e;a++){var n=t[a];(n.f&(Pa|Re))===0&&pa(n)&&(Ba(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Ln(n):n.fn=null))}}function Ya(t){Ia||(Ia=!0,queueMicrotask(lr));for(var e=sa=t;e.parent!==null;){e=e.parent;var a=e.f;if((a&(nt|$e))!==0){if((a&ve)===0)return;e.f^=ve}}Qt.push(e)}function cr(t){for(var e=[],a=t;a!==null;){var n=a.f,s=(n&($e|nt))!==0,r=s&&(n&ve)!==0;if(!r&&(n&Re)===0){(n&wn)!==0?e.push(a):s?a.f^=ve:pa(a)&&Ba(a);var o=a.first;if(o!==null){a=o;continue}}var c=a.parent;for(a=a.next;a===null&&c!==null;)a=c.next,c=c.parent}return e}function i(t){var e=t.f,a=(e&fe)!==0;if(Ve!==null&&Ve.add(t),P!==null&&!ke){if(!(K!=null&&K[1].includes(t))||K[0]!==P){var n=P.deps;t.rv<ra&&(t.rv=ra,ee===null&&n!==null&&n[re]===t?re++:ee===null?ee=[t]:(!We||!ee.includes(t))&&ee.push(t))}}else if(a&&t.deps===null&&t.effects===null){var s=t,r=s.parent;r!==null&&(r.f&ie)===0&&(s.f^=ie)}return a&&(s=t,pa(s)&&In(s)),rt&&dt.has(t)?dt.get(t):t.v}function ur(t){var e=Ve;Ve=new Set;var a=Ve,n;try{if(w(t),e!==null)for(n of Ve)e.add(n)}finally{Ve=e}return a}function te(t){var e=ur(()=>w(t));for(var a of e)if((a.f&xs)!==0)for(const n of a.deps||[])(n.f&fe)===0&&vt(n,n.v);else vt(a,a.v)}function w(t){var e=ke;try{return ke=!0,t()}finally{ke=e}}const dr=-7169;function Ce(t,e){t.f=t.f&dr|e}function M(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ge in t)Ea(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&Ge in a&&Ea(a)}}}function Ea(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{Ea(t[n],e)}catch{}const a=Na(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const n=yn(a);for(let s in n){const r=n[s].get;if(r)try{r.call(t)}catch{}}}}}const fr=["touchstart","touchmove"];function vr(t){return fr.includes(t)}let fn=!1;function pr(){fn||(fn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const a of t.target.elements)(e=a.__on_r)==null||e.call(a)})},{capture:!0}))}function _r(t){var e=P,a=L;Te(null),Ye(null);try{return t()}finally{Te(e),Ye(a)}}function jn(t,e,a,n=a){t.addEventListener(e,()=>_r(a));const s=t.__on_r;s?t.__on_r=()=>{s(),n(!0)}:t.__on_r=()=>n(!0),pr()}const zn=new Set,Oa=new Set;function Je(t){for(var e=0;e<t.length;e++)zn.add(t[e]);for(var a of Oa)a(t)}function Kt(t){var D;var e=this,a=e.ownerDocument,n=t.type,s=((D=t.composedPath)==null?void 0:D.call(t))||[],r=s[0]||t.target,o=0,c=t.__root;if(c){var l=s.indexOf(c);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var d=s.indexOf(e);if(d===-1)return;l<=d&&(o=l)}if(r=s[o]||t.target,r!==e){gs(t,"currentTarget",{configurable:!0,get(){return r||a}});var u=P,f=L;Te(null),Ye(null);try{for(var v,m=[];r!==null;){var g=r.assignedSlot||r.parentNode||r.host||null;try{var T=r["__"+n];if(T!=null&&(!r.disabled||t.target===r))if(ca(T)){var[y,...b]=T;y.apply(r,[t,...b])}else T.call(r,t)}catch(I){v?m.push(I):v=I}if(t.cancelBubble||g===e||g===null)break;r=g}if(v){for(let I of m)queueMicrotask(()=>{throw I});throw v}}finally{t.__root=e,delete t.currentTarget,Te(u),Ye(f)}}}function hr(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function la(t,e){var a=L;a.nodes_start===null&&(a.nodes_start=t,a.nodes_end=e)}function R(t,e){var a=(e&Ls)!==0,n=(e&Fs)!==0,s,r=!t.startsWith("<!>");return()=>{s===void 0&&(s=hr(r?t:"<!>"+t),a||(s=Zt(s)));var o=n||On?document.importNode(s,!0):s.cloneNode(!0);if(a){var c=Zt(o),l=o.lastChild;la(c,l)}else la(o,o);return o}}function Hn(t=""){{var e=da(t+"");return la(e,e),e}}function mr(){var t=document.createDocumentFragment(),e=document.createComment(""),a=da();return t.append(e,a),la(e,a),t}function A(t,e){t!==null&&t.before(e)}function N(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function gr(t,e){return yr(t,e)}const at=new Map;function yr(t,{target:e,anchor:a,props:n={},events:s,context:r,intro:o=!0}){zs();var c=new Set,l=f=>{for(var v=0;v<f.length;v++){var m=f[v];if(!c.has(m)){c.add(m);var g=vr(m);e.addEventListener(m,Kt,{passive:g});var T=at.get(m);T===void 0?(document.addEventListener(m,Kt,{passive:g}),at.set(m,1)):at.set(m,T+1)}}};l(Aa(zn)),Oa.add(l);var d=void 0,u=Qs(()=>{var f=a??e.appendChild(da());return pt(()=>{if(r){oe({});var v=j;v.c=r}s&&(n.$$events=s),d=t(f,n)||{},r&&ce()}),()=>{var g;for(var v of c){e.removeEventListener(v,Kt);var m=at.get(v);--m===0?(document.removeEventListener(v,Kt),at.delete(v)):at.set(v,m)}Oa.delete(l),f!==a&&((g=f.parentNode)==null||g.removeChild(f))}});return wr.set(d,u),d}let wr=new WeakMap;function le(t,e,[a,n]=[0,0]){var s=t,r=null,o=null,c=se,l=a>0?$a:0,d=!1;const u=(v,m=!0)=>{d=!0,f(m,v)},f=(v,m)=>{c!==(c=v)&&(c?(r?aa(r):m&&(r=pt(()=>m(s))),o&&ta(o,()=>{o=null})):(o?aa(o):m&&(o=pt(()=>m(s,[a+1,n]))),r&&ta(r,()=>{r=null})))};Ua(()=>{d=!1,e(u),d||f(null,null)},l)}function Ue(t,e){return e}function Sr(t,e,a,n){for(var s=[],r=e.length,o=0;o<r;o++)qa(e[o].e,s,!0);var c=r>0&&s.length===0&&a!==null;if(c){var l=a.parentNode;Hs(l),l.append(a),n.clear(),Fe(t,e[0].prev,e[r-1].next)}Fn(s,()=>{for(var d=0;d<r;d++){var u=e[d];c||(n.delete(u.k),Fe(t,u.prev,u.next)),Be(u.e,!c)}})}function ae(t,e,a,n,s,r=null){var o=t,c={flags:e,items:new Map,first:null},l=(e&kn)!==0;if(l){var d=t;o=d.appendChild(da())}var u=null,f=!1,v=Ne(()=>{var m=a();return ca(m)?m:m==null?[]:Aa(m)});Ua(()=>{var m=i(v),g=m.length;f&&g===0||(f=g===0,xr(m,c,o,s,e,n,a),r!==null&&(g===0?u?aa(u):u=pt(()=>r(o)):u!==null&&ta(u,()=>{u=null})),i(v))})}function xr(t,e,a,n,s,r,o){var he,me,ge,Ee;var c=(s&Ps)!==0,l=(s&(La|Fa))!==0,d=t.length,u=e.items,f=e.first,v=f,m,g=null,T,y=[],b=[],D,I,k,E;if(c)for(E=0;E<d;E+=1)D=t[E],I=r(D,E),k=u.get(I),k!==void 0&&((he=k.a)==null||he.measure(),(T??(T=new Set)).add(k));for(E=0;E<d;E+=1){if(D=t[E],I=r(D,E),k=u.get(I),k===void 0){var z=v?v.e.nodes_start:a;g=Dr(z,e,g,g===null?e.first:g.next,D,I,E,n,s,o),u.set(I,g),y=[],b=[],v=g.next;continue}if(l&&br(k,D,E,s),(k.e.f&Re)!==0&&(aa(k.e),c&&((me=k.a)==null||me.unfix(),(T??(T=new Set)).delete(k))),k!==v){if(m!==void 0&&m.has(k)){if(y.length<b.length){var B=b[0],H;g=B.prev;var xe=y[0],pe=y[y.length-1];for(H=0;H<y.length;H+=1)vn(y[H],B,a);for(H=0;H<b.length;H+=1)m.delete(b[H]);Fe(e,xe.prev,pe.next),Fe(e,g,xe),Fe(e,pe,B),v=B,g=pe,E-=1,y=[],b=[]}else m.delete(k),vn(k,v,a),Fe(e,k.prev,k.next),Fe(e,k,g===null?e.first:g.next),Fe(e,g,k),g=k;continue}for(y=[],b=[];v!==null&&v.k!==I;)(v.e.f&Re)===0&&(m??(m=new Set)).add(v),b.push(v),v=v.next;if(v===null)continue;k=v}y.push(k),g=k,v=k.next}if(v!==null||m!==void 0){for(var ne=m===void 0?[]:Aa(m);v!==null;)(v.e.f&Re)===0&&ne.push(v),v=v.next;var _e=ne.length;if(_e>0){var Le=(s&kn)!==0&&d===0?a:null;if(c){for(E=0;E<_e;E+=1)(ge=ne[E].a)==null||ge.measure();for(E=0;E<_e;E+=1)(Ee=ne[E].a)==null||Ee.fix()}Sr(e,ne,Le,u)}}c&&tr(()=>{var Oe;if(T!==void 0)for(k of T)(Oe=k.a)==null||Oe.apply()}),L.first=e.first&&e.first.e,L.last=g&&g.e}function br(t,e,a,n){(n&La)!==0&&vt(t.v,e),(n&Fa)!==0?vt(t.i,a):t.i=a}function Dr(t,e,a,n,s,r,o,c,l,d){var u=(l&La)!==0,f=(l&$s)===0,v=u?f?Ys(s,!1,!1):ft(s):s,m=(l&Fa)===0?o:ft(o),g={i:m,v,k:r,a:null,e:null,prev:a,next:n};try{return g.e=pt(()=>c(t,v,m,d),js),g.e.prev=a&&a.e,g.e.next=n&&n.e,a===null?e.first=g:(a.next=g,a.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function vn(t,e,a){for(var n=t.next?t.next.e.nodes_start:a,s=e?e.e.nodes_start:a,r=t.e.nodes_start;r!==n;){var o=fa(r);s.before(r),r=o}}function Fe(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Vn(t){var e,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(a=Vn(t[e]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function kr(){for(var t,e,a=0,n="",s=arguments.length;a<s;a++)(t=arguments[a])&&(e=Vn(t))&&(n&&(n+=" "),n+=e);return n}function Tr(t){return typeof t=="object"?kr(t):t??""}const pn=[...` 	
\r\f \v\uFEFF`];function Cr(t,e,a){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),a){for(var s in a)if(a[s])n=n?n+" "+s:s;else if(n.length)for(var r=s.length,o=0;(o=n.indexOf(s,o))>=0;){var c=o+r;(o===0||pn.includes(n[o-1]))&&(c===n.length||pn.includes(n[c]))?n=(o===0?"":n.substring(0,o))+n.substring(c+1):o=c}}return n===""?null:n}function Ir(t,e){return t==null?null:String(t)}function Q(t,e,a,n,s,r){var o=t.__className;if(o!==a||o===void 0){var c=Cr(a,n,r);c==null?t.removeAttribute("class"):t.className=c,t.__className=a}else if(r&&s!==r)for(var l in r){var d=!!r[l];(s==null||d!==!!s[l])&&t.classList.toggle(l,d)}return r}function oa(t,e,a,n){var s=t.__style;if(s!==e){var r=Ir(e);r==null?t.removeAttribute("style"):t.style.cssText=r,t.__style=e}return n}function Gn(t,e,a){if(t.multiple){if(e==null)return;if(!ca(e))return Js();for(var n of t.options)n.selected=e.includes(ut(n));return}for(n of t.options){var s=ut(n);if(qs(s,e)){n.selected=!0;return}}(!a||e!==void 0)&&(t.selectedIndex=-1)}function Er(t,e){va(()=>{var a=new MutationObserver(()=>{var n=t.__value;Gn(t,n)});return a.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function _n(t,e,a=e){var n=!0;jn(t,"change",s=>{var r=s?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(r),ut);else{var c=t.querySelector(r)??t.querySelector("option:not([disabled])");o=c&&ut(c)}a(o)}),va(()=>{var s=e();if(Gn(t,s,n),n&&s===void 0){var r=t.querySelector(":checked");r!==null&&(s=ut(r),a(s))}t.__value=s,n=!1}),Er(t)}function ut(t){return"__value"in t?t.__value:t.value}const Or=Symbol("is custom element"),Ar=Symbol("is html");function Kn(t,e){var a=Qn(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function qe(t,e,a,n){var s=Qn(t);s[e]!==(s[e]=a)&&(e==="loading"&&(t[Ds]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Nr(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Qn(t){return t.__attributes??(t.__attributes={[Or]:t.nodeName.includes("-"),[Ar]:t.namespaceURI===Ws})}var hn=new Map;function Nr(t){var e=hn.get(t.nodeName);if(e)return e;hn.set(t.nodeName,e=[]);for(var a,n=t,s=Element.prototype;s!==n;){a=yn(n);for(var r in a)a[r].set&&e.push(r);n=Na(n)}return e}function X(t,e,a=e){var n=Jt();jn(t,"input",s=>{var r=s?t.defaultValue:t.value;if(r=Da(t)?ka(r):r,a(r),n&&r!==(r=e())){var o=t.selectionStart,c=t.selectionEnd;t.value=r??"",c!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(c,t.value.length))}}),w(e)==null&&t.value&&a(Da(t)?ka(t.value):t.value),Mn(()=>{var s=e();Da(t)&&s===ka(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Da(t){var e=t.type;return e==="number"||e==="range"}function ka(t){return t===""?null:+t}function Ie(t=!1){const e=j,a=e.l.u;if(!a)return;let n=()=>M(e.s);if(t){let s=0,r={};const o=Wa(()=>{let c=!1;const l=e.s;for(const d in l)l[d]!==r[d]&&(r[d]=l[d],c=!0);return c&&s++,s});n=()=>i(o)}a.b.length&&Ks(()=>{mn(e,n),Ta(a.b)}),ea(()=>{const s=w(()=>a.m.map(Ss));return()=>{for(const r of s)typeof r=="function"&&r()}}),a.a.length&&ea(()=>{mn(e,n),Ta(a.a)})}function mn(t,e){if(t.l.s)for(const a of t.l.s)i(a);e()}function Xn(t){j===null&&Us(),Yt&&j.l!==null?Rr(j).m.push(t):ea(()=>{const e=w(t);if(typeof e=="function")return e})}function Rr(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Mr="5";var gn;typeof window<"u"&&((gn=window.__svelte??(window.__svelte={})).v??(gn.v=new Set)).add(Mr);let Pr=0;const ot=()=>`id_${Date.now()}_${Pr++}`;var _t,ht,mt,gt,yt,wt,St,xt,bt,Dt,kt,Tt,Ct,It,Et,Ot,At,Nt,Rt,Mt,Pt,$t,Lt,Ft,Wt,Ut,qt,Bt;class $r{constructor(){lt(this,"pb",null);$(this,_t,C(!0));lt(this,"lastSavedState",null);$(this,ht,C(""));$(this,mt,C(""));$(this,gt,C("London"));$(this,yt,C("saved"));lt(this,"saveTimeout",null);$(this,wt,C(!1));$(this,St,C(""));lt(this,"notificationTimeout",null);$(this,xt,C(J(navigator.onLine)));$(this,bt,C(J([])));$(this,Dt,C(!1));$(this,kt,C(!1));$(this,Tt,C(""));$(this,Ct,C(""));$(this,It,C(J(new Date().getDay())));$(this,Et,C("Weekly Planner"));$(this,Ot,C(J([])));$(this,At,C(J([])));$(this,Nt,C(J([])));$(this,Rt,C(J([])));$(this,Mt,C(J([])));$(this,Pt,C(J([])));$(this,$t,C(J([])));$(this,Lt,C(J([])));$(this,Ft,C(null));$(this,Wt,C(null));$(this,Ut,C(J([])));$(this,qt,C(J([{name:"London",lat:51.5074,lon:-.1278},{name:"Cairo",lat:30.0444,lon:31.2357},{name:"Cape Town",lat:-33.9249,lon:18.4241},{name:"Amsterdam",lat:52.3676,lon:4.9041},{name:"Current Location",lat:null,lon:null}])));$(this,Bt,C(!1));window.PocketBase?(this.pb=new window.PocketBase(window.location.origin),this.pb.autoCancellation(!1)):console.error("PocketBase not available"),this.setupEventListeners()}get isInitializing(){return i(x(this,_t))}set isInitializing(e){S(x(this,_t),e,!0)}get currentWeek(){return i(x(this,ht))}set currentWeek(e){S(x(this,ht),e,!0)}get dateRange(){return i(x(this,mt))}set dateRange(e){S(x(this,mt),e,!0)}get city(){return i(x(this,gt))}set city(e){S(x(this,gt),e,!0)}get saveStatus(){return i(x(this,yt))}set saveStatus(e){S(x(this,yt),e,!0)}get showNotification(){return i(x(this,wt))}set showNotification(e){S(x(this,wt),e,!0)}get notificationMessage(){return i(x(this,St))}set notificationMessage(e){S(x(this,St),e,!0)}get isOnline(){return i(x(this,xt))}set isOnline(e){S(x(this,xt),e,!0)}get pendingSync(){return i(x(this,bt))}set pendingSync(e){S(x(this,bt),e,!0)}get showCitySelector(){return i(x(this,Dt))}set showCitySelector(e){S(x(this,Dt),e,!0)}get showWeekSelector(){return i(x(this,kt))}set showWeekSelector(e){S(x(this,kt),e,!0)}get cityDropdownStyle(){return i(x(this,Tt))}set cityDropdownStyle(e){S(x(this,Tt),e,!0)}get weekDropdownStyle(){return i(x(this,Ct))}set weekDropdownStyle(e){S(x(this,Ct),e,!0)}get currentDay(){return i(x(this,It))}set currentDay(e){S(x(this,It),e,!0)}get plannerTitle(){return i(x(this,Et))}set plannerTitle(e){S(x(this,Et),e,!0)}get times(){return i(x(this,Ot))}set times(e){S(x(this,Ot),e,!0)}get schedule(){return i(x(this,At))}set schedule(e){S(x(this,At),e,!0)}get tasks(){return i(x(this,Nt))}set tasks(e){S(x(this,Nt),e,!0)}get workoutPlan(){return i(x(this,Rt))}set workoutPlan(e){S(x(this,Rt),e,!0)}get meals(){return i(x(this,Mt))}set meals(e){S(x(this,Mt),e,!0)}get groceryList(){return i(x(this,Pt))}set groceryList(e){S(x(this,Pt),e,!0)}get bodyMeasurements(){return i(x(this,$t))}set bodyMeasurements(e){S(x(this,$t),e,!0)}get financials(){return i(x(this,Lt))}set financials(e){S(x(this,Lt),e,!0)}get currentTemplate(){return i(x(this,Ft))}set currentTemplate(e){S(x(this,Ft),e,!0)}get currentTemplateId(){return i(x(this,Wt))}set currentTemplateId(e){S(x(this,Wt),e,!0)}get savedWeeks(){return i(x(this,Ut))}set savedWeeks(e){S(x(this,Ut),e,!0)}get cityOptions(){return i(x(this,qt))}set cityOptions(e){S(x(this,qt),e,!0)}get showSetupModal(){return i(x(this,Bt))}set showSetupModal(e){S(x(this,Bt),e,!0)}setupEventListeners(){window.addEventListener("online",()=>{this.isOnline=!0,this.syncPendingData()}),window.addEventListener("offline",()=>this.isOnline=!1),document.addEventListener("click",e=>{e.target.closest(".dropdown-portal,.clickable")||(this.showCitySelector=this.showWeekSelector=!1)})}async init(){if(console.log("PlannerStore init() called"),!this.pb&&window.PocketBase&&(this.pb=new window.PocketBase(window.location.origin),this.pb.autoCancellation(!1)),!this.pb){console.error("PocketBase not available in init"),this.showSetupNotification(),this.isInitializing=!1;return}if(!await this.checkDatabaseInitialized()){console.log("Database not initialized, showing setup notification"),this.showSetupNotification(),this.isInitializing=!1;return}this.pendingSync=JSON.parse(localStorage.getItem("planner_pending_sync")||"[]"),this.currentWeek=this.getCurrentIsoWeek(),this.dateRange=this.getWeekDateRange(this.parseISOWeek(this.currentWeek)),await this.loadWeek(this.currentWeek,!0),setInterval(()=>{!this.isInitializing&&this.hasSignificantChanges()&&this.saveData()},3e4),this.isOnline&&this.syncPendingData()}async checkDatabaseInitialized(){try{const e=await this.pb.collection("templates").getFirstListItem("is_default=true");return!0}catch(e){return console.log("Database not initialized:",e.message),!1}}showSetupNotification(){if(console.log("showSetupNotification called"),!document.body){console.error("document.body not ready"),setTimeout(()=>this.showSetupNotification(),100);return}if(document.querySelector(".setup-notification")){console.log("Setup notification already exists");return}const e=document.createElement("div");e.className="setup-notification";const a=document.createElement("span");a.textContent="Database not initialized",e.appendChild(a);const n=document.createElement("button");n.className="setup-notification-button",n.textContent="Setup",e.appendChild(n),document.body.appendChild(e),console.log("Setup notification added to DOM"),n.addEventListener("click",()=>{console.log("Setup button clicked"),console.log("showSetupModal before:",this.showSetupModal),this.showSetupModal=!0,console.log("showSetupModal after:",this.showSetupModal),setTimeout(()=>{const s=document.querySelector(".setup-modal-overlay");console.log("Modal element exists:",s?"YES":"NO")},100)})}async fetchTemplate(e="default"){const a=`template_${e}`;try{const n=localStorage.getItem(a);if(n)return JSON.parse(n)}catch{localStorage.removeItem(a)}if(!this.isOnline)return this.showMessage("Offline: Using fallback template"),this.getFallbackTemplate();try{const n=e==="default"?"is_default=true":`name="${e}"`,s=await this.pb.collection("templates").getFirstListItem(n);return localStorage.setItem(a,JSON.stringify(s)),s}catch{return this.showMessage("Template error: Using fallback"),this.getFallbackTemplate()}}getFallbackTemplate(){return{id:"fallback",name:"fallback",structure:{prayer_times:[{label:"Q",value:""},{label:"F",value:""},{label:"D",value:""},{label:"A",value:""},{label:"M",value:""},{label:"I",value:""}],schedule:[{name:"TOTAL",activities:[{name:"DAILY POINTS",max_per_day:0,max_score:0}]}],tasks:{count:5,fields:["num","priority","tag","description","start_date","expected_date","actual_date","completed"]},workout:[],meals:[],grocery:{categories:[]},measurements:[],financials:[],city_default:"London"}}}applyTemplateStructure(e){var n,s;this.currentTemplate=e,this.currentTemplateId=e.id;const a=e.structure;this.plannerTitle=a.title_default||"Weekly Planner",this.times=[...a.prayer_times||[]],this.schedule=this.buildScheduleFromTemplate(a.schedule||[]),this.tasks=Array(((n=a.tasks)==null?void 0:n.count)||15).fill().map(()=>({id:ot(),priority:"",tag:"",description:"",startDate:"",expectedDate:"",actualDate:"",completed:""})),this.workoutPlan=this.buildWorkoutFromTemplate(a.workout||[]),this.meals=this.ensureIds([...a.meals||[]]),this.groceryList=this.ensureIds([...((s=a.grocery)==null?void 0:s.categories)||[]]),this.bodyMeasurements=this.ensureIds([...a.measurements||[]]),this.financials=this.ensureIds([...a.financials||[]]),this.city=a.city_default||"London"}buildScheduleFromTemplate(e){return e.map(a=>({id:ot(),name:a.name,activities:(a.activities||[]).map(n=>({id:ot(),name:n.name,days:this.createDaysStructure(n.days,n.max_per_day||1),score:0,maxScore:n.max_score||0,streaks:{current:0,longest:0}}))}))}createDaysStructure(e,a){const n=["mon","tue","wed","thu","fri","sat","sun"],s={};return(e&&Array.isArray(e)?e:n).forEach(o=>{s[o]={value:"",max:a}}),s}buildWorkoutFromTemplate(e){return e.map(a=>({id:ot(),name:a.name,exercises:this.ensureIds((a.exercises||[]).map(n=>{var s,r,o;return{prefix:"• ",name:n.name,weight:"",sets:"",reps:"",defaultWeight:((s=n.default_weight)==null?void 0:s.toString())||"",defaultSets:((r=n.default_sets)==null?void 0:r.toString())||"",defaultReps:((o=n.default_reps)==null?void 0:o.toString())||""}}))}))}ensureIds(e){return e.map(a=>({...a,id:a.id||ot()}))}async loadWeek(e,a=!1){if(!/^\\d{4}-W(0[1-9]|[1-4]\\d|5[0-3])$/.test(e)){this.showMessage("Invalid week format");return}this.showWeekSelector=!1,this.currentWeek=e,this.dateRange=this.getWeekDateRange(this.parseISOWeek(e));let n=await this.fetchPlannerRecord(e),s;n!=null&&n.template_id?s=await this.fetchTemplateById(n.template_id):s=await this.fetchTemplate("default"),this.applyTemplateStructure(s),n&&this.overlayUserData(n),this.calculateScores(),a&&!this.times.some(r=>r.value)&&await this.getPrayerTimes(),this.lastSavedState=JSON.stringify(this.getCurrentUserData()),a&&(this.isInitializing=!1)}async fetchPlannerRecord(e){if(this.isOnline)try{return await this.pb.collection("planners").getFirstListItem(`week_id="${e}"`)}catch{}const a=localStorage.getItem(`planner_${e}`);if(a)try{return JSON.parse(a)}catch{}return null}async fetchTemplateById(e){try{return await this.pb.collection("templates").getOne(e)}catch{return await this.fetchTemplate("default")}}overlayUserData(e){var a;e.title&&(this.plannerTitle=e.title),e.city&&(this.city=e.city),e.prayer_times&&this.overlayArray(this.times,e.prayer_times),e.schedule_data&&this.overlayComplexData(this.schedule,e.schedule_data,"name",this.overlayScheduleActivity),e.tasks_data&&this.overlayArray(this.tasks,e.tasks_data),e.workout_data&&this.overlayComplexData(this.workoutPlan,e.workout_data,"name",this.overlayWorkoutExercise),e.meals_data&&this.overlayArray(this.meals,e.meals_data),(a=e.grocery_data)!=null&&a.categories&&this.overlayArray(this.groceryList,e.grocery_data.categories),e.measurements_data&&this.overlayArray(this.bodyMeasurements,e.measurements_data),e.financials_data&&this.overlayArray(this.financials,e.financials_data)}overlayArray(e,a){a.forEach((n,s)=>{e[s]&&Object.assign(e[s],n)})}overlayComplexData(e,a,n,s){a.forEach(r=>{const o=e.find(c=>c[n]===r[n]);o&&s.call(this,o,r)})}overlayScheduleActivity(e,a){var n;(n=a.activities)==null||n.forEach(s=>{const r=e.activities.find(o=>o.name===s.name);r&&(s.days&&Object.keys(r.days).forEach(o=>{s.days[o]&&(r.days[o].value=s.days[o].value||"")}),r.score=s.score||0,r.streaks=s.streaks||{current:0,longest:0})})}overlayWorkoutExercise(e,a){var n;(n=a.exercises)==null||n.forEach(s=>{const r=e.exercises.find(o=>o.name===s.name);r&&(r.weight=s.weight||"",r.sets=s.sets||"",r.reps=s.reps||"")})}getCurrentUserData(){var e,a,n,s;return{week_id:this.currentWeek,template_id:this.currentTemplateId,title:this.plannerTitle!==((a=(e=this.currentTemplate)==null?void 0:e.structure)==null?void 0:a.title_default)?this.plannerTitle:null,city:this.city!==((s=(n=this.currentTemplate)==null?void 0:n.structure)==null?void 0:s.city_default)?this.city:null,date_range:this.dateRange,prayer_times:this.times.some(r=>r.value)?this.times:null,schedule_data:this.extractScheduleData(),tasks_data:this.extractUserTasks(),workout_data:this.extractWorkoutData(),meals_data:this.extractUserItems(this.meals,["name","ingredients"]),grocery_data:this.extractGroceryData(),measurements_data:this.extractUserItems(this.bodyMeasurements,["value"]),financials_data:this.extractUserItems(this.financials,["value"])}}extractScheduleData(){return this.extractComplexData(this.schedule,e=>({name:e.name,activities:e.activities.map(a=>({name:a.name,days:Object.keys(a.days).reduce((n,s)=>(a.days[s].value&&(n[s]={value:a.days[s].value}),n),{}),score:a.score,streaks:a.streaks})).filter(a=>Object.keys(a.days).length>0||a.score>0)}),e=>e.activities.length>0)}extractUserTasks(){return this.tasks.filter(e=>e.priority||e.tag||e.description||e.startDate||e.expectedDate||e.actualDate||e.completed)}extractWorkoutData(){return this.extractComplexData(this.workoutPlan,e=>({name:e.name,exercises:e.exercises.filter(a=>a.weight||a.sets||a.reps).map(a=>({name:a.name,weight:a.weight,sets:a.sets,reps:a.reps}))}),e=>e.exercises.length>0)}extractComplexData(e,a,n=()=>!0){return e.map(a).filter(n)}extractUserItems(e,a){return e.filter(n=>a.some(s=>n[s]))}extractGroceryData(){const e=this.extractUserItems(this.groceryList,["name","items"]);return e.length>0?{categories:e}:null}getTaskDelay(e){if(!e.expectedDate||!e.actualDate)return 0;const a=new Date(e.expectedDate),n=new Date(e.actualDate);return Math.ceil((n-a)/(1e3*60*60*24))}calculateTaskDelay(e){return e._delay=this.getTaskDelay(e),e._delay}formatDelay(e){return e===0?"0d":e>0?`+${e}d`:`${e}d`}toggleTaskCompletion(e){e.completed=e.completed==="✓"?"☐":"✓",e.completed==="✓"&&!e.actualDate&&(e.actualDate=new Date().toISOString().split("T")[0],this.calculateTaskDelay(e)),this.saveData()}toggleSelector(e,a){const n=a==="city"?"showCitySelector":"showWeekSelector",s=a==="city"?"showWeekSelector":"showCitySelector";if(this[s]=!1,this[n])this[n]=!1;else{const r=e.target.getBoundingClientRect();this[`${a}DropdownStyle`]=`position:fixed;top:${r.bottom+4}px;left:${Math.max(10,r.left-100)}px;z-index:9999;min-width:150px;max-width:250px;`,this[n]=!0,a==="week"&&this.fetchSavedWeeks()}}async selectCity(e){this.city=e.name,this.showCitySelector=!1;try{e.lat===null?await this.getPrayerTimes():await this.fetchPrayerTimes(e.lat,e.lon),this.saveData()}catch{this.showMessage("Failed to load prayer times")}}async getPrayerTimes(){var e,a,n;try{const s=await new Promise((c,l)=>navigator.geolocation.getCurrentPosition(c,l,{timeout:5e3,maximumAge:6e4})),{latitude:r,longitude:o}=s.coords;try{const l=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${r}&lon=${o}&zoom=10&accept-language=en`)).json();this.city=((e=l.address)==null?void 0:e.city)||((a=l.address)==null?void 0:a.town)||((n=l.address)==null?void 0:n.village)||"Current Location"}catch{this.city="Current Location"}await this.fetchPrayerTimes(r,o)}catch{this.showMessage("Location access failed. Using London"),this.city="London",await this.fetchPrayerTimes(51.5074,-.1278)}}async fetchPrayerTimes(e,a){var c,l;const n=new Date,r=`prayer_times_${`${n.getFullYear()}_${n.getMonth()+1}_${n.getDate()}`}_${e.toFixed(2)}_${a.toFixed(2)}`,o=localStorage.getItem(r);if(o)try{this.setPrayerTimes(JSON.parse(o));return}catch{localStorage.removeItem(r)}try{const d=await fetch(`https://api.aladhan.com/v1/calendar/${n.getFullYear()}/${n.getMonth()+1}?latitude=${e}&longitude=${a}&method=2`);if(!d.ok)throw new Error(`API error: ${d.status}`);const u=await d.json();if(u.code===200&&((l=(c=u.data)==null?void 0:c[n.getDate()-1])!=null&&l.timings))localStorage.setItem(r,JSON.stringify(u.data[n.getDate()-1].timings)),this.setPrayerTimes(u.data[n.getDate()-1].timings);else throw new Error("Invalid prayer time data")}catch{this.showMessage("Prayer times fetch failed"),this.setPrayerTimes({Fajr:"05:30",Dhuhr:"12:30",Asr:"15:45",Maghrib:"18:30",Isha:"20:00"})}}setPrayerTimes(e){const a={Q:this.calculateQiyamTime(e.Fajr),F:e.Fajr,D:e.Dhuhr,A:e.Asr,M:e.Maghrib,I:e.Isha};this.times.reduce((s,r)=>{const o=this.formatTime(a[r.label]);return r.value!==o?(r.value=o,!0):s},!1)&&!this.isInitializing&&this.saveData()}formatTime(e){if(!e)return"";const[a,n]=e.split(" ")[0].split(":"),s=parseInt(a),r=parseInt(n);return isNaN(s)||isNaN(r)?"":`${s%12||12}:${r.toString().padStart(2,"0")}${s>=12?"PM":"AM"}`}calculateQiyamTime(e){if(!e)return"";const[a,n]=e.split(" ")[0].split(":");let s=parseInt(a),r=parseInt(n);return isNaN(s)||isNaN(r)?"":(s=s-1,s<0&&(s=23),`${s}:${r.toString().padStart(2,"0")}`)}calculateScores(){var s;const e={mon:0,tue:0,wed:0,thu:0,fri:0,sat:0,sun:0},a=Object.keys(e);this.schedule.forEach(r=>{r.name!=="TOTAL"&&r.activities.forEach(o=>{let c=0;Object.entries(o.days||{}).forEach(([u,f])=>{if(!f)return;const v=parseInt(f.value)||0;v>0&&(f.max||0)>0&&(e[u]+=v,c+=v),f.value=v===0?"":v.toString()}),o.score=c,o.streaks=o.streaks||{current:0,longest:0};const l=this.currentDay===0?6:this.currentDay-1;let d=0;for(let u=0;u<7;u++){const f=(l-u+7)%7,v=a[f];if(o.days[v]&&parseInt(o.days[v].value)>0&&(o.days[v].max||0)>0)d++;else break}o.streaks.current=d,o.streaks.longest=Math.max(o.streaks.longest||0,d)})});const n=this.schedule.find(r=>r.name==="TOTAL");if((s=n==null?void 0:n.activities)!=null&&s[0]){const r=n.activities[0];let o=0,c=0;Object.entries(e).forEach(([l,d])=>{var u;(u=r.days)!=null&&u[l]&&(r.days[l].value=d.toString()),o+=d}),this.schedule.forEach(l=>{l.name!=="TOTAL"&&l.activities.forEach(d=>c+=d.maxScore||0)}),r.score=o,r.maxScore=c}}validateAndSave(e){const a=e.target,n=parseFloat(a.min),s=parseFloat(a.max);let r=parseFloat(a.value);isNaN(r)&&(r=0),!isNaN(n)&&r<n&&(r=n),!isNaN(s)&&r>s&&(r=s),a.value=r===0?"":r.toString(),this.calculateScores(),this.saveData()}saveData(){this.isInitializing||(clearTimeout(this.saveTimeout),this.saveStatus="saving",this.saveTimeout=setTimeout(async()=>{try{this.calculateScores();const e=this.getCurrentUserData();localStorage.setItem(`planner_${this.currentWeek}`,JSON.stringify(e)),this.isOnline?(await this.saveToPocketbase(this.currentWeek,e),this.pendingSync=this.pendingSync.filter(a=>!(a.weekId===this.currentWeek&&a.operation!=="delete"))):this.addToPendingSync(this.currentWeek,e),localStorage.setItem("planner_pending_sync",JSON.stringify(this.pendingSync)),this.lastSavedState=JSON.stringify(e),this.saveStatus="saved"}catch(e){this.saveStatus="error",this.showMessage("Save error: "+e.message),setTimeout(()=>this.saveStatus="saved",3e3)}},500))}hasSignificantChanges(){if(!this.lastSavedState)return!0;const e=this.getCurrentUserData();return JSON.stringify(e)!==this.lastSavedState}addToPendingSync(e,a,n="save"){this.pendingSync=this.pendingSync.filter(s=>!(s.weekId===e&&s.operation===n)),this.pendingSync.push({weekId:e,data:a?JSON.parse(JSON.stringify(a)):null,operation:n,timestamp:new Date().toISOString()}),localStorage.setItem("planner_pending_sync",JSON.stringify(this.pendingSync))}async syncPendingData(){if(!this.isOnline||this.pendingSync.length===0)return;const e=[...this.pendingSync];this.pendingSync=[];for(const a of e)try{a.operation==="delete"?await this.deleteFromPocketbase(a.weekId):await this.saveToPocketbase(a.weekId,a.data);const n=JSON.parse(localStorage.getItem("planner_pending_sync")||"[]");localStorage.setItem("planner_pending_sync",JSON.stringify(n.filter(s=>s.timestamp!==a.timestamp)))}catch{this.pendingSync.push(a)}this.pendingSync.length>0&&localStorage.setItem("planner_pending_sync",JSON.stringify(this.pendingSync))}async saveToPocketbase(e,a){try{const n=await this.pb.collection("planners").getFirstListItem(`week_id="${e}"`);await this.pb.collection("planners").update(n.id,a)}catch(n){if(n.status===404)await this.pb.collection("planners").create(a);else throw n}}async deleteFromPocketbase(e){try{const a=await this.pb.collection("planners").getFirstListItem(`week_id="${e}"`);await this.pb.collection("planners").delete(a.id)}catch(a){if(a.status!==404)throw a}}async fetchSavedWeeks(){const e=new Map,a=this.getCurrentIsoWeek(),n=(s,r,o,c)=>{const l=e.get(s),d=r||this.getWeekDateRange(this.parseISOWeek(s));!l||o==="pocketbase"&&l.source!=="pocketbase"||o==="local"&&l.source==="current"?e.set(s,{iso_week:s,dateRange:d,source:o,isCurrent:c}):l&&!l.dateRange&&d&&(l.dateRange=d)};if(n(a,this.getWeekDateRange(this.parseISOWeek(a)),"current",!0),this.isOnline)try{(await this.pb.collection("planners").getFullList({sort:"-week_id",fields:"week_id,date_range"})).forEach(r=>n(r.week_id,r.date_range,"pocketbase",r.week_id===a))}catch{}for(let s=0;s<localStorage.length;s++){const r=localStorage.key(s);if(r.startsWith("planner_")&&!r.includes("pending_sync")&&!r.startsWith("planner_template_")){const o=r.replace("planner_","");try{const c=JSON.parse(localStorage.getItem(r));n(o,c.date_range,"local",o===a)}catch{}}}this.savedWeeks=Array.from(e.values()).sort((s,r)=>s.isCurrent&&!r.isCurrent?-1:!s.isCurrent&&r.isCurrent?1:r.iso_week.localeCompare(s.iso_week))}confirmLoadWeek(e){this.hasSignificantChanges()&&e!==this.currentWeek&&!confirm("Unsaved changes. Load anyway?")||(this.showWeekSelector=!1,this.loadWeek(e))}confirmDeleteWeek(e){confirm(`Delete schedule for ${e}?`)&&this.deleteWeek(e)}async deleteWeek(e){if(localStorage.removeItem(`planner_${e}`),this.isOnline)try{await this.deleteFromPocketbase(e)}catch{this.addToPendingSync(e,null,"delete")}else this.addToPendingSync(e,null,"delete");this.savedWeeks=this.savedWeeks.filter(a=>a.iso_week!==e),this.currentWeek===e&&(this.currentWeek=this.getCurrentIsoWeek(),await this.loadWeek(this.currentWeek))}getCurrentIsoWeek(){const e=new Date,a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));a.setUTCDate(a.getUTCDate()+4-(a.getUTCDay()||7));const n=new Date(Date.UTC(a.getUTCFullYear(),0,1)),s=Math.ceil(((a-n)/864e5+1)/7);return`${a.getUTCFullYear()}-W${s.toString().padStart(2,"0")}`}parseISOWeek(e){if(!/^\\d{4}-W(0[1-9]|[1-4]\\d|5[0-3])$/.test(e))return new Date;const[a,n]=e.split("-"),s=parseInt(n.substring(1)),r=new Date(Date.UTC(parseInt(a),0,1+(s-1)*7));return r.setUTCDate(r.getUTCDate()-(r.getUTCDay()||7)+1),r}getWeekDateRange(e){const a=new Date(e),n=new Date(a);return n.setUTCDate(a.getUTCDate()+6),`${this.formatDate(a)}-${this.formatDate(n)}`}formatDate(e){return`${(e.getUTCMonth()+1).toString().padStart(2,"0")}/${e.getUTCDate().toString().padStart(2,"0")}`}showMessage(e){this.notificationMessage=e,this.showNotification=!0,clearTimeout(this.notificationTimeout),this.notificationTimeout=setTimeout(()=>this.showNotification=!1,5e3)}}_t=new WeakMap,ht=new WeakMap,mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,wt=new WeakMap,St=new WeakMap,xt=new WeakMap,bt=new WeakMap,Dt=new WeakMap,kt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,It=new WeakMap,Et=new WeakMap,Ot=new WeakMap,At=new WeakMap,Nt=new WeakMap,Rt=new WeakMap,Mt=new WeakMap,Pt=new WeakMap,$t=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Wt=new WeakMap,Ut=new WeakMap,qt=new WeakMap,Bt=new WeakMap;const p=new $r;window.plannerStore=p;Ms();var Lr=()=>p.saveData(),Fr=R('<div class="flex center"><span> </span> <input type="text" class="input input--time"/></div>'),Wr=t=>p.toggleSelector(t,"city"),Ur=t=>p.toggleSelector(t,"week"),qr=R('<div class="flex between center mb-1"><h1 class="text-sm bold"> </h1> <div class="flex center text-xs"><!> <span class="ml-1">|</span> <span class="clickable ml-1"> </span></div> <div class="text-sm"><span class="clickable"> </span> <span> </span></div></div>');function Br(t,e){oe(e,!1),Ie();var a=qr(),n=_(a),s=_(n),r=h(n,2),o=_(r);ae(o,1,()=>(M(p),w(()=>p.times)),Ue,(g,T,y)=>{var b=Fr(),D=_(b),I=_(D),k=h(D,2);k.__change=[Lr],W(()=>N(I,`${i(T),w(()=>i(T).label)??""}:`)),X(k,()=>i(T).value,E=>(i(T).value=E,te(()=>p))),A(g,b)});var c=h(o,4);c.__click=[Wr];var l=_(c),d=h(r,2),u=_(d);u.__click=[Ur];var f=_(u),v=h(u,2),m=_(v);W(()=>{N(s,(M(p),w(()=>p.plannerTitle))),N(l,(M(p),w(()=>p.city))),N(f,(M(p),w(()=>p.currentWeek))),N(m,(M(p),w(()=>p.dateRange)))}),A(t,a),ce()}Je(["change","click"]);var Yr=R("<th> </th> <th>MAX</th>",1),Jr=t=>p.validateAndSave(t),jr=R('<input type="number" class="input" min="0"/>'),zr=R("<td><!></td> <td> </td>",1),Hr=R("<span> </span>"),Vr=R('<tr><td class="bold"> </td><td class="bold"> </td><td class="ac"><span> </span></td><!><td class="dc"><input type="number" class="input" readonly=""/></td><td class="dc"> </td><td><!></td></tr>'),Gr=R('<tr><td colspan="19" class="progress"><div></div></td></tr>'),Kr=R("<!> <!>",1),Qr=R('<table><thead><tr><th style="width:18mm">T</th><th style="width:20mm">D</th><th class="ac">ACTIVITY</th><!><th class="dc">📊</th><th class="dc">🎯</th><th class="dc">🔥</th></tr></thead><tbody></tbody></table>');function Xr(t,e){oe(e,!1);const a=["M","T","W","T","F","S","S"],n=["mon","tue","wed","thu","fri","sat","sun"];Ie();var s=Qr(),r=_(s),o=_(r),c=h(_(o),3);ae(c,1,()=>a,Ue,(d,u,f)=>{var v=Yr(),m=Me(v);let g;var T=_(m),y=h(m,2);let b;W((D,I)=>{g=Q(m,1,"dc",null,g,D),N(T,i(u)),b=Q(y,1,"dc",null,b,I)},[()=>({"current-day":f===(p.currentDay||7)-1}),()=>({"current-day":f===(p.currentDay||7)-1})],Ne),A(d,v)});var l=h(r);ae(l,5,()=>(M(p),w(()=>[...p.schedule].reverse())),Ue,(d,u)=>{var f=Kr(),v=Me(f);ae(v,1,()=>(i(u),w(()=>i(u).activities)),Ue,(T,y,b)=>{var D=Vr();let I;var k=_(D),E=_(k),z=h(k),B=_(z),H=h(z),xe=_(H),pe=_(xe),ne=h(H);ae(ne,1,()=>n,Ue,(Z,U,ye)=>{var Y=zr(),ze=Me(Y);let Xe;var Ze=_(ze);{var _a=He=>{var be=jr();be.__input=[Jr],W(()=>{qe(be,"max",(i(y),i(U),w(()=>i(y).days[i(U)].max<10?9:99))),be.readOnly=(i(u),w(()=>i(u).name==="TOTAL"))}),X(be,()=>i(y).days[i(U)].value,et=>(i(y).days[i(U)].value=et,te(()=>(i(u),p)))),A(He,be)};le(Ze,He=>{i(y),i(U),w(()=>i(y).days&&i(y).days[i(U)])&&He(_a)})}var jt=h(ze,2);let zt;var ha=_(jt);W((He,be)=>{Xe=Q(ze,1,"dc",null,Xe,He),zt=Q(jt,1,"dc",null,zt,be),N(ha,(i(y),i(U),w(()=>{var et,it;return((it=(et=i(y).days)==null?void 0:et[i(U)])==null?void 0:it.max)||""})))},[()=>({"current-day":ye===(p.currentDay||7)-1}),()=>({"current-day":ye===(p.currentDay||7)-1})],Ne),A(Z,Y)});var _e=h(ne),Le=_(_e),he=h(_e),me=_(he),ge=h(he);let Ee;var Oe=_(ge);{var je=Z=>{var U=Hr(),ye=_(U);W(()=>N(ye,(i(y),w(()=>i(y).streaks.current)))),A(Z,U)};le(Oe,Z=>{i(y),w(()=>{var U;return((U=i(y).streaks)==null?void 0:U.current)>0})&&Z(je)})}W((Z,U,ye,Y)=>{I=Q(D,1,"",null,I,Z),N(E,(i(u),w(()=>b===0?i(u).name:""))),N(B,U),N(pe,ye),Kn(Le,(i(y),w(()=>i(y).score))),N(me,(i(y),w(()=>i(y).maxScore))),Ee=Q(ge,1,"dc cell cell--color",null,Ee,Y)},[()=>({total:i(u).name==="TOTAL"}),()=>(i(y),w(()=>i(y).name.includes(":")?i(y).name.split(":")[0]:"")),()=>(i(y),w(()=>i(y).name.includes(":")?i(y).name.split(":")[1].trim():i(y).name)),()=>{var Z,U;return{streak:((Z=i(y).streaks)==null?void 0:Z.current)>2,yellow:((U=i(y).streaks)==null?void 0:U.current)>2}}],Ne),A(T,D)});var m=h(v,2);{var g=T=>{var y=Gr();const b=Ne(()=>(i(u),w(()=>i(u).activities[0]))),D=Ne(()=>(M(i(b)),w(()=>i(b).maxScore>0?Math.min(100,i(b).score/i(b).maxScore*100):0))),I=Ne(()=>(M(i(b)),w(()=>i(b).maxScore>0?i(b).score/i(b).maxScore<.33?"progress--low":i(b).score/i(b).maxScore<.66?"progress--medium":"progress--high":"")));var k=_(y),E=_(k);W(()=>{Q(E,1,`progress__bar ${i(I)??""}`),oa(E,`width: ${i(D)??""}%`)}),A(T,y)};le(m,T=>{i(u),w(()=>{var y;return i(u).name==="TOTAL"&&((y=i(u).activities)==null?void 0:y.length)>0&&i(u).activities[0].maxScore>0})&&T(g)})}A(d,f)}),A(t,s),ce()}Je(["input"]);var Zr=()=>p.saveData(),ei=()=>p.saveData(),ti=()=>p.saveData(),ai=R('<tr><td class="dc"> </td><td><select class="input"><option></option><option>A</option><option>B</option><option>C</option><option>D</option></select></td><td><input type="text" class="input input--text"/></td><td><select class="input"><option></option><option>Personal</option><option>Work</option></select></td><td><input type="text" class="input input--date"/></td><td><input type="text" class="input input--date"/></td><td><span> </span></td><td><input type="text" class="input input--date"/></td><td><input type="text" placeholder="☐" readonly=""/></td></tr>'),ni=R('<div class="section"><h3 class="title">TASKS & PROJECT MANAGEMENT</h3> <table><thead><tr><th>#</th><th>⭐</th><th>Task</th><th>🏷️</th><th class="icon-header">Start</th><th class="icon-header">Due</th><th class="icon-header">Delay</th><th class="icon-header">Done</th><th>✓</th></tr></thead><tbody></tbody></table></div>');function si(t,e){oe(e,!1);function a(c){const l=[];c.completed==="✓"&&l.push("green");const d=p.getTaskDelay(c);return d>0?l.push("red"):d<0&&l.push("blue"),l.join(" ")}function n(c){return c<0?"green":c>0?"red":"yellow"}Ie();var s=ni(),r=h(_(s),2),o=h(_(r));ae(o,7,()=>(M(p),w(()=>p.tasks)),(c,l)=>c.id||l,(c,l,d)=>{var u=ai(),f=_(u),v=_(f),m=h(f),g=_(m);W(()=>{i(l),te(()=>{})}),g.__change=[Zr];var T=_(g);T.value=T.__value="";var y=h(T);y.value=y.__value="A";var b=h(y);b.value=b.__value="B";var D=h(b);D.value=D.__value="C";var I=h(D);I.value=I.__value="D";var k=h(m),E=_(k);E.__change=[ei];var z=h(k),B=_(z);W(()=>{i(l),te(()=>{})}),B.__change=[ti];var H=_(B);H.value=H.__value="";var xe=h(H);xe.value=xe.__value="P";var pe=h(xe);pe.value=pe.__value="W";var ne=h(z),_e=_(ne);_e.__change=()=>{p.calculateTaskDelay(i(l)),p.saveData()};var Le=h(ne),he=_(Le);he.__change=()=>{p.calculateTaskDelay(i(l)),p.saveData()};var me=h(Le),ge=_(me),Ee=_(ge),Oe=h(me),je=_(Oe);je.__change=()=>{p.calculateTaskDelay(i(l)),p.saveData()};var Z=h(Oe),U=_(Z);let ye;U.__click=Y=>{Y.preventDefault(),p.toggleTaskCompletion(i(l))},W((Y,ze,Xe,Ze)=>{Q(u,1,Y),N(v,i(d)+1),Q(me,1,`dc cell cell--bold ${ze??""}`),N(Ee,Xe),ye=Q(U,1,"input",null,ye,Ze),Kn(U,(i(l),w(()=>i(l).completed)))},[()=>Tr((i(l),w(()=>a(i(l))))),()=>(M(p),i(l),w(()=>n(p.getTaskDelay(i(l))))),()=>(M(p),i(l),w(()=>p.formatDelay(p.getTaskDelay(i(l))))),()=>({"task-done":i(l).completed==="✓"})],Ne),_n(g,()=>i(l).priority,Y=>(i(l).priority=Y,te(()=>p))),X(E,()=>i(l).description,Y=>(i(l).description=Y,te(()=>p))),_n(B,()=>i(l).tag,Y=>(i(l).tag=Y,te(()=>p))),X(_e,()=>i(l).startDate,Y=>(i(l).startDate=Y,te(()=>p))),X(he,()=>i(l).expectedDate,Y=>(i(l).expectedDate=Y,te(()=>p))),X(je,()=>i(l).actualDate,Y=>(i(l).actualDate=Y,te(()=>p))),A(c,u)}),A(t,s),ce()}Je(["change","click"]);var ri=()=>p.saveData(),ii=()=>p.saveData(),li=()=>p.saveData(),oi=R('<div class="exercise"><div class="exercise-name"><span> </span> <span> </span>:</div> <div class="exercise-inputs"><input type="number" class="input"/> <span class="exercise-unit">kg,</span> <input type="number" class="input sets"/> <span class="exercise-unit">×</span> <input type="number" class="input reps"/></div></div>'),ci=R('<div class="p-1 workout-day-card"><p class="bold text-center mb-1 workout-day-name"> </p> <!></div>'),ui=R('<div class="section"><h3 class="title">WORKOUT</h3> <div class="grid"></div></div>');function di(t,e){oe(e,!1),Ie();var a=ui(),n=h(_(a),2);ae(n,5,()=>(M(p),w(()=>p.workoutPlan)),s=>s.id,(s,r)=>{var o=ci(),c=_(o),l=_(c),d=h(c,2);ae(d,1,()=>(i(r),w(()=>i(r).exercises)),u=>u.id,(u,f,v)=>{var m=oi(),g=_(m),T=_(g),y=_(T),b=h(T,2),D=_(b),I=h(g,2),k=_(I);k.__input=[ri];var E=h(k,4);E.__input=[ii];var z=h(E,4);z.__input=[li],W(()=>{qe(g,"title",`${i(f),w(()=>i(f).prefix)??""}${i(f),w(()=>i(f).name)??""}`),N(y,(i(f),w(()=>i(f).prefix))),N(D,(i(f),w(()=>i(f).name))),qe(k,"placeholder",(i(f),w(()=>i(f).defaultWeight))),qe(E,"placeholder",(i(f),w(()=>i(f).defaultSets))),qe(z,"placeholder",(i(f),w(()=>i(f).defaultReps)))}),X(k,()=>i(f).weight,B=>(i(f).weight=B,te(()=>(i(r),p)))),X(E,()=>i(f).sets,B=>(i(f).sets=B,te(()=>(i(r),p)))),X(z,()=>i(f).reps,B=>(i(f).reps=B,te(()=>(i(r),p)))),A(u,m)}),W(()=>N(l,(i(r),w(()=>i(r).name)))),A(s,o)}),A(t,a),ce()}Je(["input"]);var fi=R('<div class="mb-05"><span class="bold"> </span> <span> </span></div>'),vi=R('<div class="section"><h3 class="title">MEALS</h3> <div class="text-xs"></div></div>');function pi(t,e){oe(e,!1),Ie();var a=vi(),n=h(_(a),2);ae(n,5,()=>(M(p),w(()=>p.meals)),s=>s.id,(s,r)=>{var o=fi(),c=_(o),l=_(c),d=h(c,2),u=_(d);W(()=>{N(l,`${i(r),w(()=>i(r).name)??""}:`),N(u,(i(r),w(()=>i(r).ingredients)))}),A(s,o)}),A(t,a),ce()}var _i=R('<div class="mb-05"><span class="bold"> </span> <span> </span></div>'),hi=R('<div class="section"><h3 class="title">GROCERY</h3> <div class="text-xs"></div></div>');function mi(t,e){oe(e,!1),Ie();var a=hi(),n=h(_(a),2);ae(n,5,()=>(M(p),w(()=>p.groceryList)),s=>s.id,(s,r)=>{var o=_i(),c=_(o),l=_(c),d=h(c,2),u=_(d);W(()=>{N(l,`${i(r),w(()=>i(r).name)??""}:`),N(u,(i(r),w(()=>i(r).items)))}),A(s,o)}),A(t,a),ce()}var gi=()=>p.saveData(),yi=R('<span><span> </span> <input type="text" class="input input--inline"/> <!></span>'),wi=R('<div class="section"><h3 class="title">BODY</h3> <div class="text-xs"></div></div>');function Si(t,e){oe(e,!1),Ie();var a=wi(),n=h(_(a),2);ae(n,7,()=>(M(p),w(()=>p.bodyMeasurements)),s=>s.id,(s,r,o)=>{var c=yi(),l=_(c),d=_(l),u=h(l,2);u.__change=[gi];var f=h(u,2);{var v=m=>{var g=Hn(",");A(m,g)};le(f,m=>{M(i(o)),M(p),w(()=>i(o)<p.bodyMeasurements.length-1)&&m(v)})}W(()=>{N(d,`${i(r),w(()=>i(r).name)??""}:`),qe(u,"placeholder",(i(r),w(()=>i(r).placeholder)))}),X(u,()=>i(r).value,m=>(i(r).value=m,te(()=>p))),A(s,c)}),A(t,a),ce()}Je(["change"]);var xi=()=>p.saveData(),bi=R('<span><span> </span> £<input type="text" class="input input--inline"/> <span> </span> <!></span>'),Di=R('<div class="section"><h3 class="title">FINANCIAL</h3> <div class="text-xs"></div></div>');function ki(t,e){oe(e,!1),Ie();var a=Di(),n=h(_(a),2);ae(n,7,()=>(M(p),w(()=>p.financials)),s=>s.id,(s,r,o)=>{var c=bi(),l=_(c),d=_(l),u=h(l,2);u.__change=[xi];var f=h(u,2),v=_(f),m=h(f,2);{var g=T=>{var y=Hn(",");A(T,y)};le(m,T=>{M(i(o)),M(p),w(()=>i(o)<p.financials.length-1)&&T(g)})}W(()=>{N(d,`${i(r),w(()=>i(r).name)??""}:`),qe(u,"placeholder",(i(r),w(()=>i(r).placeholder))),N(v,(i(r),w(()=>i(r).account)))}),X(u,()=>i(r).value,T=>(i(r).value=T,te(()=>p))),A(s,c)}),A(t,a),ce()}Je(["change"]);var Ti=R('<div id="sync-status"><span> </span></div>'),Ci=R('<div id="notification" class="notification notification--show"> </div>'),Ii=R('<div id="save-status"> </div> <!> <!>',1);function Ei(t,e){oe(e,!1),Ie();var a=Ii(),n=Me(a),s=_(n),r=h(n,2);{var o=d=>{var u=Ti(),f=_(u),v=_(f);W(()=>{Q(u,1,`status status--sync ${M(p),w(()=>p.pendingSync.length>0?"status-pending":"status-synced")??""}`),N(v,(M(p),w(()=>p.isOnline?p.pendingSync.length>0?"Pending: "+p.pendingSync.length:"":"Offline")))}),A(d,u)};le(r,d=>{M(p),w(()=>p.pendingSync.length>0||!p.isOnline)&&d(o)})}var c=h(r,2);{var l=d=>{var u=Ci(),f=_(u);W(()=>N(f,(M(p),w(()=>p.notificationMessage)))),A(d,u)};le(c,d=>{M(p),w(()=>p.showNotification)&&d(l)})}W(()=>{Q(n,1,`status status--save status-${M(p),w(()=>p.saveStatus)??""}`),N(s,(M(p),w(()=>p.saveStatus==="saving"?"Saving...":p.saveStatus==="error"?"Error!":"Saved")))}),A(t,a),ce()}var Oi=(t,e)=>p.selectCity(i(e)),Ai=R('<div class="dropdown__item"> </div>'),Ni=R('<div class="dropdown-portal"><div class="dropdown__content"></div></div>'),Ri=(t,e)=>p.confirmLoadWeek(i(e).iso_week),Mi=(t,e)=>p.confirmDeleteWeek(i(e).iso_week),Pi=R('<div><span> </span> <span class="dropdown__delete">×</span></div>'),$i=R('<div class="dropdown__item--empty">No saved schedules</div>'),Li=R('<div class="dropdown-portal"><div class="dropdown__content"><!></div></div>'),Fi=R("<!> <!>",1);function Wi(t,e){oe(e,!1),Ie();var a=Fi(),n=Me(a);{var s=c=>{var l=Ni(),d=_(l);ae(d,5,()=>(M(p),w(()=>p.cityOptions)),Ue,(u,f)=>{var v=Ai();v.__click=[Oi,f];var m=_(v);W(()=>N(m,(i(f),w(()=>i(f).name)))),A(u,v)}),W(()=>oa(l,(M(p),w(()=>p.cityDropdownStyle)))),A(c,l)};le(n,c=>{M(p),w(()=>p.showCitySelector)&&c(s)})}var r=h(n,2);{var o=c=>{var l=Li(),d=_(l),u=_(d);{var f=m=>{var g=mr(),T=Me(g);ae(T,1,()=>(M(p),w(()=>p.savedWeeks)),Ue,(y,b)=>{var D=Pi();let I;var k=_(D);k.__click=[Ri,b];var E=_(k),z=h(k,2);z.__click=[Mi,b],W(B=>{I=Q(D,1,"flex between center dropdown__item",null,I,B),N(E,`${i(b),w(()=>i(b).iso_week)??""} ${i(b),w(()=>i(b).dateRange)??""}`)},[()=>({"dropdown__item--current":i(b).isCurrent})],Ne),A(y,D)}),A(m,g)},v=m=>{var g=$i();A(m,g)};le(u,m=>{M(p),w(()=>p.savedWeeks.length>0)?m(f):m(v,!1)})}W(()=>oa(l,(M(p),w(()=>p.weekDropdownStyle)))),A(c,l)};le(r,c=>{M(p),w(()=>p.showWeekSelector)&&c(o)})}A(t,a),ce()}Je(["click"]);async function Ui(t,e,a,n){return e("Validating configuration...","i"),a()?n()?(e("✅ Validation passed","s"),!0):(e("❌ Seed validation failed","e"),!1):(e("❌ Collection validation failed","e"),!1)}async function qi(t,e,a,n,s){S(e,!0),S(a,"");try{(await fetch(`${i(n)}/api/health`)).ok?(S(a,"success"),s("✅ Connection successful","s")):(S(a,"error"),s("❌ Connection failed","e"))}catch(r){S(a,"error"),s(`❌ Connection error: ${r.message}`,"e")}finally{S(e,!1)}}async function Bi(t,e,a,n){e(),S(a,!0);try{await n()}finally{S(a,!1)}}async function Yi(t,e,a,n){e(),S(a,!0);try{await n()}finally{S(a,!1)}}function Ji(t,e,a,n,s,r,o){confirm("Reset all setup fields to defaults?")&&(e(),S(a,window.location.origin,!0),S(n,"admin@example.com"),S(s,"unifiedpassword"),r(),o("🔄 Reset to defaults","i"))}var ji=(t,e)=>t.target===t.currentTarget&&e(),zi=(t,e)=>S(e,!i(e)),Hi=(t,e)=>S(e,!0),Vi=R("<div> </div>"),Gi=(t,e)=>t.target===t.currentTarget&&S(e,!1),Ki=(t,e)=>S(e,!1),Qi=R(`<div class="setup-modal-overlay svelte-1vc718t" style="z-index: 11000;"><div class="setup-help-content svelte-1vc718t"><button class="setup-help-close svelte-1vc718t">✕ Close</button> <h1 class="svelte-1vc718t">📚 PocketBase Schema Reference</h1> <h2 class="svelte-1vc718t">🔧 Field Types & Properties</h2> <h3 class="svelte-1vc718t">Text Fields</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">Number Fields</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">Boolean Fields</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">JSON Fields</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">Relation Fields</h3> <pre class="svelte-1vc718t"></pre> <h2 class="svelte-1vc718t">📋 Collection Properties</h2> <pre class="svelte-1vc718t"></pre> <h2 class="svelte-1vc718t">🔒 API Rules</h2> <p class="svelte-1vc718t">Rules control who can access records via API. Common patterns:</p> <h3 class="svelte-1vc718t">Public Access</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">Authenticated Users</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">Owner Only Access</h3> <pre class="svelte-1vc718t"></pre> <h2 class="svelte-1vc718t">❌ CRITICAL ERRORS TO AVOID</h2> <h3 class="svelte-1vc718t">🚫 NEVER Use These Patterns (DEPRECATED)</h3> <pre class="error-example svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">✅ CORRECT Patterns (Current PocketBase)</h3> <pre class="success-example svelte-1vc718t"></pre> <h2 class="svelte-1vc718t">💡 Pro Tips</h2> <ul class="svelte-1vc718t"><li class="svelte-1vc718t">Always include <code class="svelte-1vc718t">type</code>, <code class="svelte-1vc718t">required</code>, and <code class="svelte-1vc718t">presentable</code> for every field</li> <li class="svelte-1vc718t">Use <code class="svelte-1vc718t">indexes</code> for fields you'll search/filter frequently</li> <li class="svelte-1vc718t">JSON fields are powerful but can't be indexed - use wisely</li> <li class="svelte-1vc718t">Test your API rules thoroughly before production</li> <li class="svelte-1vc718t">Keep field names simple: lowercase, no spaces, underscores OK</li> <li class="svelte-1vc718t">Set reasonable <code class="svelte-1vc718t">maxSize</code> limits on JSON fields</li> <li class="svelte-1vc718t">Use <code class="svelte-1vc718t">pattern</code> for email, phone, or custom validation</li> <li class="svelte-1vc718t">Remember: empty string "" = public access, null = admin only</li></ul> <h2 class="svelte-1vc718t">🔍 Quick Validation Checklist</h2> <ol class="svelte-1vc718t"><li class="svelte-1vc718t">✓ Every field has: name, type, required, presentable</li> <li class="svelte-1vc718t">✓ Collection has: name, type, fields array</li> <li class="svelte-1vc718t">✓ No "options" wrapper on field properties</li> <li class="svelte-1vc718t">✓ No spaces or hyphens in field names</li> <li class="svelte-1vc718t">✓ API rules are either "", null, or valid expressions</li> <li class="svelte-1vc718t">✓ JSON is valid (no trailing commas, proper quotes)</li></ol></div></div>`),Xi=R('<div class="setup-modal-overlay svelte-1vc718t"><div class="setup-modal-content svelte-1vc718t"><div class="setup-container svelte-1vc718t"><div class="setup-stats svelte-1vc718t"><div class="setup-stat svelte-1vc718t"><span class="setup-stat-val svelte-1vc718t"> </span> Collections</div> <div class="setup-stat svelte-1vc718t"><span class="setup-stat-val svelte-1vc718t"> </span> Fields</div> <div class="setup-stat svelte-1vc718t"><span class="setup-stat-val svelte-1vc718t"> </span> Seeds</div> <div class="setup-stat svelte-1vc718t"><span class="setup-stat-val svelte-1vc718t"> </span> Health</div></div> <div class="setup-progress svelte-1vc718t"><div class="setup-progress-fill svelte-1vc718t"></div></div> <div class="setup-row svelte-1vc718t"><div class="setup-col svelte-1vc718t"><label for="setup-url" class="svelte-1vc718t">PocketBase URL:</label> <input id="setup-url" placeholder="http://localhost:8090" class="svelte-1vc718t"/></div> <div class="setup-col svelte-1vc718t"><label for="setup-email" class="svelte-1vc718t">Admin Email:</label> <input id="setup-email" placeholder="admin@example.com" class="svelte-1vc718t"/></div> <div class="setup-col svelte-1vc718t"><label for="setup-pass" class="svelte-1vc718t">Password:</label> <div style="position:relative;"><input id="setup-pass" style="padding-right: 30px;" class="svelte-1vc718t"/> <button type="button" class="setup-pass-toggle svelte-1vc718t"> </button></div></div></div> <div class="setup-row svelte-1vc718t"><button class="svelte-1vc718t"> </button> <button class="svelte-1vc718t">✅ Validate</button> <button class="svelte-1vc718t">🚀 Full Setup</button> <button class="svelte-1vc718t">📋 Schema Only</button> <button class="svelte-1vc718t">🌱 Seed Only</button> <button class="svelte-1vc718t">📚 Help & Docs</button></div> <div class="setup-row svelte-1vc718t"><button class="setup-danger svelte-1vc718t">🗑️ Reset</button> <button class="svelte-1vc718t">❌ Close</button></div> <div class="setup-row svelte-1vc718t"><div class="setup-col svelte-1vc718t"><h2 class="svelte-1vc718t">📋 Collections Schema</h2> <textarea class="setup-editor svelte-1vc718t" placeholder="Collections JSON..."></textarea> <div> </div></div> <div class="setup-col svelte-1vc718t"><h2 class="svelte-1vc718t">🌱 Seed Data</h2> <textarea class="setup-editor svelte-1vc718t" placeholder="Seed data JSON..."></textarea> <div> </div></div></div> <div id="setup-output" class="setup-output svelte-1vc718t"></div></div></div></div> <!>',1);function Zi(t,e){oe(e,!0);let a=C(J(window.location.origin)),n=C("admin@example.com"),s=C("unifiedpassword"),r=C(!1),o=C(!1),c=C(0),l=J({collections:0,fields:0,seeds:0,health:"❓"}),d=J({validate:!0,setup:!0,schema:!0,seed:!0}),u=J({collections:{valid:!0,message:"Ready"},seeds:{valid:!0,message:"Ready"}}),f=C(""),v=C(""),m=C(J([])),g=C(""),T=C(!1),y=C(!1);function b(){p.showSetupModal=!1;const O=document.querySelector(".setup-notification");O&&O.remove()}function D(O,q="i"){const F=new Date().toLocaleTimeString(),V={e:"error",s:"success",w:"warning",i:"info"};S(m,[...i(m),{time:F,msg:O,type:V[q]||"info"}],!0),setTimeout(()=>{const G=document.getElementById("setup-output");G&&(G.scrollTop=G.scrollHeight)},10)}function I(O,q){S(c,O,!0),q&&D(q,"i")}function k(){try{const O=JSON.parse(i(f)),q=JSON.parse(i(v));l.collections=O.length,l.fields=O.reduce((F,V)=>{var G;return F+(((G=V.fields)==null?void 0:G.length)||0)},0),l.seeds=q.reduce((F,V)=>{var G;return F+(((G=V.records)==null?void 0:G.length)||0)},0)}catch{}}function E(O,q){try{return{valid:!0,message:"Valid JSON",data:JSON.parse(O)}}catch(F){const V=F.message.match(/position (\d+)/);return{valid:!1,message:`Invalid JSON${V?` at position ${V[1]}`:""}`}}}function z(){const O=E(i(f));return u.collections=O,k(),O.valid}function B(){const O=E(i(v));return u.seeds=O,k(),O.valid}function H(){S(m,[],!0)}async function xe(){H(),S(y,!0);try{await pe()&&await ne()&&(D("🎉 Full setup complete!","s"),l.health="✅",setTimeout(()=>{b(),p.init()},2e3))}finally{S(y,!1)}}async function pe(){var O;if(!z())return D("❌ Collection validation failed","e"),!1;I(20,"Setting up schema...");try{const q=window.PocketBase,F=new q(i(a));await F.admins.authWithPassword(i(n),i(s));const V=JSON.parse(i(f));I(40,"Importing collections..."),await F.collections.import(V,!1);const G=V.find(ue=>ue.name==="templates"),we=V.find(ue=>ue.name==="planners");if(G&&we){I(70,"Adding relations...");try{const ue=await F.collections.getOne("templates"),Ae=await F.collections.getOne("planners"),Se=Ae.fields.findIndex(De=>De.name==="template_id");if(Se!==-1){const De=[...Ae.fields];De[Se]={name:"template_id",type:"relation",required:!1,presentable:!0,collectionId:ue.id,cascadeDelete:!1,minSelect:0,maxSelect:1,displayFields:["name","description"]},await F.collections.update(Ae.id,{fields:De}),D("✅ Updated template_id to relation field","s")}else D("⚠️ template_id field not found","w")}catch(ue){D(`⚠️ Relation setup warning: ${ue.message}`,"w")}}return I(100,"✅ Schema setup complete"),(O=F==null?void 0:F.authStore)!=null&&O.isValid&&F.authStore.clear(),!0}catch(q){return D(`❌ Schema error: ${q.message}`,"e"),l.health="❌",!1}}async function ne(){var O,q,F,V;if(!B())return D("❌ Seed validation failed","e"),!1;I(10,"Seeding data...");try{const G=window.PocketBase,we=new G(i(a));await we.admins.authWithPassword(i(n),i(s));const ue=JSON.parse(i(v));let Ae=0;for(const Se of ue){if(!Se.collection||!Se.records){D("⚠️ Invalid seed format","w");continue}I(30,`Seeding ${Se.collection}...`);for(const De of Se.records)try{await we.collection(Se.collection).create(De),Ae++}catch(tt){tt.status===400&&((F=(q=(O=tt.data)==null?void 0:O.data)==null?void 0:q.name)==null?void 0:F.code)==="validation_not_unique"?D(`ℹ️ Skipping duplicate: ${De.name||"record"}`,"i"):D(`⚠️ Seed error: ${tt.message}`,"w")}}return I(100,`✅ Seeded ${Ae} records`),(V=we==null?void 0:we.authStore)!=null&&V.isValid&&we.authStore.clear(),!0}catch(G){return D(`❌ Seed error: ${G.message}`,"e"),!1}}function _e(){return[{name:"templates",type:"base",fields:[{name:"name",type:"text",required:!0,presentable:!0,min:1,max:50},{name:"description",type:"text",required:!1,presentable:!1,max:200},{name:"is_default",type:"bool",required:!1,presentable:!1},{name:"version",type:"number",required:!1,presentable:!1,min:1,noDecimal:!0},{name:"structure",type:"json",required:!0,presentable:!1,maxSize:5242880}],indexes:["CREATE UNIQUE INDEX idx_templates_name ON templates (name)"],listRule:"",viewRule:"",createRule:null,updateRule:null,deleteRule:null},{name:"planners",type:"base",fields:[{name:"week_id",type:"text",required:!0,presentable:!0,pattern:"^\\d{4}-W(0[1-9]|[1-4]\\d|5[0-3])$",min:8,max:8},{name:"template_id",type:"text",required:!1,presentable:!0,max:50},{name:"title",type:"text",required:!1,presentable:!1,max:100},{name:"city",type:"text",required:!1,presentable:!1,max:50},{name:"date_range",type:"text",required:!1,presentable:!1,max:20},{name:"prayer_times",type:"json",required:!1,presentable:!1,maxSize:2048},{name:"schedule_data",type:"json",required:!1,presentable:!1,maxSize:1048576},{name:"tasks_data",type:"json",required:!1,presentable:!1,maxSize:524288},{name:"workout_data",type:"json",required:!1,presentable:!1,maxSize:262144},{name:"meals_data",type:"json",required:!1,presentable:!1,maxSize:131072},{name:"grocery_data",type:"json",required:!1,presentable:!1,maxSize:131072},{name:"measurements_data",type:"json",required:!1,presentable:!1,maxSize:65536},{name:"financials_data",type:"json",required:!1,presentable:!1,maxSize:65536}],indexes:["CREATE UNIQUE INDEX idx_planners_week_id ON planners (week_id)"],listRule:"",viewRule:"",createRule:"",updateRule:"",deleteRule:""}]}function Le(){return[{collection:"templates",records:[{name:"default",description:"Default weekly planner template with all sections",is_default:!0,version:5,structure:{prayer_times:[{label:"Q",value:"4:30AM"},{label:"F",value:"5:30AM"},{label:"D",value:"12:30PM"},{label:"A",value:"3:45PM"},{label:"M",value:"6:30PM"},{label:"I",value:"8:00PM"}],schedule:[{name:"QIYAM",activities:[{name:"DAILY: Wakeup early",max_per_day:1,max_score:7},{name:"DAILY: Qiyam/Tahajjud",max_per_day:1,max_score:7},{name:"DAILY: Nutty Pudding",max_per_day:1,max_score:7}]},{name:"FAJR",activities:[{name:"DAILY: Fajr prayer",max_per_day:1,max_score:7},{name:"DAILY: Quran - 1 Juz",max_per_day:1,max_score:7},{name:"DAILY: 5min Cold Shower",max_per_day:1,max_score:7}]},{name:"7AM - 9AM",activities:[{name:"MON/THU: COMMUTE",days:["mon","thu"],max_per_day:1,max_score:2},{name:"TUE/WED/FRI: Reading/Study (book/course/skill)",days:["tue","wed","fri"],max_per_day:1,max_score:3},{name:"SAT: Errands, Grocery shopping, Meal prep",days:["sat"],max_per_day:3,max_score:3},{name:"SUN: House cleaning, laundry",days:["sun"],max_per_day:2,max_score:2}]},{name:"9AM - 5PM",activities:[{name:"MON-FRI: Work",days:["mon","tue","wed","thu","fri"],max_per_day:1,max_score:5},{name:"DAILY: ZeroInbox (E1, E2, E3, E4, LI, Slack)",max_per_day:1,max_score:30},{name:"SAT/SUN: Nature time / Outdoor Activity / Adventure",days:["sat","sun"],max_per_day:1,max_score:2}]},{name:"DHUHR",activities:[{name:"DAILY: Dhuhr prayer",max_per_day:1,max_score:7},{name:"TUE/WED/FRI: Sun walk (30-45 minutes)",days:["tue","wed","fri"],max_per_day:1,max_score:3},{name:"FRI: £10 Sadaqa",days:["fri"],max_per_day:1,max_score:1}]},{name:"ASR",activities:[{name:"DAILY: Asr prayer",max_per_day:1,max_score:7}]},{name:"5PM - 6:30PM",activities:[{name:"MON/THU: COMMUTE",days:["mon","thu"],max_per_day:1,max_score:2},{name:"TUE/WED/FRI: Workout",days:["tue","wed","fri"],max_per_day:1,max_score:3},{name:"TUE/WED/FRI: Third Meal",days:["tue","wed","fri"],max_per_day:1,max_score:3}]},{name:"6:30PM - ISHA",activities:[{name:"MON/TUE/WED/THU: Personal",days:["mon","tue","wed","thu"],max_per_day:1,max_score:4},{name:"DAILY: Family/Friends/Date calls(M, WA, Phone)",max_per_day:1,max_score:12},{name:"FRI/SAT/SUN: Family/Friends/Date visits/outings/activities",days:["fri","sat","sun"],max_per_day:1,max_score:9}]},{name:"MAGHRIB",activities:[{name:"DAILY: Maghrib prayer",max_per_day:1,max_score:7},{name:"DAILY: Super Veggie",max_per_day:1,max_score:7}]},{name:"ISHA",activities:[{name:"DAILY: Isha prayer",max_per_day:1,max_score:7},{name:"DAILY: Sleep early",max_per_day:1,max_score:7}]},{name:"ALLDAY",activities:[{name:"DAILY: No Doomscrolling; (FB, YTB, LKDN, & IG)",max_per_day:4,max_score:28},{name:"DAILY: No Fap; (P, & M)",max_per_day:2,max_score:14},{name:"DAILY: No Processed; (Sugar, RefinedFlour, SeedOils, Soda, FastFood)",max_per_day:5,max_score:35},{name:"MON/THU: Fasting",days:["mon","thu"],max_per_day:1,max_score:2},{name:"DAILY: Expense Tracker <25",max_per_day:0,max_score:0}]},{name:"TOTAL",activities:[{name:"DAILY POINTS",max_per_day:0,max_score:247}]}],tasks:{count:15,fields:["priority","description","tag","start_date","expected_date","actual_date","completed"]},workout:[{name:"TUESDAY",exercises:[{name:"Incline Dumbbell Press",default_weight:30,default_sets:3,default_reps:12},{name:"Barbell Squats",default_weight:80,default_sets:3,default_reps:8},{name:"DB Chest-Supported Row",default_weight:25,default_sets:3,default_reps:12},{name:"Leg Curls",default_weight:40,default_sets:3,default_reps:12},{name:"SS: Incline DB Curls",default_weight:15,default_sets:3,default_reps:12},{name:"SS: Tricep Extensions",default_weight:20,default_sets:3,default_reps:12}]},{name:"WEDNESDAY",exercises:[{name:"Barbell Bench Press",default_weight:70,default_sets:3,default_reps:6},{name:"Romanian Deadlift",default_weight:90,default_sets:3,default_reps:8},{name:"Lat Pulldown",default_weight:60,default_sets:3,default_reps:12},{name:"Walking Lunges",default_weight:20,default_sets:3,default_reps:12},{name:"SS: Cable Lateral Raises",default_weight:10,default_sets:3,default_reps:15},{name:"SS: Reverse Crunches",default_weight:0,default_sets:3,default_reps:15}]},{name:"FRIDAY",exercises:[{name:"Seated DB Shoulder Press",default_weight:20,default_sets:3,default_reps:12},{name:"Dumbbell Row",default_weight:25,default_sets:3,default_reps:12},{name:"Barbell Hip Thrust",default_weight:100,default_sets:3,default_reps:15},{name:"Leg Extensions",default_weight:50,default_sets:3,default_reps:12},{name:"Seated Chest Flyes",default_weight:15,default_sets:3,default_reps:12},{name:"SS: Standing Calf Raises",default_weight:30,default_sets:3,default_reps:20},{name:"SS: Reverse Cable Flyes",default_weight:10,default_sets:3,default_reps:15}]}],meals:[{name:"Nutty Pudding",ingredients:"Berries ½c, Cherries 3, Pomegranate Juice 2oz, Macadamia nuts (raw) 45g, Walnuts (raw) 5g, Cocoa 1t, Brazil Nuts ¼, Milk 50-100ml, Chia Seeds 2T, Flax (ground, refr) 1t, Lecithin 1t, Ceylon Cinnamon ½t"},{name:"Super Veggie",ingredients:"Broccoli 250g, Cauliflower 150g, Mushrooms 50g, Garlic 1 clove, Ginger 3g, Cumin 1T, Black Lentils 45g, Hemp Seeds 1T, Apple Cider Vinegar 1T"},{name:"Third Meal",ingredients:"Sweet Potato 350-400g, Protein 100-150g, Grape Tomatoes 12, Avocado ½, Radishes 4, Cilantro ¼c, Lemon 1, Jalapeño (lg) 1, Chili Powder 1t"}],grocery:{categories:[{name:"Produce",items:"Broccoli 1.75kg, Cauliflower 1.05kg, Mushrooms 350g, Garlic 1 bulb, Ginger 1pc, Sweet Potato 2.8kg, Grape Tomatoes 84, Avocados (ripe) 4, Radishes 28, Cilantro 2-3 bunch"},{name:"Fruits & Protein",items:"Lemons 7, Jalapeños (lg) 7, Berries 3.5c, Cherries 21, Black Lentils 315g, Protein 1.05kg, Milk (fortified) 1L"}]},measurements:[{name:"Weight",placeholder:"75kg"},{name:"Chest",placeholder:"42in"},{name:"Waist",placeholder:"34in"},{name:"Hips",placeholder:"36in"},{name:"Arms",placeholder:"15in"},{name:"Thighs",placeholder:"24in"}],financials:[{name:"Rent",placeholder:"850",account:"Cash"},{name:"Allowance",placeholder:"850",account:"Revolut"},{name:"Savings",placeholder:"3800",account:"HSBCUK"}],city_default:"London"}}]}]}function he(){S(f,JSON.stringify(_e(),null,2),!0),S(v,JSON.stringify(Le(),null,2),!0),k(),z(),B()}Xn(()=>{he()});var me=Xi(),ge=Me(me);ge.__click=[ji,b];var Ee=_(ge),Oe=_(Ee),je=_(Oe),Z=_(je),U=_(Z),ye=_(U),Y=h(Z,2),ze=_(Y),Xe=_(ze),Ze=h(Y,2),_a=_(Ze),jt=_(_a),zt=h(Ze,2),ha=_(zt),He=_(ha),be=h(je,2),et=_(be),it=h(be,2),Ja=_(it),Zn=h(_(Ja),2),ja=h(Ja,2),es=h(_(ja),2),ts=h(ja,2),as=h(_(ts),2),ma=_(as),za=h(ma,2);za.__click=[zi,r];var ns=_(za),Ha=h(it,2),Ht=_(Ha);Ht.__click=[qi,T,g,a,D];var ss=_(Ht),ga=h(Ht,2);ga.__click=[Ui,D,z,B];var ya=h(ga,2);ya.__click=xe;var wa=h(ya,2);wa.__click=[Bi,H,y,pe];var Sa=h(wa,2);Sa.__click=[Yi,H,y,ne];var rs=h(Sa,2);rs.__click=[Hi,o];var Va=h(Ha,2),xa=_(Va);xa.__click=[Ji,H,a,n,s,he,D];var is=h(xa,2);is.__click=b;var Ga=h(Va,2),Ka=_(Ga),Vt=h(_(Ka),2);Vt.__input=z;var Qa=h(Vt,2);let Xa;var ls=_(Qa),os=h(Ka,2),Gt=h(_(os),2);Gt.__input=B;var Za=h(Gt,2);let en;var cs=_(Za),us=h(Ga,2);ae(us,21,()=>i(m),Ue,(O,q)=>{var F=Vi(),V=_(F);W(()=>{Q(F,1,`log-${i(q).type??""}`,"svelte-1vc718t"),N(V,`[${i(q).time??""}] ${i(q).msg??""}`)}),A(O,F)});var ds=h(ge,2);{var fs=O=>{var q=Qi();q.__click=[Gi,o];var F=_(q),V=_(F);V.__click=[Ki,o];var G=h(V,8);G.textContent=`{
  "name": "title",
  "type": "text",
  "required": true,
  "presentable": true,
  "min": 1,                // Minimum length
  "max": 100,              // Maximum length
  "pattern": "^[A-Z].*"    // Regex pattern
}`;var we=h(G,4);we.textContent=`{
  "name": "age",
  "type": "number",
  "required": false,
  "presentable": false,
  "min": 0,                // Minimum value
  "max": 150,              // Maximum value
  "noDecimal": true        // Integer only
}`;var ue=h(we,4);ue.textContent=`{
  "name": "is_active",
  "type": "bool",
  "required": false,
  "presentable": false
}`;var Ae=h(ue,4);Ae.textContent=`{
  "name": "metadata",
  "type": "json",
  "required": false,
  "presentable": false,
  "maxSize": 2097152       // Max size in bytes (2MB)
}`;var Se=h(Ae,4);Se.textContent=`{
  "name": "template_id",
  "type": "relation",
  "required": true,
  "presentable": true,
  "collectionId": "xyz123",     // Target collection ID
  "cascadeDelete": false,       // Delete this when related deleted
  "minSelect": 1,               // Minimum selections
  "maxSelect": 1,               // Maximum selections (1 = single)
  "displayFields": ["name"]     // Fields to show in UI
}`;var De=h(Se,4);De.textContent=`{
  "name": "planners",              // Collection name (a-z, 0-9, _)
  "type": "base",                  // "base" or "auth"
  "listRule": "",                  // API rules (see below)
  "viewRule": "",
  "createRule": "",
  "updateRule": "",
  "deleteRule": "",
  "indexes": [                     // SQL indexes for performance
    "CREATE INDEX idx_week ON planners (week_id)"
  ],
  "fields": [...]                  // Array of field definitions
}`;var tt=h(De,8);tt.textContent=`{
  "listRule": "",          // Empty string = public access
  "viewRule": "",          // Anyone can read
  "createRule": null,      // null = admin only
  "updateRule": null,      // No public updates
  "deleteRule": null       // No public deletes
}`;var tn=h(tt,4);tn.textContent=`{
  "listRule": "@request.auth.id != ''",    // Any logged in user
  "viewRule": "@request.auth.id != ''",    
  "createRule": "@request.auth.id != ''",  
  "updateRule": "@request.auth.id != ''",  
  "deleteRule": "@request.auth.id != ''"   
}`;var an=h(tn,4);an.textContent=`{
  "listRule": "user = @request.auth.id",     // List own records only
  "viewRule": "user = @request.auth.id",     // View own records only
  "createRule": "@request.auth.id != ''",    // Any auth user can create
  "updateRule": "user = @request.auth.id",   // Update own records only
  "deleteRule": "user = @request.auth.id"    // Delete own records only
}`;var nn=h(an,6);nn.textContent=`// ❌ WRONG: Nested options structure (old PocketBase version)
{
  "name": "title",
  "type": "text",
  "required": true,
  "options": {              // ❌ DON'T USE "options" wrapper
    "max": 100,
    "min": 1
  }
}

// ❌ WRONG: Schema key instead of fields
{
  "name": "posts",
  "schema": [...]           // ❌ DON'T USE "schema" key
}

// ❌ WRONG: Invalid field names
{
  "name": "field name",     // ❌ No spaces
  "name": "field-name",     // ❌ No hyphens
  "name": "123field",       // ❌ Can't start with number
  "name": "id",             // ❌ Reserved name
}`;var vs=h(nn,4);vs.textContent=`// ✅ CORRECT: Direct properties
{
  "name": "title",
  "type": "text",
  "required": true,
  "presentable": true,
  "max": 100,               // ✅ Direct property
  "min": 1                  // ✅ Direct property
}

// ✅ CORRECT: Fields key
{
  "name": "posts",
  "fields": [...]           // ✅ Use "fields" key
}

// ✅ CORRECT: Valid field names
{
  "name": "field_name",     // ✅ Underscores OK
  "name": "fieldName",      // ✅ camelCase OK
  "name": "field123"        // ✅ Numbers at end OK
}`,A(O,q)};le(ds,O=>{i(o)&&O(fs)})}W((O,q)=>{N(ye,l.collections),N(Xe,l.fields),N(jt,l.seeds),N(He,l.health),oa(et,`width: ${i(c)??""}%`),qe(ma,"type",i(r)?"text":"password"),N(ns,i(r)?"🙈":"👁️"),Ht.disabled=i(T)||i(y),N(ss,`${i(T)?"⏳":"🔌"} Test Connection`),ga.disabled=i(y)||!d.validate,ya.disabled=i(y)||!d.setup,wa.disabled=i(y)||!d.schema,Sa.disabled=i(y)||!d.seed,xa.disabled=i(y),Vt.disabled=i(y),Xa=Q(Qa,1,"setup-status svelte-1vc718t",null,Xa,O),N(ls,u.collections.message),Gt.disabled=i(y),en=Q(Za,1,"setup-status svelte-1vc718t",null,en,q),N(cs,u.seeds.message)},[()=>({"setup-valid":u.collections.valid,"setup-invalid":!u.collections.valid}),()=>({"setup-valid":u.seeds.valid,"setup-invalid":!u.seeds.valid})]),X(Zn,()=>i(a),O=>S(a,O)),X(es,()=>i(n),O=>S(n,O)),X(ma,()=>i(s),O=>S(s,O)),X(Vt,()=>i(f),O=>S(f,O)),X(Gt,()=>i(v),O=>S(v,O)),A(t,me),ce()}Je(["click","input"]);var el=R('<div class="viewport-container"><div class="card"><!> <!> <!> <!> <!> <!> <!> <!></div></div> <!>',1),tl=R("<!> <!> <!>",1);function al(t,e){oe(e,!0);let a=C(!1);ea(()=>{S(a,p.showSetupModal,!0),console.log("App.svelte: showSetupModal changed to",i(a))}),Xn(()=>{p.init()});var n=tl(),s=Me(n);Ei(s,{});var r=h(s,2);{var o=u=>{var f=el(),v=Me(f),m=_(v),g=_(m);Br(g,{});var T=h(g,2);Xr(T,{});var y=h(T,2);si(y,{});var b=h(y,2);di(b,{});var D=h(b,2);pi(D,{});var I=h(D,2);mi(I,{});var k=h(I,2);Si(k,{});var E=h(k,2);ki(E,{});var z=h(v,2);Wi(z,{}),A(u,f)};le(r,u=>{p.isInitializing||u(o)})}var c=h(r,2);{var l=u=>{Zi(u,{})},d=u=>{};le(c,u=>{i(a)?u(l):u(d,!1)})}A(t,n),ce()}gr(al,{target:document.getElementById("app")});
