var br=Object.defineProperty;var Ca=t=>{throw TypeError(t)};var Sr=(t,e,a)=>e in t?br(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var rt=(t,e,a)=>Sr(t,typeof e!="symbol"?e+"":e,a),xr=(t,e,a)=>e.has(t)||Ca("Cannot "+a);var S=(t,e,a)=>(xr(t,e,"read from private field"),a?a.call(t):e.get(t)),W=(t,e,a)=>e.has(t)?Ca("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=a(n);fetch(n.href,s)}})();const Oa=!1;var ta=Array.isArray,kr=Array.prototype.indexOf,ha=Array.from,Dr=Object.defineProperty,st=Object.getOwnPropertyDescriptor,Ba=Object.getOwnPropertyDescriptors,Tr=Object.prototype,Er=Array.prototype,ma=Object.getPrototypeOf,Pa=Object.isExtensible;function Ir(t){return t()}function ca(t){for(var e=0;e<t.length;e++)t[e]()}const we=2,Ja=4,aa=8,ga=16,Re=32,Ze=64,ya=128,pe=256,Jt=512,be=1024,We=2048,Ge=4096,Me=8192,wa=16384,Ya=32768,ba=65536,Cr=1<<17,Or=1<<19,za=1<<20,fa=1<<21,Ve=Symbol("$state"),Pr=Symbol("");function Ha(t){return t===this.v}function Ar(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Va(t){return!Ar(t,this.v)}function $r(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Nr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Lr(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Mr(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Wr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Rr(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ft=!1,Ur=!1;function jr(){Ft=!0}const Sa=1,xa=2,Ka=4,qr=8,Br=16,Jr=1,Yr=2,le=Symbol(),zr="http://www.w3.org/1999/xhtml";function Hr(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let J=null;function Aa(t){J=t}function _e(t,e=!1,a){var r=J={p:J,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Ft&&!e&&(J.l={s:null,u:null,r1:[],r2:ot(!1)}),an(()=>{r.d=!0})}function he(t){const e=J;if(e!==null){const o=e.e;if(o!==null){var a=R,r=L;e.e=null;try{for(var n=0;n<o.length;n++){var s=o[n];Ye(s.effect),Ae(s.reaction),sa(s.fn)}}finally{Ye(a),Ae(r)}}J=e.p,e.m=!0}return{}}function Ut(){return!Ft||J!==null&&J.l===null}function V(t){if(typeof t!="object"||t===null||Ve in t)return t;const e=ma(t);if(e!==Tr&&e!==Er)return t;var a=new Map,r=ta(t),n=E(0),s=L,o=u=>{var l=L;Ae(s);var c=u();return Ae(l),c};return r&&a.set("length",E(t.length)),new Proxy(t,{defineProperty(u,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Wr();var f=a.get(l);return f===void 0?f=o(()=>{var d=E(c.value);return a.set(l,d),d}):b(f,c.value,!0),!0},deleteProperty(u,l){var c=a.get(l);if(c===void 0){if(l in u){const v=o(()=>E(le));a.set(l,v),la(n)}}else{if(r&&typeof l=="string"){var f=a.get("length"),d=Number(l);Number.isInteger(d)&&d<f.v&&b(f,d)}b(c,le),la(n)}return!0},get(u,l,c){var h;if(l===Ve)return t;var f=a.get(l),d=l in u;if(f===void 0&&(!d||(h=st(u,l))!=null&&h.writable)&&(f=o(()=>{var g=V(d?u[l]:le),x=E(g);return x}),a.set(l,f)),f!==void 0){var v=i(f);return v===le?void 0:v}return Reflect.get(u,l,c)},getOwnPropertyDescriptor(u,l){var c=Reflect.getOwnPropertyDescriptor(u,l);if(c&&"value"in c){var f=a.get(l);f&&(c.value=i(f))}else if(c===void 0){var d=a.get(l),v=d==null?void 0:d.v;if(d!==void 0&&v!==le)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(u,l){var v;if(l===Ve)return!0;var c=a.get(l),f=c!==void 0&&c.v!==le||Reflect.has(u,l);if(c!==void 0||R!==null&&(!f||(v=st(u,l))!=null&&v.writable)){c===void 0&&(c=o(()=>{var h=f?V(u[l]):le,g=E(h);return g}),a.set(l,c));var d=i(c);if(d===le)return!1}return f},set(u,l,c,f){var $;var d=a.get(l),v=l in u;if(r&&l==="length")for(var h=c;h<d.v;h+=1){var g=a.get(h+"");g!==void 0?b(g,le):h in u&&(g=o(()=>E(le)),a.set(h+"",g))}if(d===void 0)(!v||($=st(u,l))!=null&&$.writable)&&(d=o(()=>E(void 0)),b(d,V(c)),a.set(l,d));else{v=d.v!==le;var x=o(()=>V(c));b(d,x)}var w=Reflect.getOwnPropertyDescriptor(u,l);if(w!=null&&w.set&&w.set.call(f,c),!v){if(r&&typeof l=="string"){var k=a.get("length"),P=Number(l);Number.isInteger(P)&&P>=k.v&&b(k,P+1)}la(n)}return!0},ownKeys(u){i(n);var l=Reflect.ownKeys(u).filter(d=>{var v=a.get(d);return v===void 0||v.v!==le});for(var[c,f]of a)f.v!==le&&!(c in u)&&l.push(c);return l},setPrototypeOf(){Rr()}})}function la(t,e=1){b(t,t.v+e)}function $a(t){try{if(t!==null&&typeof t=="object"&&Ve in t)return t[Ve]}catch{}return t}function Vr(t,e){return Object.is($a(t),$a(e))}function ka(t){var e=we|We,a=L!==null&&(L.f&we)!==0?L:null;return R===null||a!==null&&(a.f&pe)!==0?e|=pe:R.f|=za,{ctx:J,deps:null,effects:null,equals:Ha,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:a??R}}function Le(t){const e=ka(t);return e.equals=Va,e}function Ga(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Je(e[a])}}function Kr(t){for(var e=t.parent;e!==null;){if((e.f&we)===0)return e;e=e.parent}return null}function Qa(t){var e,a=R;Ye(Kr(t));try{Ga(t),e=pr(t)}finally{Ye(a)}return e}function Xa(t){var e=Qa(t);if(t.equals(e)||(t.v=e,t.wv=dr()),!tt){var a=(je||(t.f&pe)!==0)&&t.deps!==null?Ge:be;$e(t,a)}}const lt=new Map;function ot(t,e){var a={f:0,v:t,reactions:null,equals:Ha,rv:0,wv:0};return a}function E(t,e){const a=ot(t);return fn(a),a}function Gr(t,e=!1,a=!0){var n;const r=ot(t);return e||(r.equals=Va),Ft&&a&&J!==null&&J.l!==null&&((n=J.l).s??(n.s=[])).push(r),r}function b(t,e,a=!1){L!==null&&!Oe&&Ut()&&(L.f&(we|ga))!==0&&!(X!=null&&X[1].includes(t)&&X[0]===L)&&Fr();let r=a?V(e):e;return ut(t,r)}function ut(t,e){if(!t.equals(e)){var a=t.v;tt?lt.set(t,e):lt.set(t,a),t.v=e,(t.f&we)!==0&&((t.f&We)!==0&&Qa(t),$e(t,(t.f&pe)===0?be:Ge)),t.wv=dr(),Za(t,We),Ut()&&R!==null&&(R.f&be)!==0&&(R.f&(Re|Ze))===0&&(ye===null?dn([t]):ye.push(t))}return e}function Za(t,e){var a=t.reactions;if(a!==null)for(var r=Ut(),n=a.length,s=0;s<n;s++){var o=a[s],u=o.f;(u&We)===0&&(!r&&o===R||($e(o,e),(u&(be|pe))!==0&&((u&we)!==0?Za(o,Ge):Ia(o))))}}function Qr(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let Xr=!1;var Na,er,tr,ar;function Zr(){if(Na===void 0){Na=window,er=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;tr=st(e,"firstChild").get,ar=st(e,"nextSibling").get,Pa(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Pa(a)&&(a.__t=void 0)}}function ra(t=""){return document.createTextNode(t)}function Yt(t){return tr.call(t)}function na(t){return ar.call(t)}function _(t,e){return Yt(t)}function Pe(t,e){{var a=Yt(t);return a instanceof Comment&&a.data===""?na(a):a}}function m(t,e=1,a=!1){let r=t;for(;e--;)r=na(r);return r}function en(t){t.textContent=""}function rr(t){R===null&&L===null&&Lr(),L!==null&&(L.f&pe)!==0&&R===null&&Nr(),tt&&$r()}function tn(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function et(t,e,a,r=!0){var n=R,s={ctx:J,deps:null,nodes_start:null,nodes_end:null,f:t|We,first:null,fn:e,last:null,next:null,parent:n,prev:null,teardown:null,transitions:null,wv:0};if(a)try{Ea(s),s.f|=Ya}catch(l){throw Je(s),l}else e!==null&&Ia(s);var o=a&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(za|ya))===0;if(!o&&r&&(n!==null&&tn(s,n),L!==null&&(L.f&we)!==0)){var u=L;(u.effects??(u.effects=[])).push(s)}return s}function an(t){const e=et(aa,null,!1);return $e(e,be),e.teardown=t,e}function da(t){rr();var e=R!==null&&(R.f&Re)!==0&&J!==null&&!J.m;if(e){var a=J;(a.e??(a.e=[])).push({fn:t,effect:R,reaction:L})}else{var r=sa(t);return r}}function rn(t){return rr(),nr(t)}function nn(t){const e=et(Ze,t,!0);return(a={})=>new Promise(r=>{a.outro?zt(e,()=>{Je(e),r(void 0)}):(Je(e),r(void 0))})}function sa(t){return et(Ja,t,!1)}function nr(t){return et(aa,t,!0)}function M(t,e=[],a=ka){const r=e.map(a);return Da(()=>t(...r.map(i)))}function Da(t,e=0){return et(aa|ga|e,t,!0)}function ct(t,e=!0){return et(aa|Re,t,!0,e)}function sr(t){var e=t.teardown;if(e!==null){const a=tt,r=L;La(!0),Ae(null);try{e.call(null)}finally{La(a),Ae(r)}}}function ir(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){var r=a.next;(a.f&Ze)!==0?a.parent=null:Je(a,e),a=r}}function sn(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&Re)===0&&Je(e),e=a}}function Je(t,e=!0){var a=!1;(e||(t.f&Or)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ln(t.nodes_start,t.nodes_end),a=!0),ir(t,e&&!a),Qt(t,0),$e(t,wa);var r=t.transitions;if(r!==null)for(const s of r)s.stop();sr(t);var n=t.parent;n!==null&&n.first!==null&&lr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function ln(t,e){for(;t!==null;){var a=t===e?null:na(t);t.remove(),t=a}}function lr(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function zt(t,e){var a=[];Ta(t,a,!0),or(a,()=>{Je(t),e&&e()})}function or(t,e){var a=t.length;if(a>0){var r=()=>--a||e();for(var n of t)n.out(r)}else e()}function Ta(t,e,a){if((t.f&Me)===0){if(t.f^=Me,t.transitions!==null)for(const o of t.transitions)(o.is_global||a)&&e.push(o);for(var r=t.first;r!==null;){var n=r.next,s=(r.f&ba)!==0||(r.f&Re)!==0;Ta(r,e,s?a:!1),r=n}}}function Ht(t){ur(t,!0)}function ur(t,e){if((t.f&Me)!==0){t.f^=Me;for(var a=t.first;a!==null;){var r=a.next,n=(a.f&ba)!==0||(a.f&Re)!==0;ur(a,n?e:!1),a=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let Vt=[];function on(){var t=Vt;Vt=[],ca(t)}function un(t){Vt.length===0&&queueMicrotask(on),Vt.push(t)}function cn(t){var e=R;if((e.f&Ya)===0){if((e.f&ya)===0)throw t;e.fn(t)}else cr(t,e)}function cr(t,e){for(;e!==null;){if((e.f&ya)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let va=!1,Kt=null,Ke=!1,tt=!1;function La(t){tt=t}let Bt=[];let L=null,Oe=!1;function Ae(t){L=t}let R=null;function Ye(t){R=t}let X=null;function fn(t){L!==null&&L.f&fa&&(X===null?X=[L,[t]]:X[1].push(t))}let re=null,ve=0,ye=null;function dn(t){ye=t}let fr=1,Gt=0,je=!1,He=null;function dr(){return++fr}function ia(t){var d;var e=t.f;if((e&We)!==0)return!0;if((e&Ge)!==0){var a=t.deps,r=(e&pe)!==0;if(a!==null){var n,s,o=(e&Jt)!==0,u=r&&R!==null&&!je,l=a.length;if(o||u){var c=t,f=c.parent;for(n=0;n<l;n++)s=a[n],(o||!((d=s==null?void 0:s.reactions)!=null&&d.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);o&&(c.f^=Jt),u&&f!==null&&(f.f&pe)===0&&(c.f^=pe)}for(n=0;n<l;n++)if(s=a[n],ia(s)&&Xa(s),s.wv>t.wv)return!0}(!r||R!==null&&!je)&&$e(t,be)}return!1}function vr(t,e,a=!0){var r=t.reactions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];X!=null&&X[1].includes(t)&&X[0]===L||((s.f&we)!==0?vr(s,e,!1):e===s&&(a?$e(s,We):(s.f&be)!==0&&$e(s,Ge),Ia(s)))}}function pr(t){var h;var e=re,a=ve,r=ye,n=L,s=je,o=X,u=J,l=Oe,c=t.f;re=null,ve=0,ye=null,je=(c&pe)!==0&&(Oe||!Ke||L===null),L=(c&(Re|Ze))===0?t:null,X=null,Aa(t.ctx),Oe=!1,Gt++,t.f|=fa;try{var f=(0,t.fn)(),d=t.deps;if(re!==null){var v;if(Qt(t,ve),d!==null&&ve>0)for(d.length=ve+re.length,v=0;v<re.length;v++)d[ve+v]=re[v];else t.deps=d=re;if(!je)for(v=ve;v<d.length;v++)((h=d[v]).reactions??(h.reactions=[])).push(t)}else d!==null&&ve<d.length&&(Qt(t,ve),d.length=ve);if(Ut()&&ye!==null&&!Oe&&d!==null&&(t.f&(we|Ge|We))===0)for(v=0;v<ye.length;v++)vr(ye[v],t);return n!==null&&n!==t&&(Gt++,ye!==null&&(r===null?r=ye:r.push(...ye))),f}catch(g){cn(g)}finally{re=e,ve=a,ye=r,L=n,je=s,X=o,Aa(u),Oe=l,t.f^=fa}}function vn(t,e){let a=e.reactions;if(a!==null){var r=kr.call(a,t);if(r!==-1){var n=a.length-1;n===0?a=e.reactions=null:(a[r]=a[n],a.pop())}}a===null&&(e.f&we)!==0&&(re===null||!re.includes(e))&&($e(e,Ge),(e.f&(pe|Jt))===0&&(e.f^=Jt),Ga(e),Qt(e,0))}function Qt(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)vn(t,a[r])}function Ea(t){var e=t.f;if((e&wa)===0){$e(t,be);var a=R,r=Ke;R=t,Ke=!0;try{(e&ga)!==0?sn(t):ir(t),sr(t);var n=pr(t);t.teardown=typeof n=="function"?n:null,t.wv=fr;var s;Oa&&Ur&&(t.f&We)!==0&&t.deps}finally{Ke=r,R=a}}}function pn(){try{Mr()}catch(t){if(Kt!==null)cr(t,Kt);else throw t}}function _n(){var t=Ke;try{var e=0;for(Ke=!0;Bt.length>0;){e++>1e3&&pn();var a=Bt,r=a.length;Bt=[];for(var n=0;n<r;n++){var s=mn(a[n]);hn(s)}lt.clear()}}finally{va=!1,Ke=t,Kt=null}}function hn(t){var e=t.length;if(e!==0)for(var a=0;a<e;a++){var r=t[a];(r.f&(wa|Me))===0&&ia(r)&&(Ea(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?lr(r):r.fn=null))}}function Ia(t){va||(va=!0,queueMicrotask(_n));for(var e=Kt=t;e.parent!==null;){e=e.parent;var a=e.f;if((a&(Ze|Re))!==0){if((a&be)===0)return;e.f^=be}}Bt.push(e)}function mn(t){for(var e=[],a=t;a!==null;){var r=a.f,n=(r&(Re|Ze))!==0,s=n&&(r&be)!==0;if(!s&&(r&Me)===0){(r&Ja)!==0?e.push(a):n?a.f^=be:ia(a)&&Ea(a);var o=a.first;if(o!==null){a=o;continue}}var u=a.parent;for(a=a.next;a===null&&u!==null;)a=u.next,u=u.parent}return e}function i(t){var e=t.f,a=(e&we)!==0;if(He!==null&&He.add(t),L!==null&&!Oe){if(!(X!=null&&X[1].includes(t))||X[0]!==L){var r=L.deps;t.rv<Gt&&(t.rv=Gt,re===null&&r!==null&&r[ve]===t?ve++:re===null?re=[t]:(!je||!re.includes(t))&&re.push(t))}}else if(a&&t.deps===null&&t.effects===null){var n=t,s=n.parent;s!==null&&(s.f&pe)===0&&(n.f^=pe)}return a&&(n=t,ia(n)&&Xa(n)),tt&&lt.has(t)?lt.get(t):t.v}function gn(t){var e=He;He=new Set;var a=He,r;try{if(y(t),e!==null)for(r of He)e.add(r)}finally{He=e}return a}function ne(t){var e=gn(()=>y(t));for(var a of e)if((a.f&Cr)!==0)for(const r of a.deps||[])(r.f&we)===0&&ut(r,r.v);else ut(a,a.v)}function y(t){var e=Oe;try{return Oe=!0,t()}finally{Oe=e}}const yn=-7169;function $e(t,e){t.f=t.f&yn|e}function A(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ve in t)pa(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&Ve in a&&pa(a)}}}function pa(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{pa(t[r],e)}catch{}const a=ma(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Ba(a);for(let n in r){const s=r[n].get;if(s)try{s.call(t)}catch{}}}}}const wn=["touchstart","touchmove"];function bn(t){return wn.includes(t)}let Ma=!1;function Sn(){Ma||(Ma=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const a of t.target.elements)(e=a.__on_r)==null||e.call(a)})},{capture:!0}))}function xn(t){var e=L,a=R;Ae(null),Ye(null);try{return t()}finally{Ae(e),Ye(a)}}function _r(t,e,a,r=a){t.addEventListener(e,()=>xn(a));const n=t.__on_r;n?t.__on_r=()=>{n(),r(!0)}:t.__on_r=()=>r(!0),Sn()}const hr=new Set,_a=new Set;function ze(t){for(var e=0;e<t.length;e++)hr.add(t[e]);for(var a of _a)a(t)}function qt(t){var P;var e=this,a=e.ownerDocument,r=t.type,n=((P=t.composedPath)==null?void 0:P.call(t))||[],s=n[0]||t.target,o=0,u=t.__root;if(u){var l=n.indexOf(u);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var c=n.indexOf(e);if(c===-1)return;l<=c&&(o=l)}if(s=n[o]||t.target,s!==e){Dr(t,"currentTarget",{configurable:!0,get(){return s||a}});var f=L,d=R;Ae(null),Ye(null);try{for(var v,h=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var x=s["__"+r];if(x!=null&&(!s.disabled||t.target===s))if(ta(x)){var[w,...k]=x;w.apply(s,[t,...k])}else x.call(s,t)}catch($){v?h.push($):v=$}if(t.cancelBubble||g===e||g===null)break;s=g}if(v){for(let $ of h)queueMicrotask(()=>{throw $});throw v}}finally{t.__root=e,delete t.currentTarget,Ae(f),Ye(d)}}}function kn(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Xt(t,e){var a=R;a.nodes_start===null&&(a.nodes_start=t,a.nodes_end=e)}function I(t,e){var a=(e&Jr)!==0,r=(e&Yr)!==0,n,s=!t.startsWith("<!>");return()=>{n===void 0&&(n=kn(s?t:"<!>"+t),a||(n=Yt(n)));var o=r||er?document.importNode(n,!0):n.cloneNode(!0);if(a){var u=Yt(o),l=o.lastChild;Xt(u,l)}else Xt(o,o);return o}}function Zt(t=""){{var e=ra(t+"");return Xt(e,e),e}}function Dn(){var t=document.createDocumentFragment(),e=document.createComment(""),a=ra();return t.append(e,a),Xt(e,a),t}function T(t,e){t!==null&&t.before(e)}function N(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Tn(t,e){return En(t,e)}const Xe=new Map;function En(t,{target:e,anchor:a,props:r={},events:n,context:s,intro:o=!0}){Zr();var u=new Set,l=d=>{for(var v=0;v<d.length;v++){var h=d[v];if(!u.has(h)){u.add(h);var g=bn(h);e.addEventListener(h,qt,{passive:g});var x=Xe.get(h);x===void 0?(document.addEventListener(h,qt,{passive:g}),Xe.set(h,1)):Xe.set(h,x+1)}}};l(ha(hr)),_a.add(l);var c=void 0,f=nn(()=>{var d=a??e.appendChild(ra());return ct(()=>{if(s){_e({});var v=J;v.c=s}n&&(r.$$events=n),c=t(d,r)||{},s&&he()}),()=>{var g;for(var v of u){e.removeEventListener(v,qt);var h=Xe.get(v);--h===0?(document.removeEventListener(v,qt),Xe.delete(v)):Xe.set(v,h)}_a.delete(l),d!==a&&((g=d.parentNode)==null||g.removeChild(d))}});return In.set(c,f),c}let In=new WeakMap;function Y(t,e,[a,r]=[0,0]){var n=t,s=null,o=null,u=le,l=a>0?ba:0,c=!1;const f=(v,h=!0)=>{c=!0,d(h,v)},d=(v,h)=>{u!==(u=v)&&(u?(s?Ht(s):h&&(s=ct(()=>h(n))),o&&zt(o,()=>{o=null})):(o?Ht(o):h&&(o=ct(()=>h(n,[a+1,r]))),s&&zt(s,()=>{s=null})))};Da(()=>{c=!1,e(f),c||d(null,null)},l)}function qe(t,e){return e}function Cn(t,e,a,r){for(var n=[],s=e.length,o=0;o<s;o++)Ta(e[o].e,n,!0);var u=s>0&&n.length===0&&a!==null;if(u){var l=a.parentNode;en(l),l.append(a),r.clear(),Ue(t,e[0].prev,e[s-1].next)}or(n,()=>{for(var c=0;c<s;c++){var f=e[c];u||(r.delete(f.k),Ue(t,f.prev,f.next)),Je(f.e,!u)}})}function se(t,e,a,r,n,s=null){var o=t,u={flags:e,items:new Map,first:null},l=(e&Ka)!==0;if(l){var c=t;o=c.appendChild(ra())}var f=null,d=!1,v=Le(()=>{var h=a();return ta(h)?h:h==null?[]:ha(h)});Da(()=>{var h=i(v),g=h.length;d&&g===0||(d=g===0,On(h,u,o,n,e,r,a),s!==null&&(g===0?f?Ht(f):f=ct(()=>s(o)):f!==null&&zt(f,()=>{f=null})),i(v))})}function On(t,e,a,r,n,s,o){var xe,Ee,Ie,Ne;var u=(n&qr)!==0,l=(n&(Sa|xa))!==0,c=t.length,f=e.items,d=e.first,v=d,h,g=null,x,w=[],k=[],P,$,D,O;if(u)for(O=0;O<c;O+=1)P=t[O],$=s(P,O),D=f.get($),D!==void 0&&((xe=D.a)==null||xe.measure(),(x??(x=new Set)).add(D));for(O=0;O<c;O+=1){if(P=t[O],$=s(P,O),D=f.get($),D===void 0){var te=v?v.e.nodes_start:a;g=An(te,e,g,g===null?e.first:g.next,P,$,O,r,n,o),f.set($,g),w=[],k=[],v=g.next;continue}if(l&&Pn(D,P,O,n),(D.e.f&Me)!==0&&(Ht(D.e),u&&((Ee=D.a)==null||Ee.unfix(),(x??(x=new Set)).delete(D))),D!==v){if(h!==void 0&&h.has(D)){if(w.length<k.length){var j=k[0],Z;g=j.prev;var Te=w[0],Se=w[w.length-1];for(Z=0;Z<w.length;Z+=1)Wa(w[Z],j,a);for(Z=0;Z<k.length;Z+=1)h.delete(k[Z]);Ue(e,Te.prev,Se.next),Ue(e,g,Te),Ue(e,Se,j),v=j,g=Se,O-=1,w=[],k=[]}else h.delete(D),Wa(D,v,a),Ue(e,D.prev,D.next),Ue(e,D,g===null?e.first:g.next),Ue(e,g,D),g=D;continue}for(w=[],k=[];v!==null&&v.k!==$;)(v.e.f&Me)===0&&(h??(h=new Set)).add(v),k.push(v),v=v.next;if(v===null)continue;D=v}w.push(D),g=D,v=D.next}if(v!==null||h!==void 0){for(var ue=h===void 0?[]:ha(h);v!==null;)(v.e.f&Me)===0&&ue.push(v),v=v.next;var me=ue.length;if(me>0){var Fe=(n&Ka)!==0&&c===0?a:null;if(u){for(O=0;O<me;O+=1)(Ie=ue[O].a)==null||Ie.measure();for(O=0;O<me;O+=1)(Ne=ue[O].a)==null||Ne.fix()}Cn(e,ue,Fe,f)}}u&&un(()=>{var Ce;if(x!==void 0)for(D of x)(Ce=D.a)==null||Ce.apply()}),R.first=e.first&&e.first.e,R.last=g&&g.e}function Pn(t,e,a,r){(r&Sa)!==0&&ut(t.v,e),(r&xa)!==0?ut(t.i,a):t.i=a}function An(t,e,a,r,n,s,o,u,l,c){var f=(l&Sa)!==0,d=(l&Br)===0,v=f?d?Gr(n,!1,!1):ot(n):n,h=(l&xa)===0?o:ot(o),g={i:h,v,k:s,a:null,e:null,prev:a,next:r};try{return g.e=ct(()=>u(t,v,h,c),Xr),g.e.prev=a&&a.e,g.e.next=r&&r.e,a===null?e.first=g:(a.next=g,a.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function Wa(t,e,a){for(var r=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,s=t.e.nodes_start;s!==r;){var o=na(s);n.before(s),s=o}}function Ue(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function mr(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(a=mr(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function $n(){for(var t,e,a=0,r="",n=arguments.length;a<n;a++)(t=arguments[a])&&(e=mr(t))&&(r&&(r+=" "),r+=e);return r}function Nn(t){return typeof t=="object"?$n(t):t??""}const Ra=[...` 	
\r\fÂ \v\uFEFF`];function Ln(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var n in a)if(a[n])r=r?r+" "+n:n;else if(r.length)for(var s=n.length,o=0;(o=r.indexOf(n,o))>=0;){var u=o+s;(o===0||Ra.includes(r[o-1]))&&(u===r.length||Ra.includes(r[u]))?r=(o===0?"":r.substring(0,o))+r.substring(u+1):o=u}}return r===""?null:r}function Mn(t,e){return t==null?null:String(t)}function Q(t,e,a,r,n,s){var o=t.__className;if(o!==a||o===void 0){var u=Ln(a,r,s);u==null?t.removeAttribute("class"):t.className=u,t.__className=a}else if(s&&n!==s)for(var l in s){var c=!!s[l];(n==null||c!==!!n[l])&&t.classList.toggle(l,c)}return s}function ea(t,e,a,r){var n=t.__style;if(n!==e){var s=Mn(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}function gr(t,e,a){if(t.multiple){if(e==null)return;if(!ta(e))return Qr();for(var r of t.options)r.selected=e.includes(it(r));return}for(r of t.options){var n=it(r);if(Vr(n,e)){r.selected=!0;return}}(!a||e!==void 0)&&(t.selectedIndex=-1)}function Wn(t,e){sa(()=>{var a=new MutationObserver(()=>{var r=t.__value;gr(t,r)});return a.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function Fa(t,e,a=e){var r=!0;_r(t,"change",n=>{var s=n?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(s),it);else{var u=t.querySelector(s)??t.querySelector("option:not([disabled])");o=u&&it(u)}a(o)}),sa(()=>{var n=e();if(gr(t,n,r),r&&n===void 0){var s=t.querySelector(":checked");s!==null&&(n=it(s),a(n))}t.__value=n,r=!1}),Wn(t)}function it(t){return"__value"in t?t.__value:t.value}const Rn=Symbol("is custom element"),Fn=Symbol("is html");function yr(t,e){var a=wr(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Be(t,e,a,r){var n=wr(t);n[e]!==(n[e]=a)&&(e==="loading"&&(t[Pr]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Un(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function wr(t){return t.__attributes??(t.__attributes={[Rn]:t.nodeName.includes("-"),[Fn]:t.namespaceURI===zr})}var Ua=new Map;function Un(t){var e=Ua.get(t.nodeName);if(e)return e;Ua.set(t.nodeName,e=[]);for(var a,r=t,n=Element.prototype;n!==r;){a=Ba(r);for(var s in a)a[s].set&&e.push(s);r=ma(r)}return e}function oe(t,e,a=e){var r=Ut();_r(t,"input",n=>{var s=n?t.defaultValue:t.value;if(s=oa(t)?ua(s):s,a(s),r&&s!==(s=e())){var o=t.selectionStart,u=t.selectionEnd;t.value=s??"",u!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(u,t.value.length))}}),y(e)==null&&t.value&&a(oa(t)?ua(t.value):t.value),nr(()=>{var n=e();oa(t)&&n===ua(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function oa(t){var e=t.type;return e==="number"||e==="range"}function ua(t){return t===""?null:+t}function De(t=!1){const e=J,a=e.l.u;if(!a)return;let r=()=>A(e.s);if(t){let n=0,s={};const o=ka(()=>{let u=!1;const l=e.s;for(const c in l)l[c]!==s[c]&&(s[c]=l[c],u=!0);return u&&n++,n});r=()=>i(o)}a.b.length&&rn(()=>{ja(e,r),ca(a.b)}),da(()=>{const n=y(()=>a.m.map(Ir));return()=>{for(const s of n)typeof s=="function"&&s()}}),a.a.length&&da(()=>{ja(e,r),ca(a.a)})}function ja(t,e){if(t.l.s)for(const a of t.l.s)i(a);e()}function jn(t){J===null&&Hr(),Ft&&J.l!==null?qn(J).m.push(t):da(()=>{const e=y(t);if(typeof e=="function")return e})}function qn(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Bn="5";var qa;typeof window<"u"&&((qa=window.__svelte??(window.__svelte={})).v??(qa.v=new Set)).add(Bn);jr();const Jn=window.PocketBase;let Yn=0;const nt=()=>`id_${Date.now()}_${Yn++}`;var ft,dt,vt,pt,_t,ht,mt,gt,yt,wt,bt,St,xt,kt,Dt,Tt,Et,It,Ct,Ot,Pt,At,$t,Nt,Lt,Mt,Wt,Rt;class zn{constructor(){rt(this,"pb",new Jn(window.location.origin));W(this,ft,E(!0));rt(this,"lastSavedState",null);W(this,dt,E(""));W(this,vt,E(""));W(this,pt,E("London"));W(this,_t,E("saved"));rt(this,"saveTimeout",null);W(this,ht,E(!1));W(this,mt,E(""));rt(this,"notificationTimeout",null);W(this,gt,E(V(navigator.onLine)));W(this,yt,E(V([])));W(this,wt,E(!1));W(this,bt,E(!1));W(this,St,E(""));W(this,xt,E(""));W(this,kt,E(V(new Date().getDay())));W(this,Dt,E("Weekly Planner"));W(this,Tt,E(V([])));W(this,Et,E(V([])));W(this,It,E(V([])));W(this,Ct,E(V([])));W(this,Ot,E(V([])));W(this,Pt,E(V([])));W(this,At,E(V([])));W(this,$t,E(V([])));W(this,Nt,E(null));W(this,Lt,E(null));W(this,Mt,E(V([])));W(this,Wt,E(V([{name:"London",lat:51.5074,lon:-.1278},{name:"Cairo",lat:30.0444,lon:31.2357},{name:"Cape Town",lat:-33.9249,lon:18.4241},{name:"Amsterdam",lat:52.3676,lon:4.9041},{name:"Current Location",lat:null,lon:null}])));W(this,Rt,E(!1));this.pb.autoCancellation(!1),this.setupEventListeners()}get isInitializing(){return i(S(this,ft))}set isInitializing(e){b(S(this,ft),e,!0)}get currentWeek(){return i(S(this,dt))}set currentWeek(e){b(S(this,dt),e,!0)}get dateRange(){return i(S(this,vt))}set dateRange(e){b(S(this,vt),e,!0)}get city(){return i(S(this,pt))}set city(e){b(S(this,pt),e,!0)}get saveStatus(){return i(S(this,_t))}set saveStatus(e){b(S(this,_t),e,!0)}get showNotification(){return i(S(this,ht))}set showNotification(e){b(S(this,ht),e,!0)}get notificationMessage(){return i(S(this,mt))}set notificationMessage(e){b(S(this,mt),e,!0)}get isOnline(){return i(S(this,gt))}set isOnline(e){b(S(this,gt),e,!0)}get pendingSync(){return i(S(this,yt))}set pendingSync(e){b(S(this,yt),e,!0)}get showCitySelector(){return i(S(this,wt))}set showCitySelector(e){b(S(this,wt),e,!0)}get showWeekSelector(){return i(S(this,bt))}set showWeekSelector(e){b(S(this,bt),e,!0)}get cityDropdownStyle(){return i(S(this,St))}set cityDropdownStyle(e){b(S(this,St),e,!0)}get weekDropdownStyle(){return i(S(this,xt))}set weekDropdownStyle(e){b(S(this,xt),e,!0)}get currentDay(){return i(S(this,kt))}set currentDay(e){b(S(this,kt),e,!0)}get plannerTitle(){return i(S(this,Dt))}set plannerTitle(e){b(S(this,Dt),e,!0)}get times(){return i(S(this,Tt))}set times(e){b(S(this,Tt),e,!0)}get schedule(){return i(S(this,Et))}set schedule(e){b(S(this,Et),e,!0)}get tasks(){return i(S(this,It))}set tasks(e){b(S(this,It),e,!0)}get workoutPlan(){return i(S(this,Ct))}set workoutPlan(e){b(S(this,Ct),e,!0)}get meals(){return i(S(this,Ot))}set meals(e){b(S(this,Ot),e,!0)}get groceryList(){return i(S(this,Pt))}set groceryList(e){b(S(this,Pt),e,!0)}get bodyMeasurements(){return i(S(this,At))}set bodyMeasurements(e){b(S(this,At),e,!0)}get financials(){return i(S(this,$t))}set financials(e){b(S(this,$t),e,!0)}get currentTemplate(){return i(S(this,Nt))}set currentTemplate(e){b(S(this,Nt),e,!0)}get currentTemplateId(){return i(S(this,Lt))}set currentTemplateId(e){b(S(this,Lt),e,!0)}get savedWeeks(){return i(S(this,Mt))}set savedWeeks(e){b(S(this,Mt),e,!0)}get cityOptions(){return i(S(this,Wt))}set cityOptions(e){b(S(this,Wt),e,!0)}get showSetupModal(){return i(S(this,Rt))}set showSetupModal(e){b(S(this,Rt),e,!0)}setupEventListeners(){window.addEventListener("online",()=>{this.isOnline=!0,this.syncPendingData()}),window.addEventListener("offline",()=>this.isOnline=!1),document.addEventListener("click",e=>{e.target.closest(".dropdown-portal,.clickable")||(this.showCitySelector=this.showWeekSelector=!1)})}async init(){if(!await this.checkDatabaseInitialized()){this.showSetupNotification(),this.isInitializing=!1;return}this.pendingSync=JSON.parse(localStorage.getItem("planner_pending_sync")||"[]"),this.currentWeek=this.getCurrentIsoWeek(),this.dateRange=this.getWeekDateRange(this.parseISOWeek(this.currentWeek)),await this.loadWeek(this.currentWeek,!0),setInterval(()=>{!this.isInitializing&&this.hasSignificantChanges()&&this.saveData()},3e4),this.isOnline&&this.syncPendingData()}async checkDatabaseInitialized(){try{const e=await this.pb.collection("templates").getFirstListItem("is_default=true");return!0}catch{return!1}}showSetupNotification(){const e=document.createElement("div");e.className="setup-notification",e.innerHTML=`
      <span>Database not initialized</span>
      <button class="setup-notification-button">Setup</button>
    `,document.body.appendChild(e);const a=e.querySelector(".setup-notification-button");a&&a.addEventListener("click",()=>{this.showSetupModal=!0})}async fetchTemplate(e="default"){const a=`template_${e}`;try{const r=localStorage.getItem(a);if(r)return JSON.parse(r)}catch{localStorage.removeItem(a)}if(!this.isOnline)return this.showMessage("Offline: Using fallback template"),this.getFallbackTemplate();try{const r=e==="default"?"is_default=true":`name="${e}"`,n=await this.pb.collection("templates").getFirstListItem(r);return localStorage.setItem(a,JSON.stringify(n)),n}catch{return this.showMessage("Template error: Using fallback"),this.getFallbackTemplate()}}getFallbackTemplate(){return{id:"fallback",name:"fallback",structure:{prayer_times:[{label:"Q",value:""},{label:"F",value:""},{label:"D",value:""},{label:"A",value:""},{label:"M",value:""},{label:"I",value:""}],schedule:[{name:"TOTAL",activities:[{name:"DAILY POINTS",max_per_day:0,max_score:0}]}],tasks:{count:5,fields:["num","priority","tag","description","start_date","expected_date","actual_date","completed"]},workout:[],meals:[],grocery:{categories:[]},measurements:[],financials:[],city_default:"London"}}}applyTemplateStructure(e){var r,n;this.currentTemplate=e,this.currentTemplateId=e.id;const a=e.structure;this.plannerTitle=a.title_default||"Weekly Planner",this.times=[...a.prayer_times||[]],this.schedule=this.buildScheduleFromTemplate(a.schedule||[]),this.tasks=Array(((r=a.tasks)==null?void 0:r.count)||15).fill().map(()=>({id:nt(),priority:"",tag:"",description:"",startDate:"",expectedDate:"",actualDate:"",completed:""})),this.workoutPlan=this.buildWorkoutFromTemplate(a.workout||[]),this.meals=this.ensureIds([...a.meals||[]]),this.groceryList=this.ensureIds([...((n=a.grocery)==null?void 0:n.categories)||[]]),this.bodyMeasurements=this.ensureIds([...a.measurements||[]]),this.financials=this.ensureIds([...a.financials||[]]),this.city=a.city_default||"London"}buildScheduleFromTemplate(e){return e.map(a=>({id:nt(),name:a.name,activities:(a.activities||[]).map(r=>({id:nt(),name:r.name,days:this.createDaysStructure(r.days,r.max_per_day||1),score:0,maxScore:r.max_score||0,streaks:{current:0,longest:0}}))}))}createDaysStructure(e,a){const r=["mon","tue","wed","thu","fri","sat","sun"],n={};return(e&&Array.isArray(e)?e:r).forEach(o=>{n[o]={value:"",max:a}}),n}buildWorkoutFromTemplate(e){return e.map(a=>({id:nt(),name:a.name,exercises:this.ensureIds((a.exercises||[]).map(r=>{var n,s,o;return{prefix:"â€¢ ",name:r.name,weight:"",sets:"",reps:"",defaultWeight:((n=r.default_weight)==null?void 0:n.toString())||"",defaultSets:((s=r.default_sets)==null?void 0:s.toString())||"",defaultReps:((o=r.default_reps)==null?void 0:o.toString())||""}}))}))}ensureIds(e){return e.map(a=>({...a,id:a.id||nt()}))}async loadWeek(e,a=!1){if(!/^\\d{4}-W(0[1-9]|[1-4]\\d|5[0-3])$/.test(e)){this.showMessage("Invalid week format");return}this.showWeekSelector=!1,this.currentWeek=e,this.dateRange=this.getWeekDateRange(this.parseISOWeek(e));let r=await this.fetchPlannerRecord(e),n;r!=null&&r.template_id?n=await this.fetchTemplateById(r.template_id):n=await this.fetchTemplate("default"),this.applyTemplateStructure(n),r&&this.overlayUserData(r),this.calculateScores(),a&&!this.times.some(s=>s.value)&&await this.getPrayerTimes(),this.lastSavedState=JSON.stringify(this.getCurrentUserData()),a&&(this.isInitializing=!1)}async fetchPlannerRecord(e){if(this.isOnline)try{return await this.pb.collection("planners").getFirstListItem(`week_id="${e}"`)}catch{}const a=localStorage.getItem(`planner_${e}`);if(a)try{return JSON.parse(a)}catch{}return null}async fetchTemplateById(e){try{return await this.pb.collection("templates").getOne(e)}catch{return await this.fetchTemplate("default")}}overlayUserData(e){var a;e.title&&(this.plannerTitle=e.title),e.city&&(this.city=e.city),e.prayer_times&&this.overlayArray(this.times,e.prayer_times),e.schedule_data&&this.overlayComplexData(this.schedule,e.schedule_data,"name",this.overlayScheduleActivity),e.tasks_data&&this.overlayArray(this.tasks,e.tasks_data),e.workout_data&&this.overlayComplexData(this.workoutPlan,e.workout_data,"name",this.overlayWorkoutExercise),e.meals_data&&this.overlayArray(this.meals,e.meals_data),(a=e.grocery_data)!=null&&a.categories&&this.overlayArray(this.groceryList,e.grocery_data.categories),e.measurements_data&&this.overlayArray(this.bodyMeasurements,e.measurements_data),e.financials_data&&this.overlayArray(this.financials,e.financials_data)}overlayArray(e,a){a.forEach((r,n)=>{e[n]&&Object.assign(e[n],r)})}overlayComplexData(e,a,r,n){a.forEach(s=>{const o=e.find(u=>u[r]===s[r]);o&&n.call(this,o,s)})}overlayScheduleActivity(e,a){var r;(r=a.activities)==null||r.forEach(n=>{const s=e.activities.find(o=>o.name===n.name);s&&(n.days&&Object.keys(s.days).forEach(o=>{n.days[o]&&(s.days[o].value=n.days[o].value||"")}),s.score=n.score||0,s.streaks=n.streaks||{current:0,longest:0})})}overlayWorkoutExercise(e,a){var r;(r=a.exercises)==null||r.forEach(n=>{const s=e.exercises.find(o=>o.name===n.name);s&&(s.weight=n.weight||"",s.sets=n.sets||"",s.reps=n.reps||"")})}getCurrentUserData(){var e,a,r,n;return{week_id:this.currentWeek,template_id:this.currentTemplateId,title:this.plannerTitle!==((a=(e=this.currentTemplate)==null?void 0:e.structure)==null?void 0:a.title_default)?this.plannerTitle:null,city:this.city!==((n=(r=this.currentTemplate)==null?void 0:r.structure)==null?void 0:n.city_default)?this.city:null,date_range:this.dateRange,prayer_times:this.times.some(s=>s.value)?this.times:null,schedule_data:this.extractScheduleData(),tasks_data:this.extractUserTasks(),workout_data:this.extractWorkoutData(),meals_data:this.extractUserItems(this.meals,["name","ingredients"]),grocery_data:this.extractGroceryData(),measurements_data:this.extractUserItems(this.bodyMeasurements,["value"]),financials_data:this.extractUserItems(this.financials,["value"])}}extractScheduleData(){return this.extractComplexData(this.schedule,e=>({name:e.name,activities:e.activities.map(a=>({name:a.name,days:Object.keys(a.days).reduce((r,n)=>(a.days[n].value&&(r[n]={value:a.days[n].value}),r),{}),score:a.score,streaks:a.streaks})).filter(a=>Object.keys(a.days).length>0||a.score>0)}),e=>e.activities.length>0)}extractUserTasks(){return this.tasks.filter(e=>e.priority||e.tag||e.description||e.startDate||e.expectedDate||e.actualDate||e.completed)}extractWorkoutData(){return this.extractComplexData(this.workoutPlan,e=>({name:e.name,exercises:e.exercises.filter(a=>a.weight||a.sets||a.reps).map(a=>({name:a.name,weight:a.weight,sets:a.sets,reps:a.reps}))}),e=>e.exercises.length>0)}extractComplexData(e,a,r=()=>!0){return e.map(a).filter(r)}extractUserItems(e,a){return e.filter(r=>a.some(n=>r[n]))}extractGroceryData(){const e=this.extractUserItems(this.groceryList,["name","items"]);return e.length>0?{categories:e}:null}getTaskDelay(e){if(!e.expectedDate||!e.actualDate)return 0;const a=new Date(e.expectedDate),r=new Date(e.actualDate);return Math.ceil((r-a)/(1e3*60*60*24))}calculateTaskDelay(e){return e._delay=this.getTaskDelay(e),e._delay}formatDelay(e){return e===0?"0d":e>0?`+${e}d`:`${e}d`}toggleTaskCompletion(e){e.completed=e.completed==="âœ“"?"â˜":"âœ“",e.completed==="âœ“"&&!e.actualDate&&(e.actualDate=new Date().toISOString().split("T")[0],this.calculateTaskDelay(e)),this.saveData()}toggleSelector(e,a){const r=a==="city"?"showCitySelector":"showWeekSelector",n=a==="city"?"showWeekSelector":"showCitySelector";if(this[n]=!1,this[r])this[r]=!1;else{const s=e.target.getBoundingClientRect();this[`${a}DropdownStyle`]=`position:fixed;top:${s.bottom+4}px;left:${Math.max(10,s.left-100)}px;z-index:9999;min-width:150px;max-width:250px;`,this[r]=!0,a==="week"&&this.fetchSavedWeeks()}}async selectCity(e){this.city=e.name,this.showCitySelector=!1;try{e.lat===null?await this.getPrayerTimes():await this.fetchPrayerTimes(e.lat,e.lon),this.saveData()}catch{this.showMessage("Failed to load prayer times")}}async getPrayerTimes(){var e,a,r;try{const n=await new Promise((u,l)=>navigator.geolocation.getCurrentPosition(u,l,{timeout:5e3,maximumAge:6e4})),{latitude:s,longitude:o}=n.coords;try{const l=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${s}&lon=${o}&zoom=10&accept-language=en`)).json();this.city=((e=l.address)==null?void 0:e.city)||((a=l.address)==null?void 0:a.town)||((r=l.address)==null?void 0:r.village)||"Current Location"}catch{this.city="Current Location"}await this.fetchPrayerTimes(s,o)}catch{this.showMessage("Location access failed. Using London"),this.city="London",await this.fetchPrayerTimes(51.5074,-.1278)}}async fetchPrayerTimes(e,a){var u,l;const r=new Date,s=`prayer_times_${`${r.getFullYear()}_${r.getMonth()+1}_${r.getDate()}`}_${e.toFixed(2)}_${a.toFixed(2)}`,o=localStorage.getItem(s);if(o)try{this.setPrayerTimes(JSON.parse(o));return}catch{localStorage.removeItem(s)}try{const c=await fetch(`https://api.aladhan.com/v1/calendar/${r.getFullYear()}/${r.getMonth()+1}?latitude=${e}&longitude=${a}&method=2`);if(!c.ok)throw new Error(`API error: ${c.status}`);const f=await c.json();if(f.code===200&&((l=(u=f.data)==null?void 0:u[r.getDate()-1])!=null&&l.timings))localStorage.setItem(s,JSON.stringify(f.data[r.getDate()-1].timings)),this.setPrayerTimes(f.data[r.getDate()-1].timings);else throw new Error("Invalid prayer time data")}catch{this.showMessage("Prayer times fetch failed"),this.setPrayerTimes({Fajr:"05:30",Dhuhr:"12:30",Asr:"15:45",Maghrib:"18:30",Isha:"20:00"})}}setPrayerTimes(e){const a={Q:this.calculateQiyamTime(e.Fajr),F:e.Fajr,D:e.Dhuhr,A:e.Asr,M:e.Maghrib,I:e.Isha};this.times.reduce((n,s)=>{const o=this.formatTime(a[s.label]);return s.value!==o?(s.value=o,!0):n},!1)&&!this.isInitializing&&this.saveData()}formatTime(e){if(!e)return"";const[a,r]=e.split(" ")[0].split(":"),n=parseInt(a),s=parseInt(r);return isNaN(n)||isNaN(s)?"":`${n%12||12}:${s.toString().padStart(2,"0")}${n>=12?"PM":"AM"}`}calculateQiyamTime(e){if(!e)return"";const[a,r]=e.split(" ")[0].split(":");let n=parseInt(a),s=parseInt(r);return isNaN(n)||isNaN(s)?"":(n=n-1,n<0&&(n=23),`${n}:${s.toString().padStart(2,"0")}`)}calculateScores(){var n;const e={mon:0,tue:0,wed:0,thu:0,fri:0,sat:0,sun:0},a=Object.keys(e);this.schedule.forEach(s=>{s.name!=="TOTAL"&&s.activities.forEach(o=>{let u=0;Object.entries(o.days||{}).forEach(([f,d])=>{if(!d)return;const v=parseInt(d.value)||0;v>0&&(d.max||0)>0&&(e[f]+=v,u+=v),d.value=v===0?"":v.toString()}),o.score=u,o.streaks=o.streaks||{current:0,longest:0};const l=this.currentDay===0?6:this.currentDay-1;let c=0;for(let f=0;f<7;f++){const d=(l-f+7)%7,v=a[d];if(o.days[v]&&parseInt(o.days[v].value)>0&&(o.days[v].max||0)>0)c++;else break}o.streaks.current=c,o.streaks.longest=Math.max(o.streaks.longest||0,c)})});const r=this.schedule.find(s=>s.name==="TOTAL");if((n=r==null?void 0:r.activities)!=null&&n[0]){const s=r.activities[0];let o=0,u=0;Object.entries(e).forEach(([l,c])=>{var f;(f=s.days)!=null&&f[l]&&(s.days[l].value=c.toString()),o+=c}),this.schedule.forEach(l=>{l.name!=="TOTAL"&&l.activities.forEach(c=>u+=c.maxScore||0)}),s.score=o,s.maxScore=u}}validateAndSave(e){const a=e.target,r=parseFloat(a.min),n=parseFloat(a.max);let s=parseFloat(a.value);isNaN(s)&&(s=0),!isNaN(r)&&s<r&&(s=r),!isNaN(n)&&s>n&&(s=n),a.value=s===0?"":s.toString(),this.calculateScores(),this.saveData()}saveData(){this.isInitializing||(clearTimeout(this.saveTimeout),this.saveStatus="saving",this.saveTimeout=setTimeout(async()=>{try{this.calculateScores();const e=this.getCurrentUserData();localStorage.setItem(`planner_${this.currentWeek}`,JSON.stringify(e)),this.isOnline?(await this.saveToPocketbase(this.currentWeek,e),this.pendingSync=this.pendingSync.filter(a=>!(a.weekId===this.currentWeek&&a.operation!=="delete"))):this.addToPendingSync(this.currentWeek,e),localStorage.setItem("planner_pending_sync",JSON.stringify(this.pendingSync)),this.lastSavedState=JSON.stringify(e),this.saveStatus="saved"}catch(e){this.saveStatus="error",this.showMessage("Save error: "+e.message),setTimeout(()=>this.saveStatus="saved",3e3)}},500))}hasSignificantChanges(){if(!this.lastSavedState)return!0;const e=this.getCurrentUserData();return JSON.stringify(e)!==this.lastSavedState}addToPendingSync(e,a,r="save"){this.pendingSync=this.pendingSync.filter(n=>!(n.weekId===e&&n.operation===r)),this.pendingSync.push({weekId:e,data:a?JSON.parse(JSON.stringify(a)):null,operation:r,timestamp:new Date().toISOString()}),localStorage.setItem("planner_pending_sync",JSON.stringify(this.pendingSync))}async syncPendingData(){if(!this.isOnline||this.pendingSync.length===0)return;const e=[...this.pendingSync];this.pendingSync=[];for(const a of e)try{a.operation==="delete"?await this.deleteFromPocketbase(a.weekId):await this.saveToPocketbase(a.weekId,a.data);const r=JSON.parse(localStorage.getItem("planner_pending_sync")||"[]");localStorage.setItem("planner_pending_sync",JSON.stringify(r.filter(n=>n.timestamp!==a.timestamp)))}catch{this.pendingSync.push(a)}this.pendingSync.length>0&&localStorage.setItem("planner_pending_sync",JSON.stringify(this.pendingSync))}async saveToPocketbase(e,a){try{const r=await this.pb.collection("planners").getFirstListItem(`week_id="${e}"`);await this.pb.collection("planners").update(r.id,a)}catch(r){if(r.status===404)await this.pb.collection("planners").create(a);else throw r}}async deleteFromPocketbase(e){try{const a=await this.pb.collection("planners").getFirstListItem(`week_id="${e}"`);await this.pb.collection("planners").delete(a.id)}catch(a){if(a.status!==404)throw a}}async fetchSavedWeeks(){const e=new Map,a=this.getCurrentIsoWeek(),r=(n,s,o,u)=>{const l=e.get(n),c=s||this.getWeekDateRange(this.parseISOWeek(n));!l||o==="pocketbase"&&l.source!=="pocketbase"||o==="local"&&l.source==="current"?e.set(n,{iso_week:n,dateRange:c,source:o,isCurrent:u}):l&&!l.dateRange&&c&&(l.dateRange=c)};if(r(a,this.getWeekDateRange(this.parseISOWeek(a)),"current",!0),this.isOnline)try{(await this.pb.collection("planners").getFullList({sort:"-week_id",fields:"week_id,date_range"})).forEach(s=>r(s.week_id,s.date_range,"pocketbase",s.week_id===a))}catch{}for(let n=0;n<localStorage.length;n++){const s=localStorage.key(n);if(s.startsWith("planner_")&&!s.includes("pending_sync")&&!s.startsWith("planner_template_")){const o=s.replace("planner_","");try{const u=JSON.parse(localStorage.getItem(s));r(o,u.date_range,"local",o===a)}catch{}}}this.savedWeeks=Array.from(e.values()).sort((n,s)=>n.isCurrent&&!s.isCurrent?-1:!n.isCurrent&&s.isCurrent?1:s.iso_week.localeCompare(n.iso_week))}confirmLoadWeek(e){this.hasSignificantChanges()&&e!==this.currentWeek&&!confirm("Unsaved changes. Load anyway?")||(this.showWeekSelector=!1,this.loadWeek(e))}confirmDeleteWeek(e){confirm(`Delete schedule for ${e}?`)&&this.deleteWeek(e)}async deleteWeek(e){if(localStorage.removeItem(`planner_${e}`),this.isOnline)try{await this.deleteFromPocketbase(e)}catch{this.addToPendingSync(e,null,"delete")}else this.addToPendingSync(e,null,"delete");this.savedWeeks=this.savedWeeks.filter(a=>a.iso_week!==e),this.currentWeek===e&&(this.currentWeek=this.getCurrentIsoWeek(),await this.loadWeek(this.currentWeek))}getCurrentIsoWeek(){const e=new Date,a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));a.setUTCDate(a.getUTCDate()+4-(a.getUTCDay()||7));const r=new Date(Date.UTC(a.getUTCFullYear(),0,1)),n=Math.ceil(((a-r)/864e5+1)/7);return`${a.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`}parseISOWeek(e){if(!/^\\d{4}-W(0[1-9]|[1-4]\\d|5[0-3])$/.test(e))return new Date;const[a,r]=e.split("-"),n=parseInt(r.substring(1)),s=new Date(Date.UTC(parseInt(a),0,1+(n-1)*7));return s.setUTCDate(s.getUTCDate()-(s.getUTCDay()||7)+1),s}getWeekDateRange(e){const a=new Date(e),r=new Date(a);return r.setUTCDate(a.getUTCDate()+6),`${this.formatDate(a)}-${this.formatDate(r)}`}formatDate(e){return`${(e.getUTCMonth()+1).toString().padStart(2,"0")}/${e.getUTCDate().toString().padStart(2,"0")}`}showMessage(e){this.notificationMessage=e,this.showNotification=!0,clearTimeout(this.notificationTimeout),this.notificationTimeout=setTimeout(()=>this.showNotification=!1,5e3)}}ft=new WeakMap,dt=new WeakMap,vt=new WeakMap,pt=new WeakMap,_t=new WeakMap,ht=new WeakMap,mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,wt=new WeakMap,bt=new WeakMap,St=new WeakMap,xt=new WeakMap,kt=new WeakMap,Dt=new WeakMap,Tt=new WeakMap,Et=new WeakMap,It=new WeakMap,Ct=new WeakMap,Ot=new WeakMap,Pt=new WeakMap,At=new WeakMap,$t=new WeakMap,Nt=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,Wt=new WeakMap,Rt=new WeakMap;const p=new zn;window.plannerStore=p;var Hn=()=>p.saveData(),Vn=I('<div class="flex center"><span> </span> <input type="text" class="input input--time"/></div>'),Kn=t=>p.toggleSelector(t,"city"),Gn=t=>p.toggleSelector(t,"week"),Qn=I('<div class="flex between center mb-1"><h1 class="text-sm bold"> </h1> <div class="flex center text-xs"><!> <span class="ml-1">|</span> <span class="clickable ml-1"> </span></div> <div class="text-sm"><span class="clickable"> </span> <span> </span></div></div>');function Xn(t,e){_e(e,!1),De();var a=Qn(),r=_(a),n=_(r),s=m(r,2),o=_(s);se(o,1,()=>(A(p),y(()=>p.times)),qe,(g,x,w)=>{var k=Vn(),P=_(k),$=_(P),D=m(P,2);D.__change=[Hn],M(()=>N($,`${i(x),y(()=>i(x).label)??""}:`)),oe(D,()=>i(x).value,O=>(i(x).value=O,ne(()=>p))),T(g,k)});var u=m(o,4);u.__click=[Kn];var l=_(u),c=m(s,2),f=_(c);f.__click=[Gn];var d=_(f),v=m(f,2),h=_(v);M(()=>{N(n,(A(p),y(()=>p.plannerTitle))),N(l,(A(p),y(()=>p.city))),N(d,(A(p),y(()=>p.currentWeek))),N(h,(A(p),y(()=>p.dateRange)))}),T(t,a),he()}ze(["change","click"]);var Zn=I("<th> </th> <th>MAX</th>",1),es=t=>p.validateAndSave(t),ts=I('<input type="number" class="input" min="0"/>'),as=I("<td><!></td> <td> </td>",1),rs=I("<span> </span>"),ns=I('<tr><td class="bold"> </td><td class="bold"> </td><td class="ac"><span> </span></td><!><td class="dc"><input type="number" class="input" readonly=""/></td><td class="dc"> </td><td><!></td></tr>'),ss=I('<tr><td colspan="19" class="progress"><div></div></td></tr>'),is=I("<!> <!>",1),ls=I('<table><thead><tr><th style="width:18mm">T</th><th style="width:20mm">D</th><th class="ac">ACTIVITY</th><!><th class="dc">ðŸ“Š</th><th class="dc">ðŸŽ¯</th><th class="dc">ðŸ”¥</th></tr></thead><tbody></tbody></table>');function os(t,e){_e(e,!1);const a=["M","T","W","T","F","S","S"],r=["mon","tue","wed","thu","fri","sat","sun"];De();var n=ls(),s=_(n),o=_(s),u=m(_(o),3);se(u,1,()=>a,qe,(c,f,d)=>{var v=Zn(),h=Pe(v);let g;var x=_(h),w=m(h,2);let k;M((P,$)=>{g=Q(h,1,"dc",null,g,P),N(x,i(f)),k=Q(w,1,"dc",null,k,$)},[()=>({"current-day":d===(p.currentDay||7)-1}),()=>({"current-day":d===(p.currentDay||7)-1})],Le),T(c,v)});var l=m(s);se(l,5,()=>(A(p),y(()=>[...p.schedule].reverse())),qe,(c,f)=>{var d=is(),v=Pe(d);se(v,1,()=>(i(f),y(()=>i(f).activities)),qe,(x,w,k)=>{var P=ns();let $;var D=_(P),O=_(D),te=m(D),j=_(te),Z=m(te),Te=_(Z),Se=_(Te),ue=m(Z);se(ue,1,()=>r,qe,(ae,F,ke)=>{var q=as(),C=Pe(q);let U;var B=_(C);{var ce=ee=>{var H=ts();H.__input=[es],M(()=>{Be(H,"max",(i(w),i(F),y(()=>i(w).days[i(F)].max<10?9:99))),H.readOnly=(i(f),y(()=>i(f).name==="TOTAL"))}),oe(H,()=>i(w).days[i(F)].value,fe=>(i(w).days[i(F)].value=fe,ne(()=>(i(f),p)))),T(ee,H)};Y(B,ee=>{i(w),i(F),y(()=>i(w).days&&i(w).days[i(F)])&&ee(ce)})}var G=m(C,2);let z;var ie=_(G);M((ee,H)=>{U=Q(C,1,"dc",null,U,ee),z=Q(G,1,"dc",null,z,H),N(ie,(i(w),i(F),y(()=>{var fe,K;return((K=(fe=i(w).days)==null?void 0:fe[i(F)])==null?void 0:K.max)||""})))},[()=>({"current-day":ke===(p.currentDay||7)-1}),()=>({"current-day":ke===(p.currentDay||7)-1})],Le),T(ae,q)});var me=m(ue),Fe=_(me),xe=m(me),Ee=_(xe),Ie=m(xe);let Ne;var Ce=_(Ie);{var Qe=ae=>{var F=rs(),ke=_(F);M(()=>N(ke,(i(w),y(()=>i(w).streaks.current)))),T(ae,F)};Y(Ce,ae=>{i(w),y(()=>{var F;return((F=i(w).streaks)==null?void 0:F.current)>0})&&ae(Qe)})}M((ae,F,ke,q)=>{$=Q(P,1,"",null,$,ae),N(O,(i(f),y(()=>k===0?i(f).name:""))),N(j,F),N(Se,ke),yr(Fe,(i(w),y(()=>i(w).score))),N(Ee,(i(w),y(()=>i(w).maxScore))),Ne=Q(Ie,1,"dc cell cell--color",null,Ne,q)},[()=>({total:i(f).name==="TOTAL"}),()=>(i(w),y(()=>i(w).name.includes(":")?i(w).name.split(":")[0]:"")),()=>(i(w),y(()=>i(w).name.includes(":")?i(w).name.split(":")[1].trim():i(w).name)),()=>{var ae,F;return{streak:((ae=i(w).streaks)==null?void 0:ae.current)>2,yellow:((F=i(w).streaks)==null?void 0:F.current)>2}}],Le),T(x,P)});var h=m(v,2);{var g=x=>{var w=ss();const k=Le(()=>(i(f),y(()=>i(f).activities[0]))),P=Le(()=>(A(i(k)),y(()=>i(k).maxScore>0?Math.min(100,i(k).score/i(k).maxScore*100):0))),$=Le(()=>(A(i(k)),y(()=>i(k).maxScore>0?i(k).score/i(k).maxScore<.33?"progress--low":i(k).score/i(k).maxScore<.66?"progress--medium":"progress--high":"")));var D=_(w),O=_(D);M(()=>{Q(O,1,`progress__bar ${i($)??""}`),ea(O,`width: ${i(P)??""}%`)}),T(x,w)};Y(h,x=>{i(f),y(()=>{var w;return i(f).name==="TOTAL"&&((w=i(f).activities)==null?void 0:w.length)>0&&i(f).activities[0].maxScore>0})&&x(g)})}T(c,d)}),T(t,n),he()}ze(["input"]);var us=()=>p.saveData(),cs=()=>p.saveData(),fs=()=>p.saveData(),ds=I('<tr><td class="dc"> </td><td><select class="input"><option></option><option>A</option><option>B</option><option>C</option><option>D</option></select></td><td><input type="text" class="input input--text"/></td><td><select class="input"><option></option><option>Personal</option><option>Work</option></select></td><td><input type="text" class="input input--date"/></td><td><input type="text" class="input input--date"/></td><td><span> </span></td><td><input type="text" class="input input--date"/></td><td><input type="text" placeholder="â˜" readonly=""/></td></tr>'),vs=I('<div class="section"><h3 class="title">TASKS & PROJECT MANAGEMENT</h3> <table><thead><tr><th>#</th><th>â­</th><th>Task</th><th>ðŸ·ï¸</th><th class="icon-header">Start</th><th class="icon-header">Due</th><th class="icon-header">Delay</th><th class="icon-header">Done</th><th>âœ“</th></tr></thead><tbody></tbody></table></div>');function ps(t,e){_e(e,!1);function a(u){const l=[];u.completed==="âœ“"&&l.push("green");const c=p.getTaskDelay(u);return c>0?l.push("red"):c<0&&l.push("blue"),l.join(" ")}function r(u){return u<0?"green":u>0?"red":"yellow"}De();var n=vs(),s=m(_(n),2),o=m(_(s));se(o,7,()=>(A(p),y(()=>p.tasks)),(u,l)=>u.id||l,(u,l,c)=>{var f=ds(),d=_(f),v=_(d),h=m(d),g=_(h);M(()=>{i(l),ne(()=>{})}),g.__change=[us];var x=_(g);x.value=x.__value="";var w=m(x);w.value=w.__value="A";var k=m(w);k.value=k.__value="B";var P=m(k);P.value=P.__value="C";var $=m(P);$.value=$.__value="D";var D=m(h),O=_(D);O.__change=[cs];var te=m(D),j=_(te);M(()=>{i(l),ne(()=>{})}),j.__change=[fs];var Z=_(j);Z.value=Z.__value="";var Te=m(Z);Te.value=Te.__value="P";var Se=m(Te);Se.value=Se.__value="W";var ue=m(te),me=_(ue);me.__change=()=>{p.calculateTaskDelay(i(l)),p.saveData()};var Fe=m(ue),xe=_(Fe);xe.__change=()=>{p.calculateTaskDelay(i(l)),p.saveData()};var Ee=m(Fe),Ie=_(Ee),Ne=_(Ie),Ce=m(Ee),Qe=_(Ce);Qe.__change=()=>{p.calculateTaskDelay(i(l)),p.saveData()};var ae=m(Ce),F=_(ae);let ke;F.__click=q=>{q.preventDefault(),p.toggleTaskCompletion(i(l))},M((q,C,U,B)=>{Q(f,1,q),N(v,i(c)+1),Q(Ee,1,`dc cell cell--bold ${C??""}`),N(Ne,U),ke=Q(F,1,"input",null,ke,B),yr(F,(i(l),y(()=>i(l).completed)))},[()=>Nn((i(l),y(()=>a(i(l))))),()=>(A(p),i(l),y(()=>r(p.getTaskDelay(i(l))))),()=>(A(p),i(l),y(()=>p.formatDelay(p.getTaskDelay(i(l))))),()=>({"task-done":i(l).completed==="âœ“"})],Le),Fa(g,()=>i(l).priority,q=>(i(l).priority=q,ne(()=>p))),oe(O,()=>i(l).description,q=>(i(l).description=q,ne(()=>p))),Fa(j,()=>i(l).tag,q=>(i(l).tag=q,ne(()=>p))),oe(me,()=>i(l).startDate,q=>(i(l).startDate=q,ne(()=>p))),oe(xe,()=>i(l).expectedDate,q=>(i(l).expectedDate=q,ne(()=>p))),oe(Qe,()=>i(l).actualDate,q=>(i(l).actualDate=q,ne(()=>p))),T(u,f)}),T(t,n),he()}ze(["change","click"]);var _s=()=>p.saveData(),hs=()=>p.saveData(),ms=()=>p.saveData(),gs=I('<div class="exercise"><div class="exercise-name"><span> </span> <span> </span>:</div> <div class="exercise-inputs"><input type="number" class="input"/> <span class="exercise-unit">kg,</span> <input type="number" class="input sets"/> <span class="exercise-unit">Ã—</span> <input type="number" class="input reps"/></div></div>'),ys=I('<div class="p-1 workout-day-card"><p class="bold text-center mb-1 workout-day-name"> </p> <!></div>'),ws=I('<div class="section"><h3 class="title">WORKOUT</h3> <div class="grid"></div></div>');function bs(t,e){_e(e,!1),De();var a=ws(),r=m(_(a),2);se(r,5,()=>(A(p),y(()=>p.workoutPlan)),n=>n.id,(n,s)=>{var o=ys(),u=_(o),l=_(u),c=m(u,2);se(c,1,()=>(i(s),y(()=>i(s).exercises)),f=>f.id,(f,d,v)=>{var h=gs(),g=_(h),x=_(g),w=_(x),k=m(x,2),P=_(k),$=m(g,2),D=_($);D.__input=[_s];var O=m(D,4);O.__input=[hs];var te=m(O,4);te.__input=[ms],M(()=>{Be(g,"title",`${i(d),y(()=>i(d).prefix)??""}${i(d),y(()=>i(d).name)??""}`),N(w,(i(d),y(()=>i(d).prefix))),N(P,(i(d),y(()=>i(d).name))),Be(D,"placeholder",(i(d),y(()=>i(d).defaultWeight))),Be(O,"placeholder",(i(d),y(()=>i(d).defaultSets))),Be(te,"placeholder",(i(d),y(()=>i(d).defaultReps)))}),oe(D,()=>i(d).weight,j=>(i(d).weight=j,ne(()=>(i(s),p)))),oe(O,()=>i(d).sets,j=>(i(d).sets=j,ne(()=>(i(s),p)))),oe(te,()=>i(d).reps,j=>(i(d).reps=j,ne(()=>(i(s),p)))),T(f,h)}),M(()=>N(l,(i(s),y(()=>i(s).name)))),T(n,o)}),T(t,a),he()}ze(["input"]);var Ss=I('<div class="mb-05"><span class="bold"> </span> <span> </span></div>'),xs=I('<div class="section"><h3 class="title">MEALS</h3> <div class="text-xs"></div></div>');function ks(t,e){_e(e,!1),De();var a=xs(),r=m(_(a),2);se(r,5,()=>(A(p),y(()=>p.meals)),n=>n.id,(n,s)=>{var o=Ss(),u=_(o),l=_(u),c=m(u,2),f=_(c);M(()=>{N(l,`${i(s),y(()=>i(s).name)??""}:`),N(f,(i(s),y(()=>i(s).ingredients)))}),T(n,o)}),T(t,a),he()}var Ds=I('<div class="mb-05"><span class="bold"> </span> <span> </span></div>'),Ts=I('<div class="section"><h3 class="title">GROCERY</h3> <div class="text-xs"></div></div>');function Es(t,e){_e(e,!1),De();var a=Ts(),r=m(_(a),2);se(r,5,()=>(A(p),y(()=>p.groceryList)),n=>n.id,(n,s)=>{var o=Ds(),u=_(o),l=_(u),c=m(u,2),f=_(c);M(()=>{N(l,`${i(s),y(()=>i(s).name)??""}:`),N(f,(i(s),y(()=>i(s).items)))}),T(n,o)}),T(t,a),he()}var Is=()=>p.saveData(),Cs=I('<span><span> </span> <input type="text" class="input input--inline"/> <!></span>'),Os=I('<div class="section"><h3 class="title">BODY</h3> <div class="text-xs"></div></div>');function Ps(t,e){_e(e,!1),De();var a=Os(),r=m(_(a),2);se(r,7,()=>(A(p),y(()=>p.bodyMeasurements)),n=>n.id,(n,s,o)=>{var u=Cs(),l=_(u),c=_(l),f=m(l,2);f.__change=[Is];var d=m(f,2);{var v=h=>{var g=Zt(",");T(h,g)};Y(d,h=>{A(i(o)),A(p),y(()=>i(o)<p.bodyMeasurements.length-1)&&h(v)})}M(()=>{N(c,`${i(s),y(()=>i(s).name)??""}:`),Be(f,"placeholder",(i(s),y(()=>i(s).placeholder)))}),oe(f,()=>i(s).value,h=>(i(s).value=h,ne(()=>p))),T(n,u)}),T(t,a),he()}ze(["change"]);var As=()=>p.saveData(),$s=I('<span><span> </span> Â£<input type="text" class="input input--inline"/> <span> </span> <!></span>'),Ns=I('<div class="section"><h3 class="title">FINANCIAL</h3> <div class="text-xs"></div></div>');function Ls(t,e){_e(e,!1),De();var a=Ns(),r=m(_(a),2);se(r,7,()=>(A(p),y(()=>p.financials)),n=>n.id,(n,s,o)=>{var u=$s(),l=_(u),c=_(l),f=m(l,2);f.__change=[As];var d=m(f,2),v=_(d),h=m(d,2);{var g=x=>{var w=Zt(",");T(x,w)};Y(h,x=>{A(i(o)),A(p),y(()=>i(o)<p.financials.length-1)&&x(g)})}M(()=>{N(c,`${i(s),y(()=>i(s).name)??""}:`),Be(f,"placeholder",(i(s),y(()=>i(s).placeholder))),N(v,(i(s),y(()=>i(s).account)))}),oe(f,()=>i(s).value,x=>(i(s).value=x,ne(()=>p))),T(n,u)}),T(t,a),he()}ze(["change"]);var Ms=I('<div id="sync-status"><span> </span></div>'),Ws=I('<div id="notification" class="notification notification--show"> </div>'),Rs=I('<div id="save-status"> </div> <!> <!>',1);function Fs(t,e){_e(e,!1),De();var a=Rs(),r=Pe(a),n=_(r),s=m(r,2);{var o=c=>{var f=Ms(),d=_(f),v=_(d);M(()=>{Q(f,1,`status status--sync ${A(p),y(()=>p.pendingSync.length>0?"status-pending":"status-synced")??""}`),N(v,(A(p),y(()=>p.isOnline?p.pendingSync.length>0?"Pending: "+p.pendingSync.length:"":"Offline")))}),T(c,f)};Y(s,c=>{A(p),y(()=>p.pendingSync.length>0||!p.isOnline)&&c(o)})}var u=m(s,2);{var l=c=>{var f=Ws(),d=_(f);M(()=>N(d,(A(p),y(()=>p.notificationMessage)))),T(c,f)};Y(u,c=>{A(p),y(()=>p.showNotification)&&c(l)})}M(()=>{Q(r,1,`status status--save status-${A(p),y(()=>p.saveStatus)??""}`),N(n,(A(p),y(()=>p.saveStatus==="saving"?"Saving...":p.saveStatus==="error"?"Error!":"Saved")))}),T(t,a),he()}var Us=(t,e)=>p.selectCity(i(e)),js=I('<div class="dropdown__item"> </div>'),qs=I('<div class="dropdown-portal"><div class="dropdown__content"></div></div>'),Bs=(t,e)=>p.confirmLoadWeek(i(e).iso_week),Js=(t,e)=>p.confirmDeleteWeek(i(e).iso_week),Ys=I('<div><span> </span> <span class="dropdown__delete">Ã—</span></div>'),zs=I('<div class="dropdown__item--empty">No saved schedules</div>'),Hs=I('<div class="dropdown-portal"><div class="dropdown__content"><!></div></div>'),Vs=I("<!> <!>",1);function Ks(t,e){_e(e,!1),De();var a=Vs(),r=Pe(a);{var n=u=>{var l=qs(),c=_(l);se(c,5,()=>(A(p),y(()=>p.cityOptions)),qe,(f,d)=>{var v=js();v.__click=[Us,d];var h=_(v);M(()=>N(h,(i(d),y(()=>i(d).name)))),T(f,v)}),M(()=>ea(l,(A(p),y(()=>p.cityDropdownStyle)))),T(u,l)};Y(r,u=>{A(p),y(()=>p.showCitySelector)&&u(n)})}var s=m(r,2);{var o=u=>{var l=Hs(),c=_(l),f=_(c);{var d=h=>{var g=Dn(),x=Pe(g);se(x,1,()=>(A(p),y(()=>p.savedWeeks)),qe,(w,k)=>{var P=Ys();let $;var D=_(P);D.__click=[Bs,k];var O=_(D),te=m(D,2);te.__click=[Js,k],M(j=>{$=Q(P,1,"flex between center dropdown__item",null,$,j),N(O,`${i(k),y(()=>i(k).iso_week)??""} ${i(k),y(()=>i(k).dateRange)??""}`)},[()=>({"dropdown__item--current":i(k).isCurrent})],Le),T(w,P)}),T(h,g)},v=h=>{var g=zs();T(h,g)};Y(f,h=>{A(p),y(()=>p.savedWeeks.length>0)?h(d):h(v,!1)})}M(()=>ea(l,(A(p),y(()=>p.weekDropdownStyle)))),T(u,l)};Y(s,u=>{A(p),y(()=>p.showWeekSelector)&&u(o)})}T(t,a),he()}ze(["click"]);async function Gs(t,e,a,r,n){b(e,!0),b(a,"");try{(await fetch(`${i(r)}/api/health`)).ok?(b(a,"success"),b(n,2)):b(a,"error")}catch{b(a,"error")}finally{b(e,!1)}}var Qs=(t,e)=>t.target===t.currentTarget&&e(),Xs=I('<div><span class="setup-step-num svelte-1gw615y"> </span> <span class="setup-step-name text-xs svelte-1gw615y"> </span></div>'),Zs=I('<span class="text-xs ml-1 green svelte-1gw615y">âœ“ Connected</span>'),ei=I('<span class="text-xs ml-1 red svelte-1gw615y">âœ— Connection failed</span>'),ti=I('<div class="setup-section svelte-1gw615y"><h2 class="svelte-1gw615y">Step 1: PocketBase URL</h2> <p class="text-xs mb-05 svelte-1gw615y">Enter your PocketBase server URL</p> <input type="url" class="input input--text" placeholder="http://localhost:8090"/> <div class="flex center mt-1 svelte-1gw615y"><button> </button> <!></div></div>'),ai=(t,e)=>b(e,!i(e)),ri=I('<div class="setup-section svelte-1gw615y"><h2 class="svelte-1gw615y">Step 2: Admin Credentials</h2> <p class="text-xs mb-05 svelte-1gw615y">Enter your PocketBase admin credentials</p> <div class="mb-05 svelte-1gw615y"><input type="email" class="input input--text" placeholder="admin@example.com"/></div> <div class="mb-05 svelte-1gw615y" style="position: relative;"><input class="input input--text" placeholder="Password"/> <button class="setup-pass-toggle svelte-1gw615y"> </button></div> <button> </button></div>'),ni=I('<div class="setup-section svelte-1gw615y"><h2 class="svelte-1gw615y">Step 3: Create Collections</h2> <p class="text-xs mb-05 svelte-1gw615y">Create required database collections</p> <div class="setup-collections svelte-1gw615y"><div class="text-xs mb-05 svelte-1gw615y">â€¢ templates - Store planner templates</div> <div class="text-xs mb-05 svelte-1gw615y">â€¢ planners - Store weekly planner data</div></div> <button> </button></div>'),si=I('<div class="progress mb-05 svelte-1gw615y"><div class="progress__bar progress--high"></div></div> <p class="text-xs"> </p>',1),ii=I('<div class="text-xs mb-05 svelte-1gw615y"><!> Default template</div> <button>Seed Database</button>',1),li=I('<div class="setup-section svelte-1gw615y"><h2 class="svelte-1gw615y">Step 4: Seed Database</h2> <p class="text-xs mb-05 svelte-1gw615y">Initialize database with default template</p> <!></div>'),oi=I('<div class="setup-section svelte-1gw615y"><h2 class="svelte-1gw615y">âœ“ Setup Complete!</h2> <p class="text-xs mb-05 svelte-1gw615y">Your A4 Planner database is ready to use.</p> <button class="svelte-1gw615y">Start Using Planner</button></div>'),ui=I('<div class="setup-modal-overlay svelte-1gw615y"><div class="setup-modal-content svelte-1gw615y"><div class="setup-container svelte-1gw615y"><div class="flex between center mb-1 svelte-1gw615y"><h1 class="text-sm bold">A4 Planner - Database Setup</h1> <button class="clickable svelte-1gw615y">Ã—</button></div> <div class="setup-steps svelte-1gw615y"><div class="flex center mb-1 svelte-1gw615y"></div></div> <!> <!> <!> <!> <!> <div class="setup-help mt-1 svelte-1gw615y"><details class="svelte-1gw615y"><summary class="text-xs bold svelte-1gw615y">Help & Documentation</summary> <div class="text-xs mt-05 svelte-1gw615y"><h3 class="bold mb-05 svelte-1gw615y">Prerequisites:</h3> <p class="mb-05 svelte-1gw615y">1. PocketBase server running and accessible</p> <p class="mb-05 svelte-1gw615y">2. Admin account created in PocketBase</p> <h3 class="bold mb-05 mt-1 svelte-1gw615y">Setup Steps:</h3> <p class="mb-05 svelte-1gw615y">1. <b>PocketBase URL:</b> Enter the URL where your PocketBase is running (e.g., http://localhost:8090)</p> <p class="mb-05 svelte-1gw615y">2. <b>Admin Credentials:</b> Use your PocketBase admin email and password</p> <p class="mb-05 svelte-1gw615y">3. <b>Create Collections:</b> This creates the database structure</p> <p class="mb-05 svelte-1gw615y">4. <b>Seed Database:</b> Adds the default template</p> <h3 class="bold mb-05 mt-1 svelte-1gw615y">Troubleshooting:</h3> <p class="mb-05 svelte-1gw615y">â€¢ <b>Connection failed:</b> Check if PocketBase is running and the URL is correct</p> <p class="mb-05 svelte-1gw615y">â€¢ <b>Authentication failed:</b> Verify your admin credentials</p> <p class="mb-05 svelte-1gw615y">â€¢ <b>Collection exists:</b> Collections may already be created</p></div></details></div></div></div></div>');function ci(t,e){_e(e,!0);let a=E(V(window.location.origin)),r=E("admin@example.com"),n=E(""),s=E(!1),o=E(1),u=E(""),l=E(!1),c=E(!1),f=E(!1),d=E(0),v=E(""),h=V({templates:!1,planners:!1});const g=[{num:1,name:"PocketBase URL"},{num:2,name:"Admin Credentials"},{num:3,name:"Create Collections"},{num:4,name:"Seed Database"},{num:5,name:"Complete"}];function x(){p.showSetupModal=!1;const C=document.querySelector(".setup-notification");C&&C.remove()}async function w(){b(l,!0);try{p.pb.baseURL=i(a),await p.pb.admins.authWithPassword(i(r),i(n)),b(o,3)}catch(C){alert("Authentication failed: "+C.message)}finally{b(l,!1)}}async function k(){b(l,!0);try{try{await p.pb.collections.getOne("templates")}catch(C){C.status===404&&await p.pb.collections.create(D())}try{await p.pb.collections.getOne("planners")}catch(C){C.status===404&&await p.pb.collections.create(O())}b(o,4)}catch(C){alert("Failed to create collections: "+C.message)}finally{b(l,!1)}}async function P(){b(f,!0),b(d,0);try{b(v,"Seeding templates..."),b(d,33),(await p.pb.collection("templates").getFullList()).length===0&&(await p.pb.collection("templates").create(te()),h.templates=!0),b(d,66),b(v,"Database seeded successfully"),b(o,5),b(d,100)}catch(C){alert("Failed to seed database: "+C.message),b(v,"Error: "+C.message)}finally{b(f,!1)}}async function $(){x(),await p.init()}function D(){return{name:"templates",type:"base",schema:[{name:"name",type:"text",required:!0,options:{min:1,max:50}},{name:"is_default",type:"bool"},{name:"structure",type:"json",required:!0}],indexes:["CREATE UNIQUE INDEX idx_templates_name ON templates (name)"]}}function O(){return{name:"planners",type:"base",schema:[{name:"week_id",type:"text",required:!0,options:{min:8,max:8,pattern:"^\\d{4}-W(0[1-9]|[1-4]\\d|5[0-3])$"}},{name:"template_id",type:"relation",required:!0,options:{collectionId:"templates",cascadeDelete:!1,maxSelect:1}},{name:"title",type:"text",options:{max:100}},{name:"city",type:"text",options:{max:50}},{name:"date_range",type:"text",options:{max:20}},{name:"prayer_times",type:"json"},{name:"schedule_data",type:"json"},{name:"tasks_data",type:"json"},{name:"workout_data",type:"json"},{name:"meals_data",type:"json"},{name:"grocery_data",type:"json"},{name:"measurements_data",type:"json"},{name:"financials_data",type:"json"}],indexes:["CREATE UNIQUE INDEX idx_planners_week ON planners (week_id)"]}}function te(){return{name:"default",is_default:!0,structure:{title_default:"Weekly Planner",city_default:"London",prayer_times:[{label:"Q",value:""},{label:"F",value:""},{label:"D",value:""},{label:"A",value:""},{label:"M",value:""},{label:"I",value:""}],schedule:[{name:"HABITS",activities:[{name:"Q: Quran",max_per_day:5,max_score:35},{name:"P: Prayer",max_per_day:5,max_score:35},{name:"E: Exercise",max_per_day:1,max_score:7},{name:"R: Read",max_per_day:1,max_score:7},{name:"L: Learn",max_per_day:1,max_score:7}]},{name:"TOTAL",activities:[{name:"DAILY POINTS",max_per_day:0,max_score:0}]}],tasks:{count:15,fields:["num","priority","tag","description","start_date","expected_date","actual_date","completed"]},workout:[{name:"PUSH",exercises:[{name:"Bench Press",default_weight:60,default_sets:4,default_reps:8},{name:"Shoulder Press",default_weight:40,default_sets:3,default_reps:10},{name:"Dips",default_weight:0,default_sets:3,default_reps:12}]},{name:"PULL",exercises:[{name:"Deadlift",default_weight:80,default_sets:4,default_reps:6},{name:"Pull-ups",default_weight:0,default_sets:3,default_reps:10},{name:"Rows",default_weight:50,default_sets:3,default_reps:12}]},{name:"LEGS",exercises:[{name:"Squats",default_weight:70,default_sets:4,default_reps:8},{name:"Lunges",default_weight:30,default_sets:3,default_reps:12},{name:"Calf Raises",default_weight:40,default_sets:3,default_reps:15}]}],meals:[{name:"Breakfast",ingredients:""},{name:"Lunch",ingredients:""},{name:"Dinner",ingredients:""},{name:"Snacks",ingredients:""}],grocery:{categories:[{name:"Proteins",items:""},{name:"Vegetables",items:""},{name:"Fruits",items:""},{name:"Dairy",items:""},{name:"Grains",items:""},{name:"Others",items:""}]},measurements:[{name:"Weight",placeholder:"kg"},{name:"Waist",placeholder:"cm"},{name:"Chest",placeholder:"cm"},{name:"Arms",placeholder:"cm"}],financials:[{name:"Income",placeholder:"0",account:""},{name:"Expenses",placeholder:"0",account:""},{name:"Savings",placeholder:"0",account:""},{name:"Investments",placeholder:"0",account:""}]}}}var j=ui();j.__click=[Qs,x];var Z=_(j),Te=_(Z),Se=_(Te),ue=m(_(Se),2);ue.__click=x;var me=m(Se,2),Fe=_(me);se(Fe,21,()=>g,qe,(C,U)=>{var B=Xs();let ce;var G=_(B),z=_(G),ie=m(G,2),ee=_(ie);M(H=>{ce=Q(B,1,"setup-step svelte-1gw615y",null,ce,H),N(z,i(U).num),N(ee,i(U).name)},[()=>({active:i(o)>=i(U).num})]),T(C,B)});var xe=m(me,2);{var Ee=C=>{var U=ti(),B=m(_(U),4),ce=m(B,2),G=_(ce);G.__click=[Gs,c,u,a,o];let z;var ie=_(G),ee=m(G,2);{var H=K=>{var de=Zs();T(K,de)},fe=(K,de)=>{{var jt=ge=>{var at=ei();T(ge,at)};Y(K,ge=>{i(u)==="error"&&ge(jt)},de)}};Y(ee,K=>{i(u)==="success"?K(H):K(fe,!1)})}M(K=>{G.disabled=i(c)||!i(a),z=Q(G,1,"svelte-1gw615y",null,z,K),N(ie,i(c)?"Testing...":"Test Connection")},[()=>({"setup-disabled":i(c)||!i(a)})]),oe(B,()=>i(a),K=>b(a,K)),T(C,U)};Y(xe,C=>{i(o)===1&&C(Ee)})}var Ie=m(xe,2);{var Ne=C=>{var U=ri(),B=m(_(U),4),ce=_(B),G=m(B,2),z=_(G),ie=m(z,2);ie.__click=[ai,s];var ee=_(ie),H=m(G,2);H.__click=w;let fe;var K=_(H);M(de=>{Be(z,"type",i(s)?"text":"password"),N(ee,i(s)?"Hide":"Show"),H.disabled=i(l)||!i(r)||!i(n),fe=Q(H,1,"svelte-1gw615y",null,fe,de),N(K,i(l)?"Authenticating...":"Authenticate")},[()=>({"setup-disabled":i(l)||!i(r)||!i(n)})]),oe(ce,()=>i(r),de=>b(r,de)),oe(z,()=>i(n),de=>b(n,de)),T(C,U)};Y(Ie,C=>{i(o)===2&&C(Ne)})}var Ce=m(Ie,2);{var Qe=C=>{var U=ni(),B=m(_(U),6);B.__click=k;let ce;var G=_(B);M(z=>{B.disabled=i(l),ce=Q(B,1,"svelte-1gw615y",null,ce,z),N(G,i(l)?"Creating...":"Create Collections")},[()=>({"setup-disabled":i(l)})]),T(C,U)};Y(Ce,C=>{i(o)===3&&C(Qe)})}var ae=m(Ce,2);{var F=C=>{var U=li(),B=m(_(U),4);{var ce=z=>{var ie=si(),ee=Pe(ie),H=_(ee),fe=m(ee,2),K=_(fe);M(()=>{ea(H,`width: ${i(d)??""}%`),N(K,i(v))}),T(z,ie)},G=z=>{var ie=ii(),ee=Pe(ie),H=_(ee);{var fe=ge=>{var at=Zt("âœ“");T(ge,at)},K=ge=>{var at=Zt("â€¢");T(ge,at)};Y(H,ge=>{h.templates?ge(fe):ge(K,!1)})}var de=m(ee,2);de.__click=P;let jt;M(ge=>{de.disabled=i(f),jt=Q(de,1,"svelte-1gw615y",null,jt,ge)},[()=>({"setup-disabled":i(f)})]),T(z,ie)};Y(B,z=>{i(f)?z(ce):z(G,!1)})}T(C,U)};Y(ae,C=>{i(o)===4&&C(F)})}var ke=m(ae,2);{var q=C=>{var U=oi(),B=m(_(U),4);B.__click=$,T(C,U)};Y(ke,C=>{i(o)===5&&C(q)})}T(t,j),he()}ze(["click"]);var fi=I('<div class="viewport-container"><div class="card"><!> <!> <!> <!> <!> <!> <!> <!></div></div> <!>',1),di=I("<!> <!> <!>",1);function vi(t,e){_e(e,!1),jn(()=>{p.init()}),De();var a=di(),r=Pe(a);Fs(r,{});var n=m(r,2);{var s=l=>{var c=fi(),f=Pe(c),d=_(f),v=_(d);Xn(v,{});var h=m(v,2);os(h,{});var g=m(h,2);ps(g,{});var x=m(g,2);bs(x,{});var w=m(x,2);ks(w,{});var k=m(w,2);Es(k,{});var P=m(k,2);Ps(P,{});var $=m(P,2);Ls($,{});var D=m(f,2);Ks(D,{}),T(l,c)};Y(n,l=>{A(p),y(()=>!p.isInitializing)&&l(s)})}var o=m(n,2);{var u=l=>{ci(l,{})};Y(o,l=>{A(p),y(()=>p.showSetupModal)&&l(u)})}T(t,a),he()}Tn(vi,{target:document.getElementById("app")});
