<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Setup Modal</title>
    <script src="pocketbase.umd.js"></script>
    <script type="module" src="assets/index-DPNXaqTU.js"></script>
    <link rel="stylesheet" href="assets/index-CzxDvdnt.css">
</head>
<body>
    <div id="app"></div>
    <div id="test-log" style="position: fixed; bottom: 0; left: 0; right: 0; background: #f0f0f0; padding: 20px; font-family: monospace; max-height: 50vh; overflow-y: auto; z-index: 20000;"></div>
    
    <script>
        const log = document.getElementById('test-log');
        function addLog(msg, type = 'info') {
            const color = { info: 'black', success: 'green', error: 'red', warning: 'orange' }[type];
            log.innerHTML += `<div style="color: ${color}">${msg}</div>`;
        }
        
        window.addEventListener('load', () => {
            addLog('Page loaded', 'info');
            
            // Check every second for changes
            setInterval(() => {
                if (window.plannerStore) {
                    const modalState = window.plannerStore.showSetupModal;
                    const modal = document.querySelector('.setup-modal-overlay');
                    const notification = document.querySelector('.setup-notification');
                    
                    addLog(`showSetupModal: ${modalState}, Modal DOM: ${modal ? 'YES' : 'NO'}, Notification: ${notification ? 'YES' : 'NO'}`, 'info');
                    
                    if (modal) {
                        const computed = window.getComputedStyle(modal);
                        addLog(`Modal display: ${computed.display}, visibility: ${computed.visibility}, z-index: ${computed.zIndex}`, 'success');
                    }
                }
            }, 1000);
            
            // Test button click after 3 seconds
            setTimeout(() => {
                const button = document.querySelector('.setup-notification-button');
                if (button) {
                    addLog('Found button, clicking...', 'warning');
                    button.click();
                    
                    setTimeout(() => {
                        const modal = document.querySelector('.setup-modal-overlay');
                        addLog(`After click - Modal exists: ${modal ? 'YES' : 'NO'}`, modal ? 'success' : 'error');
                        
                        if (!modal) {
                            // Try to manually set showSetupModal
                            addLog('Trying manual showSetupModal = true', 'warning');
                            window.plannerStore.showSetupModal = true;
                            
                            setTimeout(() => {
                                const modal2 = document.querySelector('.setup-modal-overlay');
                                addLog(`After manual set - Modal exists: ${modal2 ? 'YES' : 'NO'}`, modal2 ? 'success' : 'error');
                            }, 500);
                        }
                    }, 500);
                }
            }, 3000);
        });
    </script>
</body>
</html>