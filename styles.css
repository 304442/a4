/* CSS Variables - Centralized Design System */
:root {
  --font-xs: 6pt; --font-sm: 7pt; --font-md: 8pt;
  --space-xs: 0.5mm; --space-sm: 1mm; --space-md: 2mm; --space-lg: 3mm;
  --color-bg: #f0f0f0; --color-card: white; --color-border: #e0e0e0;
  --color-header: #e6e6e6; --color-hover: #f0f7ff; --color-focus: #fff;
  --color-success: #d4edda; --color-warning: #fff3cd; --color-error: #f8d7da;
  --color-text-success: #155724; --color-text-warning: #856404; --color-text-error: #721c24;
  --border-light: 1px solid var(--color-border); --border-focus: 2px solid rgba(66,153,225,0.5);
  --radius: 2px; --shadow: 0 4px 6px rgba(0,0,0,0.1);
}

/* Base Reset & Layout */
*{box-sizing:border-box;margin:0;padding:0;font-family:monospace}
input[type="number"]{appearance:textfield}
input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
@page{size:A4;margin:0}
html,body{width:100%;height:100%;background:var(--color-bg);-webkit-text-size-adjust:100%}
body{display:flex;justify-content:flex-start;align-items:flex-start;min-width:210mm}

/* Card Layout */
.card{width:210mm;height:297mm;padding:5mm;box-shadow:var(--shadow);background:var(--color-card);position:relative;margin:0 auto}

/* Universal Table Styles */
table{table-layout:fixed;width:200mm;border-collapse:collapse}
th,td{padding:0;border:none;vertical-align:middle;height:3mm;font-size:var(--font-sm)}
th{background:var(--color-header)!important;font-weight:bold}
tr:nth-child(even) td{background:#f0f4f8}
tr:nth-child(odd) td{background:var(--color-card)}
tr.total td{background:var(--color-header)!important}

/* Column Utilities */
.col-xs{width:3.5mm;text-align:center}
.col-sm{width:4mm;text-align:center}
.col-md{width:6mm;text-align:center}
.col-lg{width:8mm;text-align:center}
.col-xl{width:18mm}
.col-full{width:88mm;text-align:left;padding-left:var(--space-sm)}
.col-desc{width:130mm;text-align:left;padding-left:var(--space-sm)}

/* Main Table Columns */
.dc{width:3.5mm;text-align:center;padding:0;height:3mm}
.ac{width:88mm;text-align:left;padding-left:var(--space-sm);height:3mm}
td.dc,th.dc{border-right:var(--border-light)}
td.dc:nth-child(4n+5),th.dc:nth-child(4n+5){border-right:1px solid #ccc}
.current-day{background:#fff8e1!important}

/* Section Tables */
.section table{border-collapse:collapse;width:100%;margin-top:var(--space-sm)}
.section th{background:var(--color-header)!important;border-right:1px solid #ccc;border-bottom:1px solid #ccc;text-align:center;padding:var(--space-sm) var(--space-xs)}
.section th:last-child{border-right:none}
.section td{border-right:var(--border-light);border-bottom:1px solid #f0f0f0;padding:var(--space-xs);vertical-align:middle}
.section td:last-child{border-right:none}

/* Task Table Specific Widths */
.section th:nth-child(1),.section td:nth-child(1){width:var(--space-lg);text-align:center}
.section th:nth-child(2),.section td:nth-child(2){width:var(--space-lg);text-align:center}
.section th:nth-child(3),.section td:nth-child(3){width:var(--space-lg);text-align:center}
.section th:nth-child(4),.section td:nth-child(4){width:130mm;text-align:left;padding-left:var(--space-sm)}
.section th:nth-child(5),.section td:nth-child(5),.section th:nth-child(6),.section td:nth-child(6),.section th:nth-child(7),.section td:nth-child(7),.section th:nth-child(8),.section td:nth-child(8){width:var(--col-md);text-align:center}
.section th:nth-child(9),.section td:nth-child(9){width:var(--space-lg);text-align:center}

/* Universal Input Styles */
.input-base{width:100%;height:3mm;padding:0;border:none;font-size:var(--font-sm);background:#e6f7ff}
.input-base:focus{outline:none;background:var(--color-focus)!important;box-shadow:inset 0 0 0 var(--border-focus)!important}
.mini-input{@extend .input-base;text-align:center}
.task-description-input{@extend .input-base;text-align:left}
.date-input{@extend .input-base;width:var(--col-md);font-size:var(--font-xs);background:#f8f9fa;border:var(--border-light);border-radius:var(--radius)}
.inline-input{@extend .input-base;width:var(--col-md);margin-left:var(--space-sm);vertical-align:middle;background:#f8f9fa;border:var(--border-light);border-radius:var(--radius)}
.time-value-input{width:9mm}

/* Status Classes - Unified System */
.status-success,.task-completed,.delay-negative{background:var(--color-success)!important;color:var(--color-text-success)}
.status-warning,.task-early,.delay-zero{background:var(--color-warning)!important;color:var(--color-text-warning)}
.status-error,.task-delayed,.delay-positive{background:var(--color-error)!important;color:var(--color-text-error)}
.task-completed{opacity:0.7}
.task-completed input{color:#6c757d;text-decoration:line-through}

/* Typography System */
.text-xs{font-size:var(--font-xs);line-height:1.2}
.text-sm{font-size:var(--font-sm);line-height:1.2}
.text-md{font-size:var(--font-md);line-height:1.2}
.bold{font-weight:bold}

/* Interactive Elements */
.clickable,.editable{cursor:pointer}
.clickable{text-decoration:underline;color:#4a5568;padding:0 var(--space-xs);background:#f0f0f0;font-size:var(--font-sm)}
.clickable:hover,.editable:hover{background:var(--color-hover)}

/* Layout Utilities */
.flex{display:flex}
.flex-between{justify-content:space-between}
.flex-center{align-items:center}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--space-md)}
.mb-1{margin-bottom:var(--space-sm)}
.ml-1{margin-left:var(--space-sm)}
.mr-1{margin-right:var(--space-sm)}
.p-1{padding:var(--space-sm)}

/* Section Layouts */
.section{margin-top:var(--space-md)}
.section-title{margin-bottom:var(--space-sm);font-size:var(--font-md);font-weight:bold;display:flex;align-items:center}
.inline-title{display:flex;align-items:center;flex-wrap:wrap;gap:var(--space-md)}
.inline-measurement,.inline-financial{display:inline-flex;align-items:center;margin-right:var(--space-lg);white-space:nowrap}
.measurement-label,.financial-label{font-weight:normal;margin-right:var(--space-sm);cursor:pointer;font-size:var(--font-sm)}

/* Lists */
.list{padding-left:var(--space-md);margin-top:var(--space-xs);list-style-type:disc}
.list-item{margin-bottom:var(--space-xs);line-height:1}

/* Exercise Layout */
.exercise{display:flex;justify-content:space-between;align-items:center;height:3mm;margin-bottom:var(--space-xs)}
.exercise-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex-grow:1;margin-right:var(--space-xs);cursor:pointer;font-size:var(--font-sm)}
.exercise-inputs{display:flex;align-items:center}
.exercise-inputs input{width:var(--space-lg);height:3mm;font-size:var(--font-sm)}
.exercise-inputs input.sets{width:var(--space-md)}
.exercise-inputs input.reps{width:var(--space-lg)}
.exercise-unit{margin:0 var(--space-xs);font-size:var(--font-sm)}
.workout-day-card{background:#f9fafb}

/* Progress & Scoring */
.progress-container{height:var(--space-md);background:#e9ecef;border-radius:var(--space-xs);overflow:hidden;padding:0!important}
.progress-bar{height:100%;border-radius:var(--space-xs);transition:width 0.3s ease}
.progress-low{background:#dc3545}
.progress-medium{background:#ffc107}
.progress-high{background:#28a745}
.score-low .mini-input{background:var(--color-error);color:var(--color-text-error)}
.score-medium .mini-input{background:var(--color-warning);color:var(--color-text-warning)}
.score-high .mini-input{background:var(--color-success);color:var(--color-text-success)}

/* Streaks */
.streak-cell{font-size:var(--font-xs);color:#e67700}
.has-streak{background:var(--color-warning)!important}
.has-streak span{position:relative}
.has-streak span::after{content:"ðŸ”¥";font-size:var(--font-xs);position:absolute;top:-2px;right:-8px}

/* Status Indicators */
#save-status,#sync-status{position:fixed;right:10px;padding:5px 10px;border-radius:5px;font-size:12px;font-weight:bold;z-index:1000}
#save-status{bottom:10px}
#sync-status{bottom:40px}
.status-saved,.status-synced{background:var(--color-success);color:var(--color-text-success)}
.status-saving,.status-pending{background:var(--color-warning);color:var(--color-text-warning)}

/* Notifications */
#notification{position:fixed;top:20px;right:20px;padding:10px 15px;border-radius:5px;font-size:12px;font-weight:bold;z-index:1100;background:var(--color-error);color:var(--color-text-error);display:none}
#notification.show{display:block;animation:fadeOut 3s forwards}
@keyframes fadeOut{0%,70%{opacity:1}100%{opacity:0}}

/* Dropdown */
.dropdown{position:absolute;background:var(--color-card);border-radius:var(--radius);box-shadow:0 2px 5px rgba(0,0,0,0.2);font-size:var(--font-sm);z-index:1000;display:none}
.dropdown.show{display:block}
.dropdown-content{max-height:150px;overflow-y:auto}
.dropdown-item{padding:var(--space-xs) var(--col-md);cursor:pointer;white-space:nowrap}
.dropdown-item:hover{background:#f0f0f0}
.dropdown-item.current{font-weight:bold;background:#f0f8ff}
.dropdown-item-empty{padding:var(--space-xs) var(--col-md);color:#666;font-style:italic}
.delete-week-btn{color:#e53e3e;margin-left:var(--space-md);cursor:pointer}

/* Inline Editing */
.inline-edit-input,.inline-edit-textarea{width:100%;border:none;background:var(--color-focus);font-size:var(--font-sm);padding:0 var(--space-sm);outline:none;box-shadow:inset 0 0 0 1px #4299e1}
.inline-edit-input{height:100%}
.inline-edit-textarea{min-height:3mm;resize:vertical}

/* Table Borders */
tr:first-child td{border-top:1px solid #ccc}
td.bold:not(:empty){border-left:2px solid #aaa}
tr:has(td.bold:not(:empty)):not(:first-child){border-top:2px solid #f0f0f0}
tr:has(.mini-input:focus) td{background:var(--color-hover)!important}
tr:has(.completed-task) td{text-decoration:line-through;color:#6c757d}
tr:has(.completed-task) td input:not(.completed-task){text-decoration:line-through;color:#6c757d}

/* Print Optimization */
@media print{
  html,body{width:210mm;height:297mm;background:var(--color-card);margin:0;padding:0}
  .card{box-shadow:none}
  #save-status,#sync-status,.dropdown,#notification{display:none!important}
  *{print-color-adjust:exact}
}
