var pr=Object.defineProperty;var rn=t=>{throw TypeError(t)};var _r=(t,e,a)=>e in t?pr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var lt=(t,e,a)=>_r(t,typeof e!="symbol"?e+"":e,a),hr=(t,e,a)=>e.has(t)||rn("Cannot "+a);var x=(t,e,a)=>(hr(t,e,"read from private field"),a?a.call(t):e.get(t)),$=(t,e,a)=>e.has(t)?rn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=a(r);fetch(r.href,s)}})();const sn=!1;var ua=Array.isArray,mr=Array.prototype.indexOf,Aa=Array.from,gr=Object.defineProperty,ut=Object.getOwnPropertyDescriptor,yn=Object.getOwnPropertyDescriptors,yr=Object.prototype,wr=Array.prototype,Na=Object.getPrototypeOf,ln=Object.isExtensible;function Sr(t){return t()}function Ta(t){for(var e=0;e<t.length;e++)t[e]()}const fe=2,wn=4,ca=8,Ra=16,$e=32,nt=64,Pa=128,ie=256,Xt=512,ve=1024,Me=2048,Qe=4096,Re=8192,Ma=16384,Sn=32768,$a=65536,xr=1<<17,br=1<<19,xn=1<<20,Ca=1<<21,Ge=Symbol("$state"),Dr=Symbol("");function bn(t){return t===this.v}function kr(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Dn(t){return!kr(t,this.v)}function Tr(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Cr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ir(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Er(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Or(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ar(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Nr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Jt=!1,Rr=!1;function Pr(){Jt=!0}const La=1,Fa=2,kn=4,Mr=8,$r=16,Lr=1,Fr=2,re=Symbol(),Wr="http://www.w3.org/1999/xhtml";function Ur(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let j=null;function on(t){j=t}function oe(t,e=!1,a){var n=j={p:j,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Jt&&!e&&(j.l={s:null,u:null,r1:[],r2:ft(!1)}),Gr(()=>{n.d=!0})}function ue(t){const e=j;if(e!==null){const o=e.e;if(o!==null){var a=L,n=M;e.e=null;try{for(var r=0;r<o.length;r++){var s=o[r];Je(s.effect),Te(s.reaction),va(s.fn)}}finally{Je(a),Te(n)}}j=e.p,e.m=!0}return{}}function Yt(){return!Jt||j!==null&&j.l===null}function Y(t){if(typeof t!="object"||t===null||Ge in t)return t;const e=Na(t);if(e!==yr&&e!==wr)return t;var a=new Map,n=ua(t),r=C(0),s=M,o=u=>{var l=M;Te(s);var c=u();return Te(l),c};return n&&a.set("length",C(t.length)),new Proxy(t,{defineProperty(u,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Or();var d=a.get(l);return d===void 0?d=o(()=>{var f=C(c.value);return a.set(l,f),f}):S(d,c.value,!0),!0},deleteProperty(u,l){var c=a.get(l);if(c===void 0){if(l in u){const v=o(()=>C(re));a.set(l,v),ba(r)}}else{if(n&&typeof l=="string"){var d=a.get("length"),f=Number(l);Number.isInteger(f)&&f<d.v&&S(d,f)}S(c,re),ba(r)}return!0},get(u,l,c){var m;if(l===Ge)return t;var d=a.get(l),f=l in u;if(d===void 0&&(!f||(m=ut(u,l))!=null&&m.writable)&&(d=o(()=>{var g=Y(f?u[l]:re),T=C(g);return T}),a.set(l,d)),d!==void 0){var v=i(d);return v===re?void 0:v}return Reflect.get(u,l,c)},getOwnPropertyDescriptor(u,l){var c=Reflect.getOwnPropertyDescriptor(u,l);if(c&&"value"in c){var d=a.get(l);d&&(c.value=i(d))}else if(c===void 0){var f=a.get(l),v=f==null?void 0:f.v;if(f!==void 0&&v!==re)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(u,l){var v;if(l===Ge)return!0;var c=a.get(l),d=c!==void 0&&c.v!==re||Reflect.has(u,l);if(c!==void 0||L!==null&&(!d||(v=ut(u,l))!=null&&v.writable)){c===void 0&&(c=o(()=>{var m=d?Y(u[l]):re,g=C(m);return g}),a.set(l,c));var f=i(c);if(f===re)return!1}return d},set(u,l,c,d){var I;var f=a.get(l),v=l in u;if(n&&l==="length")for(var m=c;m<f.v;m+=1){var g=a.get(m+"");g!==void 0?S(g,re):m in u&&(g=o(()=>C(re)),a.set(m+"",g))}if(f===void 0)(!v||(I=ut(u,l))!=null&&I.writable)&&(f=o(()=>C(void 0)),S(f,Y(c)),a.set(l,f));else{v=f.v!==re;var T=o(()=>Y(c));S(f,T)}var y=Reflect.getOwnPropertyDescriptor(u,l);if(y!=null&&y.set&&y.set.call(d,c),!v){if(n&&typeof l=="string"){var b=a.get("length"),D=Number(l);Number.isInteger(D)&&D>=b.v&&S(b,D+1)}ba(r)}return!0},ownKeys(u){i(r);var l=Reflect.ownKeys(u).filter(f=>{var v=a.get(f);return v===void 0||v.v!==re});for(var[c,d]of a)d.v!==re&&!(c in u)&&l.push(c);return l},setPrototypeOf(){Ar()}})}function ba(t,e=1){S(t,t.v+e)}function un(t){try{if(t!==null&&typeof t=="object"&&Ge in t)return t[Ge]}catch{}return t}function qr(t,e){return Object.is(un(t),un(e))}function Wa(t){var e=fe|Me,a=M!==null&&(M.f&fe)!==0?M:null;return L===null||a!==null&&(a.f&ie)!==0?e|=ie:L.f|=xn,{ctx:j,deps:null,effects:null,equals:bn,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:a??L}}function Ne(t){const e=Wa(t);return e.equals=Dn,e}function Tn(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Be(e[a])}}function Br(t){for(var e=t.parent;e!==null;){if((e.f&fe)===0)return e;e=e.parent}return null}function Cn(t){var e,a=L;Je(Br(t));try{Tn(t),e=Yn(t)}finally{Je(a)}return e}function In(t){var e=Cn(t);if(t.equals(e)||(t.v=e,t.wv=Bn()),!st){var a=(We||(t.f&ie)!==0)&&t.deps!==null?Qe:ve;Ce(t,a)}}const dt=new Map;function ft(t,e){var a={f:0,v:t,reactions:null,equals:bn,rv:0,wv:0};return a}function C(t,e){const a=ft(t);return ns(a),a}function Jr(t,e=!1,a=!0){var r;const n=ft(t);return e||(n.equals=Dn),Jt&&a&&j!==null&&j.l!==null&&((r=j.l).s??(r.s=[])).push(n),n}function S(t,e,a=!1){M!==null&&!ke&&Yt()&&(M.f&(fe|Ra))!==0&&!(K!=null&&K[1].includes(t)&&K[0]===M)&&Nr();let n=a?Y(e):e;return vt(t,n)}function vt(t,e){if(!t.equals(e)){var a=t.v;st?dt.set(t,e):dt.set(t,a),t.v=e,(t.f&fe)!==0&&((t.f&Me)!==0&&Cn(t),Ce(t,(t.f&ie)===0?ve:Qe)),t.wv=Bn(),En(t,Me),Yt()&&L!==null&&(L.f&ve)!==0&&(L.f&($e|nt))===0&&(de===null?rs([t]):de.push(t))}return e}function En(t,e){var a=t.reactions;if(a!==null)for(var n=Yt(),r=a.length,s=0;s<r;s++){var o=a[s],u=o.f;(u&Me)===0&&(!n&&o===L||(Ce(o,e),(u&(ve|ie))!==0&&((u&fe)!==0?En(o,Qe):Ja(o))))}}function Yr(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let jr=!1;var cn,On,An,Nn;function zr(){if(cn===void 0){cn=window,On=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;An=ut(e,"firstChild").get,Nn=ut(e,"nextSibling").get,ln(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),ln(a)&&(a.__t=void 0)}}function da(t=""){return document.createTextNode(t)}function Zt(t){return An.call(t)}function fa(t){return Nn.call(t)}function _(t,e){return Zt(t)}function Pe(t,e){{var a=Zt(t);return a instanceof Comment&&a.data===""?fa(a):a}}function h(t,e=1,a=!1){let n=t;for(;e--;)n=fa(n);return n}function Hr(t){t.textContent=""}function Rn(t){L===null&&M===null&&Ir(),M!==null&&(M.f&ie)!==0&&L===null&&Cr(),st&&Tr()}function Vr(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function rt(t,e,a,n=!0){var r=L,s={ctx:j,deps:null,nodes_start:null,nodes_end:null,f:t|Me,first:null,fn:e,last:null,next:null,parent:r,prev:null,teardown:null,transitions:null,wv:0};if(a)try{Ba(s),s.f|=Sn}catch(l){throw Be(s),l}else e!==null&&Ja(s);var o=a&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(xn|Pa))===0;if(!o&&n&&(r!==null&&Vr(s,r),M!==null&&(M.f&fe)!==0)){var u=M;(u.effects??(u.effects=[])).push(s)}return s}function Gr(t){const e=rt(ca,null,!1);return Ce(e,ve),e.teardown=t,e}function ea(t){Rn();var e=L!==null&&(L.f&$e)!==0&&j!==null&&!j.m;if(e){var a=j;(a.e??(a.e=[])).push({fn:t,effect:L,reaction:M})}else{var n=va(t);return n}}function Kr(t){return Rn(),Pn(t)}function Qr(t){const e=rt(nt,t,!0);return(a={})=>new Promise(n=>{a.outro?ta(e,()=>{Be(e),n(void 0)}):(Be(e),n(void 0))})}function va(t){return rt(wn,t,!1)}function Pn(t){return rt(ca,t,!0)}function W(t,e=[],a=Wa){const n=e.map(a);return Ua(()=>t(...n.map(i)))}function Ua(t,e=0){return rt(ca|Ra|e,t,!0)}function pt(t,e=!0){return rt(ca|$e,t,!0,e)}function Mn(t){var e=t.teardown;if(e!==null){const a=st,n=M;dn(!0),Te(null);try{e.call(null)}finally{dn(a),Te(n)}}}function $n(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){var n=a.next;(a.f&nt)!==0?a.parent=null:Be(a,e),a=n}}function Xr(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&$e)===0&&Be(e),e=a}}function Be(t,e=!0){var a=!1;(e||(t.f&br)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Zr(t.nodes_start,t.nodes_end),a=!0),$n(t,e&&!a),ia(t,0),Ce(t,Ma);var n=t.transitions;if(n!==null)for(const s of n)s.stop();Mn(t);var r=t.parent;r!==null&&r.first!==null&&Ln(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Zr(t,e){for(;t!==null;){var a=t===e?null:fa(t);t.remove(),t=a}}function Ln(t){var e=t.parent,a=t.prev,n=t.next;a!==null&&(a.next=n),n!==null&&(n.prev=a),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=a))}function ta(t,e){var a=[];qa(t,a,!0),Fn(a,()=>{Be(t),e&&e()})}function Fn(t,e){var a=t.length;if(a>0){var n=()=>--a||e();for(var r of t)r.out(n)}else e()}function qa(t,e,a){if((t.f&Re)===0){if(t.f^=Re,t.transitions!==null)for(const o of t.transitions)(o.is_global||a)&&e.push(o);for(var n=t.first;n!==null;){var r=n.next,s=(n.f&$a)!==0||(n.f&$e)!==0;qa(n,e,s?a:!1),n=r}}}function aa(t){Wn(t,!0)}function Wn(t,e){if((t.f&Re)!==0){t.f^=Re;for(var a=t.first;a!==null;){var n=a.next,r=(a.f&$a)!==0||(a.f&$e)!==0;Wn(a,r?e:!1),a=n}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let na=[];function es(){var t=na;na=[],Ta(t)}function ts(t){na.length===0&&queueMicrotask(es),na.push(t)}function as(t){var e=L;if((e.f&Sn)===0){if((e.f&Pa)===0)throw t;e.fn(t)}else Un(t,e)}function Un(t,e){for(;e!==null;){if((e.f&Pa)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let Ia=!1,ra=null,Ke=!1,st=!1;function dn(t){st=t}let Qt=[];let M=null,ke=!1;function Te(t){M=t}let L=null;function Je(t){L=t}let K=null;function ns(t){M!==null&&M.f&Ca&&(K===null?K=[M,[t]]:K[1].push(t))}let ee=null,se=0,de=null;function rs(t){de=t}let qn=1,sa=0,We=!1,Ve=null;function Bn(){return++qn}function pa(t){var f;var e=t.f;if((e&Me)!==0)return!0;if((e&Qe)!==0){var a=t.deps,n=(e&ie)!==0;if(a!==null){var r,s,o=(e&Xt)!==0,u=n&&L!==null&&!We,l=a.length;if(o||u){var c=t,d=c.parent;for(r=0;r<l;r++)s=a[r],(o||!((f=s==null?void 0:s.reactions)!=null&&f.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);o&&(c.f^=Xt),u&&d!==null&&(d.f&ie)===0&&(c.f^=ie)}for(r=0;r<l;r++)if(s=a[r],pa(s)&&In(s),s.wv>t.wv)return!0}(!n||L!==null&&!We)&&Ce(t,ve)}return!1}function Jn(t,e,a=!0){var n=t.reactions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];K!=null&&K[1].includes(t)&&K[0]===M||((s.f&fe)!==0?Jn(s,e,!1):e===s&&(a?Ce(s,Me):(s.f&ve)!==0&&Ce(s,Qe),Ja(s)))}}function Yn(t){var m;var e=ee,a=se,n=de,r=M,s=We,o=K,u=j,l=ke,c=t.f;ee=null,se=0,de=null,We=(c&ie)!==0&&(ke||!Ke||M===null),M=(c&($e|nt))===0?t:null,K=null,on(t.ctx),ke=!1,sa++,t.f|=Ca;try{var d=(0,t.fn)(),f=t.deps;if(ee!==null){var v;if(ia(t,se),f!==null&&se>0)for(f.length=se+ee.length,v=0;v<ee.length;v++)f[se+v]=ee[v];else t.deps=f=ee;if(!We)for(v=se;v<f.length;v++)((m=f[v]).reactions??(m.reactions=[])).push(t)}else f!==null&&se<f.length&&(ia(t,se),f.length=se);if(Yt()&&de!==null&&!ke&&f!==null&&(t.f&(fe|Qe|Me))===0)for(v=0;v<de.length;v++)Jn(de[v],t);return r!==null&&r!==t&&(sa++,de!==null&&(n===null?n=de:n.push(...de))),d}catch(g){as(g)}finally{ee=e,se=a,de=n,M=r,We=s,K=o,on(u),ke=l,t.f^=Ca}}function ss(t,e){let a=e.reactions;if(a!==null){var n=mr.call(a,t);if(n!==-1){var r=a.length-1;r===0?a=e.reactions=null:(a[n]=a[r],a.pop())}}a===null&&(e.f&fe)!==0&&(ee===null||!ee.includes(e))&&(Ce(e,Qe),(e.f&(ie|Xt))===0&&(e.f^=Xt),Tn(e),ia(e,0))}function ia(t,e){var a=t.deps;if(a!==null)for(var n=e;n<a.length;n++)ss(t,a[n])}function Ba(t){var e=t.f;if((e&Ma)===0){Ce(t,ve);var a=L,n=Ke;L=t,Ke=!0;try{(e&Ra)!==0?Xr(t):$n(t),Mn(t);var r=Yn(t);t.teardown=typeof r=="function"?r:null,t.wv=qn;var s;sn&&Rr&&(t.f&Me)!==0&&t.deps}finally{Ke=n,L=a}}}function is(){try{Er()}catch(t){if(ra!==null)Un(t,ra);else throw t}}function ls(){var t=Ke;try{var e=0;for(Ke=!0;Qt.length>0;){e++>1e3&&is();var a=Qt,n=a.length;Qt=[];for(var r=0;r<n;r++){var s=us(a[r]);os(s)}dt.clear()}}finally{Ia=!1,Ke=t,ra=null}}function os(t){var e=t.length;if(e!==0)for(var a=0;a<e;a++){var n=t[a];(n.f&(Ma|Re))===0&&pa(n)&&(Ba(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Ln(n):n.fn=null))}}function Ja(t){Ia||(Ia=!0,queueMicrotask(ls));for(var e=ra=t;e.parent!==null;){e=e.parent;var a=e.f;if((a&(nt|$e))!==0){if((a&ve)===0)return;e.f^=ve}}Qt.push(e)}function us(t){for(var e=[],a=t;a!==null;){var n=a.f,r=(n&($e|nt))!==0,s=r&&(n&ve)!==0;if(!s&&(n&Re)===0){(n&wn)!==0?e.push(a):r?a.f^=ve:pa(a)&&Ba(a);var o=a.first;if(o!==null){a=o;continue}}var u=a.parent;for(a=a.next;a===null&&u!==null;)a=u.next,u=u.parent}return e}function i(t){var e=t.f,a=(e&fe)!==0;if(Ve!==null&&Ve.add(t),M!==null&&!ke){if(!(K!=null&&K[1].includes(t))||K[0]!==M){var n=M.deps;t.rv<sa&&(t.rv=sa,ee===null&&n!==null&&n[se]===t?se++:ee===null?ee=[t]:(!We||!ee.includes(t))&&ee.push(t))}}else if(a&&t.deps===null&&t.effects===null){var r=t,s=r.parent;s!==null&&(s.f&ie)===0&&(r.f^=ie)}return a&&(r=t,pa(r)&&In(r)),st&&dt.has(t)?dt.get(t):t.v}function cs(t){var e=Ve;Ve=new Set;var a=Ve,n;try{if(w(t),e!==null)for(n of Ve)e.add(n)}finally{Ve=e}return a}function te(t){var e=cs(()=>w(t));for(var a of e)if((a.f&xr)!==0)for(const n of a.deps||[])(n.f&fe)===0&&vt(n,n.v);else vt(a,a.v)}function w(t){var e=ke;try{return ke=!0,t()}finally{ke=e}}const ds=-7169;function Ce(t,e){t.f=t.f&ds|e}function P(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ge in t)Ea(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&Ge in a&&Ea(a)}}}function Ea(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{Ea(t[n],e)}catch{}const a=Na(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const n=yn(a);for(let r in n){const s=n[r].get;if(s)try{s.call(t)}catch{}}}}}const fs=["touchstart","touchmove"];function vs(t){return fs.includes(t)}let fn=!1;function ps(){fn||(fn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const a of t.target.elements)(e=a.__on_r)==null||e.call(a)})},{capture:!0}))}function _s(t){var e=M,a=L;Te(null),Je(null);try{return t()}finally{Te(e),Je(a)}}function jn(t,e,a,n=a){t.addEventListener(e,()=>_s(a));const r=t.__on_r;r?t.__on_r=()=>{r(),n(!0)}:t.__on_r=()=>n(!0),ps()}const zn=new Set,Oa=new Set;function Ye(t){for(var e=0;e<t.length;e++)zn.add(t[e]);for(var a of Oa)a(t)}function Kt(t){var D;var e=this,a=e.ownerDocument,n=t.type,r=((D=t.composedPath)==null?void 0:D.call(t))||[],s=r[0]||t.target,o=0,u=t.__root;if(u){var l=r.indexOf(u);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var c=r.indexOf(e);if(c===-1)return;l<=c&&(o=l)}if(s=r[o]||t.target,s!==e){gr(t,"currentTarget",{configurable:!0,get(){return s||a}});var d=M,f=L;Te(null),Je(null);try{for(var v,m=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var T=s["__"+n];if(T!=null&&(!s.disabled||t.target===s))if(ua(T)){var[y,...b]=T;y.apply(s,[t,...b])}else T.call(s,t)}catch(I){v?m.push(I):v=I}if(t.cancelBubble||g===e||g===null)break;s=g}if(v){for(let I of m)queueMicrotask(()=>{throw I});throw v}}finally{t.__root=e,delete t.currentTarget,Te(d),Je(f)}}}function hs(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function la(t,e){var a=L;a.nodes_start===null&&(a.nodes_start=t,a.nodes_end=e)}function R(t,e){var a=(e&Lr)!==0,n=(e&Fr)!==0,r,s=!t.startsWith("<!>");return()=>{r===void 0&&(r=hs(s?t:"<!>"+t),a||(r=Zt(r)));var o=n||On?document.importNode(r,!0):r.cloneNode(!0);if(a){var u=Zt(o),l=o.lastChild;la(u,l)}else la(o,o);return o}}function Hn(t=""){{var e=da(t+"");return la(e,e),e}}function ms(){var t=document.createDocumentFragment(),e=document.createComment(""),a=da();return t.append(e,a),la(e,a),t}function A(t,e){t!==null&&t.before(e)}function N(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function gs(t,e){return ys(t,e)}const at=new Map;function ys(t,{target:e,anchor:a,props:n={},events:r,context:s,intro:o=!0}){zr();var u=new Set,l=f=>{for(var v=0;v<f.length;v++){var m=f[v];if(!u.has(m)){u.add(m);var g=vs(m);e.addEventListener(m,Kt,{passive:g});var T=at.get(m);T===void 0?(document.addEventListener(m,Kt,{passive:g}),at.set(m,1)):at.set(m,T+1)}}};l(Aa(zn)),Oa.add(l);var c=void 0,d=Qr(()=>{var f=a??e.appendChild(da());return pt(()=>{if(s){oe({});var v=j;v.c=s}r&&(n.$$events=r),c=t(f,n)||{},s&&ue()}),()=>{var g;for(var v of u){e.removeEventListener(v,Kt);var m=at.get(v);--m===0?(document.removeEventListener(v,Kt),at.delete(v)):at.set(v,m)}Oa.delete(l),f!==a&&((g=f.parentNode)==null||g.removeChild(f))}});return ws.set(c,d),c}let ws=new WeakMap;function le(t,e,[a,n]=[0,0]){var r=t,s=null,o=null,u=re,l=a>0?$a:0,c=!1;const d=(v,m=!0)=>{c=!0,f(m,v)},f=(v,m)=>{u!==(u=v)&&(u?(s?aa(s):m&&(s=pt(()=>m(r))),o&&ta(o,()=>{o=null})):(o?aa(o):m&&(o=pt(()=>m(r,[a+1,n]))),s&&ta(s,()=>{s=null})))};Ua(()=>{c=!1,e(d),c||f(null,null)},l)}function Ue(t,e){return e}function Ss(t,e,a,n){for(var r=[],s=e.length,o=0;o<s;o++)qa(e[o].e,r,!0);var u=s>0&&r.length===0&&a!==null;if(u){var l=a.parentNode;Hr(l),l.append(a),n.clear(),Fe(t,e[0].prev,e[s-1].next)}Fn(r,()=>{for(var c=0;c<s;c++){var d=e[c];u||(n.delete(d.k),Fe(t,d.prev,d.next)),Be(d.e,!u)}})}function ae(t,e,a,n,r,s=null){var o=t,u={flags:e,items:new Map,first:null},l=(e&kn)!==0;if(l){var c=t;o=c.appendChild(da())}var d=null,f=!1,v=Ne(()=>{var m=a();return ua(m)?m:m==null?[]:Aa(m)});Ua(()=>{var m=i(v),g=m.length;f&&g===0||(f=g===0,xs(m,u,o,r,e,n,a),s!==null&&(g===0?d?aa(d):d=pt(()=>s(o)):d!==null&&ta(d,()=>{d=null})),i(v))})}function xs(t,e,a,n,r,s,o){var he,me,ge,Ee;var u=(r&Mr)!==0,l=(r&(La|Fa))!==0,c=t.length,d=e.items,f=e.first,v=f,m,g=null,T,y=[],b=[],D,I,k,E;if(u)for(E=0;E<c;E+=1)D=t[E],I=s(D,E),k=d.get(I),k!==void 0&&((he=k.a)==null||he.measure(),(T??(T=new Set)).add(k));for(E=0;E<c;E+=1){if(D=t[E],I=s(D,E),k=d.get(I),k===void 0){var G=v?v.e.nodes_start:a;g=Ds(G,e,g,g===null?e.first:g.next,D,I,E,n,r,o),d.set(I,g),y=[],b=[],v=g.next;continue}if(l&&bs(k,D,E,r),(k.e.f&Re)!==0&&(aa(k.e),u&&((me=k.a)==null||me.unfix(),(T??(T=new Set)).delete(k))),k!==v){if(m!==void 0&&m.has(k)){if(y.length<b.length){var B=b[0],z;g=B.prev;var xe=y[0],pe=y[y.length-1];for(z=0;z<y.length;z+=1)vn(y[z],B,a);for(z=0;z<b.length;z+=1)m.delete(b[z]);Fe(e,xe.prev,pe.next),Fe(e,g,xe),Fe(e,pe,B),v=B,g=pe,E-=1,y=[],b=[]}else m.delete(k),vn(k,v,a),Fe(e,k.prev,k.next),Fe(e,k,g===null?e.first:g.next),Fe(e,g,k),g=k;continue}for(y=[],b=[];v!==null&&v.k!==I;)(v.e.f&Re)===0&&(m??(m=new Set)).add(v),b.push(v),v=v.next;if(v===null)continue;k=v}y.push(k),g=k,v=k.next}if(v!==null||m!==void 0){for(var ne=m===void 0?[]:Aa(m);v!==null;)(v.e.f&Re)===0&&ne.push(v),v=v.next;var _e=ne.length;if(_e>0){var Le=(r&kn)!==0&&c===0?a:null;if(u){for(E=0;E<_e;E+=1)(ge=ne[E].a)==null||ge.measure();for(E=0;E<_e;E+=1)(Ee=ne[E].a)==null||Ee.fix()}Ss(e,ne,Le,d)}}u&&ts(()=>{var Oe;if(T!==void 0)for(k of T)(Oe=k.a)==null||Oe.apply()}),L.first=e.first&&e.first.e,L.last=g&&g.e}function bs(t,e,a,n){(n&La)!==0&&vt(t.v,e),(n&Fa)!==0?vt(t.i,a):t.i=a}function Ds(t,e,a,n,r,s,o,u,l,c){var d=(l&La)!==0,f=(l&$r)===0,v=d?f?Jr(r,!1,!1):ft(r):r,m=(l&Fa)===0?o:ft(o),g={i:m,v,k:s,a:null,e:null,prev:a,next:n};try{return g.e=pt(()=>u(t,v,m,c),jr),g.e.prev=a&&a.e,g.e.next=n&&n.e,a===null?e.first=g:(a.next=g,a.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function vn(t,e,a){for(var n=t.next?t.next.e.nodes_start:a,r=e?e.e.nodes_start:a,s=t.e.nodes_start;s!==n;){var o=fa(s);r.before(s),s=o}}function Fe(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Vn(t){var e,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(a=Vn(t[e]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function ks(){for(var t,e,a=0,n="",r=arguments.length;a<r;a++)(t=arguments[a])&&(e=Vn(t))&&(n&&(n+=" "),n+=e);return n}function Ts(t){return typeof t=="object"?ks(t):t??""}const pn=[...` 	
\r\f \v\uFEFF`];function Cs(t,e,a){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),a){for(var r in a)if(a[r])n=n?n+" "+r:r;else if(n.length)for(var s=r.length,o=0;(o=n.indexOf(r,o))>=0;){var u=o+s;(o===0||pn.includes(n[o-1]))&&(u===n.length||pn.includes(n[u]))?n=(o===0?"":n.substring(0,o))+n.substring(u+1):o=u}}return n===""?null:n}function Is(t,e){return t==null?null:String(t)}function Q(t,e,a,n,r,s){var o=t.__className;if(o!==a||o===void 0){var u=Cs(a,n,s);u==null?t.removeAttribute("class"):t.className=u,t.__className=a}else if(s&&r!==s)for(var l in s){var c=!!s[l];(r==null||c!==!!r[l])&&t.classList.toggle(l,c)}return s}function oa(t,e,a,n){var r=t.__style;if(r!==e){var s=Is(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return n}function Gn(t,e,a){if(t.multiple){if(e==null)return;if(!ua(e))return Yr();for(var n of t.options)n.selected=e.includes(ct(n));return}for(n of t.options){var r=ct(n);if(qr(r,e)){n.selected=!0;return}}(!a||e!==void 0)&&(t.selectedIndex=-1)}function Es(t,e){va(()=>{var a=new MutationObserver(()=>{var n=t.__value;Gn(t,n)});return a.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function _n(t,e,a=e){var n=!0;jn(t,"change",r=>{var s=r?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(s),ct);else{var u=t.querySelector(s)??t.querySelector("option:not([disabled])");o=u&&ct(u)}a(o)}),va(()=>{var r=e();if(Gn(t,r,n),n&&r===void 0){var s=t.querySelector(":checked");s!==null&&(r=ct(s),a(r))}t.__value=r,n=!1}),Es(t)}function ct(t){return"__value"in t?t.__value:t.value}const Os=Symbol("is custom element"),As=Symbol("is html");function Kn(t,e){var a=Qn(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function qe(t,e,a,n){var r=Qn(t);r[e]!==(r[e]=a)&&(e==="loading"&&(t[Dr]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Ns(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Qn(t){return t.__attributes??(t.__attributes={[Os]:t.nodeName.includes("-"),[As]:t.namespaceURI===Wr})}var hn=new Map;function Ns(t){var e=hn.get(t.nodeName);if(e)return e;hn.set(t.nodeName,e=[]);for(var a,n=t,r=Element.prototype;r!==n;){a=yn(n);for(var s in a)a[s].set&&e.push(s);n=Na(n)}return e}function X(t,e,a=e){var n=Yt();jn(t,"input",r=>{var s=r?t.defaultValue:t.value;if(s=Da(t)?ka(s):s,a(s),n&&s!==(s=e())){var o=t.selectionStart,u=t.selectionEnd;t.value=s??"",u!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(u,t.value.length))}}),w(e)==null&&t.value&&a(Da(t)?ka(t.value):t.value),Pn(()=>{var r=e();Da(t)&&r===ka(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function Da(t){var e=t.type;return e==="number"||e==="range"}function ka(t){return t===""?null:+t}function Ie(t=!1){const e=j,a=e.l.u;if(!a)return;let n=()=>P(e.s);if(t){let r=0,s={};const o=Wa(()=>{let u=!1;const l=e.s;for(const c in l)l[c]!==s[c]&&(s[c]=l[c],u=!0);return u&&r++,r});n=()=>i(o)}a.b.length&&Kr(()=>{mn(e,n),Ta(a.b)}),ea(()=>{const r=w(()=>a.m.map(Sr));return()=>{for(const s of r)typeof s=="function"&&s()}}),a.a.length&&ea(()=>{mn(e,n),Ta(a.a)})}function mn(t,e){if(t.l.s)for(const a of t.l.s)i(a);e()}function Xn(t){j===null&&Ur(),Jt&&j.l!==null?Rs(j).m.push(t):ea(()=>{const e=w(t);if(typeof e=="function")return e})}function Rs(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Ps="5";var gn;typeof window<"u"&&((gn=window.__svelte??(window.__svelte={})).v??(gn.v=new Set)).add(Ps);let Ms=0;const ot=()=>`id_${Date.now()}_${Ms++}`;var _t,ht,mt,gt,yt,wt,St,xt,bt,Dt,kt,Tt,Ct,It,Et,Ot,At,Nt,Rt,Pt,Mt,$t,Lt,Ft,Wt,Ut,qt,Bt;class $s{constructor(){lt(this,"pb",null);$(this,_t,C(!0));lt(this,"lastSavedState",null);$(this,ht,C(""));$(this,mt,C(""));$(this,gt,C("London"));$(this,yt,C("saved"));lt(this,"saveTimeout",null);$(this,wt,C(!1));$(this,St,C(""));lt(this,"notificationTimeout",null);$(this,xt,C(Y(navigator.onLine)));$(this,bt,C(Y([])));$(this,Dt,C(!1));$(this,kt,C(!1));$(this,Tt,C(""));$(this,Ct,C(""));$(this,It,C(Y(new Date().getDay())));$(this,Et,C("Weekly Planner"));$(this,Ot,C(Y([])));$(this,At,C(Y([])));$(this,Nt,C(Y([])));$(this,Rt,C(Y([])));$(this,Pt,C(Y([])));$(this,Mt,C(Y([])));$(this,$t,C(Y([])));$(this,Lt,C(Y([])));$(this,Ft,C(null));$(this,Wt,C(null));$(this,Ut,C(Y([])));$(this,qt,C(Y([{name:"London",lat:51.5074,lon:-.1278},{name:"Cairo",lat:30.0444,lon:31.2357},{name:"Cape Town",lat:-33.9249,lon:18.4241},{name:"Amsterdam",lat:52.3676,lon:4.9041},{name:"Current Location",lat:null,lon:null}])));$(this,Bt,C(!1));window.PocketBase&&(this.pb=new window.PocketBase(window.location.origin),this.pb.autoCancellation(!1)),this.setupEventListeners()}get isInitializing(){return i(x(this,_t))}set isInitializing(e){S(x(this,_t),e,!0)}get currentWeek(){return i(x(this,ht))}set currentWeek(e){S(x(this,ht),e,!0)}get dateRange(){return i(x(this,mt))}set dateRange(e){S(x(this,mt),e,!0)}get city(){return i(x(this,gt))}set city(e){S(x(this,gt),e,!0)}get saveStatus(){return i(x(this,yt))}set saveStatus(e){S(x(this,yt),e,!0)}get showNotification(){return i(x(this,wt))}set showNotification(e){S(x(this,wt),e,!0)}get notificationMessage(){return i(x(this,St))}set notificationMessage(e){S(x(this,St),e,!0)}get isOnline(){return i(x(this,xt))}set isOnline(e){S(x(this,xt),e,!0)}get pendingSync(){return i(x(this,bt))}set pendingSync(e){S(x(this,bt),e,!0)}get showCitySelector(){return i(x(this,Dt))}set showCitySelector(e){S(x(this,Dt),e,!0)}get showWeekSelector(){return i(x(this,kt))}set showWeekSelector(e){S(x(this,kt),e,!0)}get cityDropdownStyle(){return i(x(this,Tt))}set cityDropdownStyle(e){S(x(this,Tt),e,!0)}get weekDropdownStyle(){return i(x(this,Ct))}set weekDropdownStyle(e){S(x(this,Ct),e,!0)}get currentDay(){return i(x(this,It))}set currentDay(e){S(x(this,It),e,!0)}get plannerTitle(){return i(x(this,Et))}set plannerTitle(e){S(x(this,Et),e,!0)}get times(){return i(x(this,Ot))}set times(e){S(x(this,Ot),e,!0)}get schedule(){return i(x(this,At))}set schedule(e){S(x(this,At),e,!0)}get tasks(){return i(x(this,Nt))}set tasks(e){S(x(this,Nt),e,!0)}get workoutPlan(){return i(x(this,Rt))}set workoutPlan(e){S(x(this,Rt),e,!0)}get meals(){return i(x(this,Pt))}set meals(e){S(x(this,Pt),e,!0)}get groceryList(){return i(x(this,Mt))}set groceryList(e){S(x(this,Mt),e,!0)}get bodyMeasurements(){return i(x(this,$t))}set bodyMeasurements(e){S(x(this,$t),e,!0)}get financials(){return i(x(this,Lt))}set financials(e){S(x(this,Lt),e,!0)}get currentTemplate(){return i(x(this,Ft))}set currentTemplate(e){S(x(this,Ft),e,!0)}get currentTemplateId(){return i(x(this,Wt))}set currentTemplateId(e){S(x(this,Wt),e,!0)}get savedWeeks(){return i(x(this,Ut))}set savedWeeks(e){S(x(this,Ut),e,!0)}get cityOptions(){return i(x(this,qt))}set cityOptions(e){S(x(this,qt),e,!0)}get showSetupModal(){return i(x(this,Bt))}set showSetupModal(e){S(x(this,Bt),e,!0)}setupEventListeners(){window.addEventListener("online",()=>{this.isOnline=!0,this.syncPendingData()}),window.addEventListener("offline",()=>this.isOnline=!1),document.addEventListener("click",e=>{e.target.closest(".dropdown-portal,.clickable")||(this.showCitySelector=this.showWeekSelector=!1)})}async init(){if(!this.pb&&window.PocketBase&&(this.pb=new window.PocketBase(window.location.origin),this.pb.autoCancellation(!1)),!this.pb){this.showSetupNotification(),this.isInitializing=!1;return}if(!await this.checkDatabaseInitialized()){this.showSetupNotification(),this.isInitializing=!1;return}this.pendingSync=JSON.parse(localStorage.getItem("planner_pending_sync")||"[]"),this.currentWeek=this.getCurrentIsoWeek(),this.dateRange=this.getWeekDateRange(this.parseISOWeek(this.currentWeek)),await this.loadWeek(this.currentWeek,!0),setInterval(()=>{!this.isInitializing&&this.hasSignificantChanges()&&this.saveData()},3e4),this.isOnline&&this.syncPendingData()}async checkDatabaseInitialized(){try{const e=await this.pb.collection("templates").getFirstListItem("is_default=true");return!0}catch{return!1}}showSetupNotification(){if(!document.body){setTimeout(()=>this.showSetupNotification(),100);return}if(document.querySelector(".setup-notification"))return;const e=document.createElement("div");e.className="setup-notification";const a=document.createElement("span");a.textContent="Database not initialized",e.appendChild(a);const n=document.createElement("button");n.className="setup-notification-button",n.textContent="Setup",e.appendChild(n),document.body.appendChild(e),n.addEventListener("click",()=>{this.showSetupModal=!0,setTimeout(()=>{document.querySelector(".setup-modal-overlay")},100)})}async fetchTemplate(e="default"){const a=`template_${e}`;try{const n=localStorage.getItem(a);if(n)return JSON.parse(n)}catch{localStorage.removeItem(a)}if(!this.isOnline)return this.showMessage("Offline: Using fallback template"),this.getFallbackTemplate();try{const n=e==="default"?"is_default=true":`name="${e}"`,r=await this.pb.collection("templates").getFirstListItem(n);return localStorage.setItem(a,JSON.stringify(r)),r}catch{return this.showMessage("Template error: Using fallback"),this.getFallbackTemplate()}}getFallbackTemplate(){return{id:"fallback",name:"fallback",structure:{prayer_times:[{label:"Q",value:""},{label:"F",value:""},{label:"D",value:""},{label:"A",value:""},{label:"M",value:""},{label:"I",value:""}],schedule:[{name:"TOTAL",activities:[{name:"DAILY POINTS",max_per_day:0,max_score:0}]}],tasks:{count:5,fields:["num","priority","tag","description","start_date","expected_date","actual_date","completed"]},workout:[],meals:[],grocery:{categories:[]},measurements:[],financials:[],city_default:"London"}}}applyTemplateStructure(e){var n,r;this.currentTemplate=e,this.currentTemplateId=e.id;const a=e.structure;this.plannerTitle=a.title_default||"Weekly Planner",this.times=[...a.prayer_times||[]],this.schedule=this.buildScheduleFromTemplate(a.schedule||[]),this.tasks=Array(((n=a.tasks)==null?void 0:n.count)||15).fill().map(()=>({id:ot(),priority:"",tag:"",description:"",startDate:"",expectedDate:"",actualDate:"",completed:""})),this.workoutPlan=this.buildWorkoutFromTemplate(a.workout||[]),this.meals=this.ensureIds([...a.meals||[]]),this.groceryList=this.ensureIds([...((r=a.grocery)==null?void 0:r.categories)||[]]),this.bodyMeasurements=this.ensureIds([...a.measurements||[]]),this.financials=this.ensureIds([...a.financials||[]]),this.city=a.city_default||"London"}buildScheduleFromTemplate(e){return e.map(a=>({id:ot(),name:a.name,activities:(a.activities||[]).map(n=>({id:ot(),name:n.name,days:this.createDaysStructure(n.days,n.max_per_day||1),score:0,maxScore:n.max_score||0,streaks:{current:0,longest:0}}))}))}createDaysStructure(e,a){const n=["mon","tue","wed","thu","fri","sat","sun"],r={};return(e&&Array.isArray(e)?e:n).forEach(o=>{r[o]={value:"",max:a}}),r}buildWorkoutFromTemplate(e){return e.map(a=>({id:ot(),name:a.name,exercises:this.ensureIds((a.exercises||[]).map(n=>{var r,s,o;return{prefix:"• ",name:n.name,weight:"",sets:"",reps:"",defaultWeight:((r=n.default_weight)==null?void 0:r.toString())||"",defaultSets:((s=n.default_sets)==null?void 0:s.toString())||"",defaultReps:((o=n.default_reps)==null?void 0:o.toString())||""}}))}))}ensureIds(e){return e.map(a=>({...a,id:a.id||ot()}))}async loadWeek(e,a=!1){if(!/^\\d{4}-W(0[1-9]|[1-4]\\d|5[0-3])$/.test(e)){this.showMessage("Invalid week format");return}this.showWeekSelector=!1,this.currentWeek=e,this.dateRange=this.getWeekDateRange(this.parseISOWeek(e));let n=await this.fetchPlannerRecord(e),r;n!=null&&n.template_id?r=await this.fetchTemplateById(n.template_id):r=await this.fetchTemplate("default"),this.applyTemplateStructure(r),n&&this.overlayUserData(n),this.calculateScores(),a&&!this.times.some(s=>s.value)&&await this.getPrayerTimes(),this.lastSavedState=JSON.stringify(this.getCurrentUserData()),a&&(this.isInitializing=!1)}async fetchPlannerRecord(e){if(this.isOnline)try{return await this.pb.collection("planners").getFirstListItem(`week_id="${e}"`)}catch{}const a=localStorage.getItem(`planner_${e}`);if(a)try{return JSON.parse(a)}catch{}return null}async fetchTemplateById(e){try{return await this.pb.collection("templates").getOne(e)}catch{return await this.fetchTemplate("default")}}overlayUserData(e){var a;e.title&&(this.plannerTitle=e.title),e.city&&(this.city=e.city),e.prayer_times&&this.overlayArray(this.times,e.prayer_times),e.schedule_data&&this.overlayComplexData(this.schedule,e.schedule_data,"name",this.overlayScheduleActivity),e.tasks_data&&this.overlayArray(this.tasks,e.tasks_data),e.workout_data&&this.overlayComplexData(this.workoutPlan,e.workout_data,"name",this.overlayWorkoutExercise),e.meals_data&&this.overlayArray(this.meals,e.meals_data),(a=e.grocery_data)!=null&&a.categories&&this.overlayArray(this.groceryList,e.grocery_data.categories),e.measurements_data&&this.overlayArray(this.bodyMeasurements,e.measurements_data),e.financials_data&&this.overlayArray(this.financials,e.financials_data)}overlayArray(e,a){a.forEach((n,r)=>{e[r]&&Object.assign(e[r],n)})}overlayComplexData(e,a,n,r){a.forEach(s=>{const o=e.find(u=>u[n]===s[n]);o&&r.call(this,o,s)})}overlayScheduleActivity(e,a){var n;(n=a.activities)==null||n.forEach(r=>{const s=e.activities.find(o=>o.name===r.name);s&&(r.days&&Object.keys(s.days).forEach(o=>{r.days[o]&&(s.days[o].value=r.days[o].value||"")}),s.score=r.score||0,s.streaks=r.streaks||{current:0,longest:0})})}overlayWorkoutExercise(e,a){var n;(n=a.exercises)==null||n.forEach(r=>{const s=e.exercises.find(o=>o.name===r.name);s&&(s.weight=r.weight||"",s.sets=r.sets||"",s.reps=r.reps||"")})}getCurrentUserData(){var e,a,n,r;return{week_id:this.currentWeek,template_id:this.currentTemplateId,title:this.plannerTitle!==((a=(e=this.currentTemplate)==null?void 0:e.structure)==null?void 0:a.title_default)?this.plannerTitle:null,city:this.city!==((r=(n=this.currentTemplate)==null?void 0:n.structure)==null?void 0:r.city_default)?this.city:null,date_range:this.dateRange,prayer_times:this.times.some(s=>s.value)?this.times:null,schedule_data:this.extractScheduleData(),tasks_data:this.extractUserTasks(),workout_data:this.extractWorkoutData(),meals_data:this.extractUserItems(this.meals,["name","ingredients"]),grocery_data:this.extractGroceryData(),measurements_data:this.extractUserItems(this.bodyMeasurements,["value"]),financials_data:this.extractUserItems(this.financials,["value"])}}extractScheduleData(){return this.extractComplexData(this.schedule,e=>({name:e.name,activities:e.activities.map(a=>({name:a.name,days:Object.keys(a.days).reduce((n,r)=>(a.days[r].value&&(n[r]={value:a.days[r].value}),n),{}),score:a.score,streaks:a.streaks})).filter(a=>Object.keys(a.days).length>0||a.score>0)}),e=>e.activities.length>0)}extractUserTasks(){return this.tasks.filter(e=>e.priority||e.tag||e.description||e.startDate||e.expectedDate||e.actualDate||e.completed)}extractWorkoutData(){return this.extractComplexData(this.workoutPlan,e=>({name:e.name,exercises:e.exercises.filter(a=>a.weight||a.sets||a.reps).map(a=>({name:a.name,weight:a.weight,sets:a.sets,reps:a.reps}))}),e=>e.exercises.length>0)}extractComplexData(e,a,n=()=>!0){return e.map(a).filter(n)}extractUserItems(e,a){return e.filter(n=>a.some(r=>n[r]))}extractGroceryData(){const e=this.extractUserItems(this.groceryList,["name","items"]);return e.length>0?{categories:e}:null}getTaskDelay(e){if(!e.expectedDate||!e.actualDate)return 0;const a=new Date(e.expectedDate),n=new Date(e.actualDate);return Math.ceil((n-a)/(1e3*60*60*24))}calculateTaskDelay(e){return e._delay=this.getTaskDelay(e),e._delay}formatDelay(e){return e===0?"0d":e>0?`+${e}d`:`${e}d`}toggleTaskCompletion(e){e.completed=e.completed==="✓"?"☐":"✓",e.completed==="✓"&&!e.actualDate&&(e.actualDate=new Date().toISOString().split("T")[0],this.calculateTaskDelay(e)),this.saveData()}toggleSelector(e,a){const n=a==="city"?"showCitySelector":"showWeekSelector",r=a==="city"?"showWeekSelector":"showCitySelector";if(this[r]=!1,this[n])this[n]=!1;else{const s=e.target.getBoundingClientRect();this[`${a}DropdownStyle`]=`position:fixed;top:${s.bottom+4}px;left:${Math.max(10,s.left-100)}px;z-index:9999;min-width:150px;max-width:250px;`,this[n]=!0,a==="week"&&this.fetchSavedWeeks()}}async selectCity(e){this.city=e.name,this.showCitySelector=!1;try{e.lat===null?await this.getPrayerTimes():await this.fetchPrayerTimes(e.lat,e.lon),this.saveData()}catch{this.showMessage("Failed to load prayer times")}}async getPrayerTimes(){var e,a,n;try{const r=await new Promise((u,l)=>navigator.geolocation.getCurrentPosition(u,l,{timeout:5e3,maximumAge:6e4})),{latitude:s,longitude:o}=r.coords;try{const l=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${s}&lon=${o}&zoom=10&accept-language=en`)).json();this.city=((e=l.address)==null?void 0:e.city)||((a=l.address)==null?void 0:a.town)||((n=l.address)==null?void 0:n.village)||"Current Location"}catch{this.city="Current Location"}await this.fetchPrayerTimes(s,o)}catch{this.showMessage("Location access failed. Using London"),this.city="London",await this.fetchPrayerTimes(51.5074,-.1278)}}async fetchPrayerTimes(e,a){var u,l;const n=new Date,s=`prayer_times_${`${n.getFullYear()}_${n.getMonth()+1}_${n.getDate()}`}_${e.toFixed(2)}_${a.toFixed(2)}`,o=localStorage.getItem(s);if(o)try{this.setPrayerTimes(JSON.parse(o));return}catch{localStorage.removeItem(s)}try{const c=await fetch(`https://api.aladhan.com/v1/calendar/${n.getFullYear()}/${n.getMonth()+1}?latitude=${e}&longitude=${a}&method=2`);if(!c.ok)throw new Error(`API error: ${c.status}`);const d=await c.json();if(d.code===200&&((l=(u=d.data)==null?void 0:u[n.getDate()-1])!=null&&l.timings))localStorage.setItem(s,JSON.stringify(d.data[n.getDate()-1].timings)),this.setPrayerTimes(d.data[n.getDate()-1].timings);else throw new Error("Invalid prayer time data")}catch{this.showMessage("Prayer times fetch failed"),this.setPrayerTimes({Fajr:"05:30",Dhuhr:"12:30",Asr:"15:45",Maghrib:"18:30",Isha:"20:00"})}}setPrayerTimes(e){const a={Q:this.calculateQiyamTime(e.Fajr),F:e.Fajr,D:e.Dhuhr,A:e.Asr,M:e.Maghrib,I:e.Isha};this.times.reduce((r,s)=>{const o=this.formatTime(a[s.label]);return s.value!==o?(s.value=o,!0):r},!1)&&!this.isInitializing&&this.saveData()}formatTime(e){if(!e)return"";const[a,n]=e.split(" ")[0].split(":"),r=parseInt(a),s=parseInt(n);return isNaN(r)||isNaN(s)?"":`${r%12||12}:${s.toString().padStart(2,"0")}${r>=12?"PM":"AM"}`}calculateQiyamTime(e){if(!e)return"";const[a,n]=e.split(" ")[0].split(":");let r=parseInt(a),s=parseInt(n);return isNaN(r)||isNaN(s)?"":(r=r-1,r<0&&(r=23),`${r}:${s.toString().padStart(2,"0")}`)}calculateScores(){var r;const e={mon:0,tue:0,wed:0,thu:0,fri:0,sat:0,sun:0},a=Object.keys(e);this.schedule.forEach(s=>{s.name!=="TOTAL"&&s.activities.forEach(o=>{let u=0;Object.entries(o.days||{}).forEach(([d,f])=>{if(!f)return;const v=parseInt(f.value)||0;v>0&&(f.max||0)>0&&(e[d]+=v,u+=v),f.value=v===0?"":v.toString()}),o.score=u,o.streaks=o.streaks||{current:0,longest:0};const l=this.currentDay===0?6:this.currentDay-1;let c=0;for(let d=0;d<7;d++){const f=(l-d+7)%7,v=a[f];if(o.days[v]&&parseInt(o.days[v].value)>0&&(o.days[v].max||0)>0)c++;else break}o.streaks.current=c,o.streaks.longest=Math.max(o.streaks.longest||0,c)})});const n=this.schedule.find(s=>s.name==="TOTAL");if((r=n==null?void 0:n.activities)!=null&&r[0]){const s=n.activities[0];let o=0,u=0;Object.entries(e).forEach(([l,c])=>{var d;(d=s.days)!=null&&d[l]&&(s.days[l].value=c.toString()),o+=c}),this.schedule.forEach(l=>{l.name!=="TOTAL"&&l.activities.forEach(c=>u+=c.maxScore||0)}),s.score=o,s.maxScore=u}}validateAndSave(e){const a=e.target,n=parseFloat(a.min),r=parseFloat(a.max);let s=parseFloat(a.value);isNaN(s)&&(s=0),!isNaN(n)&&s<n&&(s=n),!isNaN(r)&&s>r&&(s=r),a.value=s===0?"":s.toString(),this.calculateScores(),this.saveData()}saveData(){this.isInitializing||(clearTimeout(this.saveTimeout),this.saveStatus="saving",this.saveTimeout=setTimeout(async()=>{try{this.calculateScores();const e=this.getCurrentUserData();localStorage.setItem(`planner_${this.currentWeek}`,JSON.stringify(e)),this.isOnline?(await this.saveToPocketbase(this.currentWeek,e),this.pendingSync=this.pendingSync.filter(a=>!(a.weekId===this.currentWeek&&a.operation!=="delete"))):this.addToPendingSync(this.currentWeek,e),localStorage.setItem("planner_pending_sync",JSON.stringify(this.pendingSync)),this.lastSavedState=JSON.stringify(e),this.saveStatus="saved"}catch(e){this.saveStatus="error",this.showMessage("Save error: "+e.message),setTimeout(()=>this.saveStatus="saved",3e3)}},500))}hasSignificantChanges(){if(!this.lastSavedState)return!0;const e=this.getCurrentUserData();return JSON.stringify(e)!==this.lastSavedState}addToPendingSync(e,a,n="save"){this.pendingSync=this.pendingSync.filter(r=>!(r.weekId===e&&r.operation===n)),this.pendingSync.push({weekId:e,data:a?JSON.parse(JSON.stringify(a)):null,operation:n,timestamp:new Date().toISOString()}),localStorage.setItem("planner_pending_sync",JSON.stringify(this.pendingSync))}async syncPendingData(){if(!this.isOnline||this.pendingSync.length===0)return;const e=[...this.pendingSync];this.pendingSync=[];for(const a of e)try{a.operation==="delete"?await this.deleteFromPocketbase(a.weekId):await this.saveToPocketbase(a.weekId,a.data);const n=JSON.parse(localStorage.getItem("planner_pending_sync")||"[]");localStorage.setItem("planner_pending_sync",JSON.stringify(n.filter(r=>r.timestamp!==a.timestamp)))}catch{this.pendingSync.push(a)}this.pendingSync.length>0&&localStorage.setItem("planner_pending_sync",JSON.stringify(this.pendingSync))}async saveToPocketbase(e,a){try{const n=await this.pb.collection("planners").getFirstListItem(`week_id="${e}"`);await this.pb.collection("planners").update(n.id,a)}catch(n){if(n.status===404)await this.pb.collection("planners").create(a);else throw n}}async deleteFromPocketbase(e){try{const a=await this.pb.collection("planners").getFirstListItem(`week_id="${e}"`);await this.pb.collection("planners").delete(a.id)}catch(a){if(a.status!==404)throw a}}async fetchSavedWeeks(){const e=new Map,a=this.getCurrentIsoWeek(),n=(r,s,o,u)=>{const l=e.get(r),c=s||this.getWeekDateRange(this.parseISOWeek(r));!l||o==="pocketbase"&&l.source!=="pocketbase"||o==="local"&&l.source==="current"?e.set(r,{iso_week:r,dateRange:c,source:o,isCurrent:u}):l&&!l.dateRange&&c&&(l.dateRange=c)};if(n(a,this.getWeekDateRange(this.parseISOWeek(a)),"current",!0),this.isOnline)try{(await this.pb.collection("planners").getFullList({sort:"-week_id",fields:"week_id,date_range"})).forEach(s=>n(s.week_id,s.date_range,"pocketbase",s.week_id===a))}catch{}for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r);if(s.startsWith("planner_")&&!s.includes("pending_sync")&&!s.startsWith("planner_template_")){const o=s.replace("planner_","");try{const u=JSON.parse(localStorage.getItem(s));n(o,u.date_range,"local",o===a)}catch{}}}this.savedWeeks=Array.from(e.values()).sort((r,s)=>r.isCurrent&&!s.isCurrent?-1:!r.isCurrent&&s.isCurrent?1:s.iso_week.localeCompare(r.iso_week))}confirmLoadWeek(e){this.hasSignificantChanges()&&e!==this.currentWeek&&!confirm("Unsaved changes. Load anyway?")||(this.showWeekSelector=!1,this.loadWeek(e))}confirmDeleteWeek(e){confirm(`Delete schedule for ${e}?`)&&this.deleteWeek(e)}async deleteWeek(e){if(localStorage.removeItem(`planner_${e}`),this.isOnline)try{await this.deleteFromPocketbase(e)}catch{this.addToPendingSync(e,null,"delete")}else this.addToPendingSync(e,null,"delete");this.savedWeeks=this.savedWeeks.filter(a=>a.iso_week!==e),this.currentWeek===e&&(this.currentWeek=this.getCurrentIsoWeek(),await this.loadWeek(this.currentWeek))}getCurrentIsoWeek(){const e=new Date,a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));a.setUTCDate(a.getUTCDate()+4-(a.getUTCDay()||7));const n=new Date(Date.UTC(a.getUTCFullYear(),0,1)),r=Math.ceil(((a-n)/864e5+1)/7);return`${a.getUTCFullYear()}-W${r.toString().padStart(2,"0")}`}parseISOWeek(e){if(!/^\\d{4}-W(0[1-9]|[1-4]\\d|5[0-3])$/.test(e))return new Date;const[a,n]=e.split("-"),r=parseInt(n.substring(1)),s=new Date(Date.UTC(parseInt(a),0,1+(r-1)*7));return s.setUTCDate(s.getUTCDate()-(s.getUTCDay()||7)+1),s}getWeekDateRange(e){const a=new Date(e),n=new Date(a);return n.setUTCDate(a.getUTCDate()+6),`${this.formatDate(a)}-${this.formatDate(n)}`}formatDate(e){return`${(e.getUTCMonth()+1).toString().padStart(2,"0")}/${e.getUTCDate().toString().padStart(2,"0")}`}showMessage(e){this.notificationMessage=e,this.showNotification=!0,clearTimeout(this.notificationTimeout),this.notificationTimeout=setTimeout(()=>this.showNotification=!1,5e3)}}_t=new WeakMap,ht=new WeakMap,mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,wt=new WeakMap,St=new WeakMap,xt=new WeakMap,bt=new WeakMap,Dt=new WeakMap,kt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,It=new WeakMap,Et=new WeakMap,Ot=new WeakMap,At=new WeakMap,Nt=new WeakMap,Rt=new WeakMap,Pt=new WeakMap,Mt=new WeakMap,$t=new WeakMap,Lt=new WeakMap,Ft=new WeakMap,Wt=new WeakMap,Ut=new WeakMap,qt=new WeakMap,Bt=new WeakMap;const p=new $s;window.plannerStore=p;Pr();var Ls=()=>p.saveData(),Fs=R('<div class="flex center"><span> </span> <input type="text" class="input input--time"/></div>'),Ws=t=>p.toggleSelector(t,"city"),Us=t=>p.toggleSelector(t,"week"),qs=R('<div class="flex between center mb-1"><h1 class="text-sm bold"> </h1> <div class="flex center text-xs"><!> <span class="ml-1">|</span> <span class="clickable ml-1"> </span></div> <div class="text-sm"><span class="clickable"> </span> <span> </span></div></div>');function Bs(t,e){oe(e,!1),Ie();var a=qs(),n=_(a),r=_(n),s=h(n,2),o=_(s);ae(o,1,()=>(P(p),w(()=>p.times)),Ue,(g,T,y)=>{var b=Fs(),D=_(b),I=_(D),k=h(D,2);k.__change=[Ls],W(()=>N(I,`${i(T),w(()=>i(T).label)??""}:`)),X(k,()=>i(T).value,E=>(i(T).value=E,te(()=>p))),A(g,b)});var u=h(o,4);u.__click=[Ws];var l=_(u),c=h(s,2),d=_(c);d.__click=[Us];var f=_(d),v=h(d,2),m=_(v);W(()=>{N(r,(P(p),w(()=>p.plannerTitle))),N(l,(P(p),w(()=>p.city))),N(f,(P(p),w(()=>p.currentWeek))),N(m,(P(p),w(()=>p.dateRange)))}),A(t,a),ue()}Ye(["change","click"]);var Js=R("<th> </th> <th>MAX</th>",1),Ys=t=>p.validateAndSave(t),js=R('<input type="number" class="input" min="0"/>'),zs=R("<td><!></td> <td> </td>",1),Hs=R("<span> </span>"),Vs=R('<tr><td class="bold"> </td><td class="bold"> </td><td class="ac"><span> </span></td><!><td class="dc"><input type="number" class="input" readonly=""/></td><td class="dc"> </td><td><!></td></tr>'),Gs=R('<tr><td colspan="19" class="progress"><div></div></td></tr>'),Ks=R("<!> <!>",1),Qs=R('<table><thead><tr><th style="width:18mm">T</th><th style="width:20mm">D</th><th class="ac">ACTIVITY</th><!><th class="dc">📊</th><th class="dc">🎯</th><th class="dc">🔥</th></tr></thead><tbody></tbody></table>');function Xs(t,e){oe(e,!1);const a=["M","T","W","T","F","S","S"],n=["mon","tue","wed","thu","fri","sat","sun"];Ie();var r=Qs(),s=_(r),o=_(s),u=h(_(o),3);ae(u,1,()=>a,Ue,(c,d,f)=>{var v=Js(),m=Pe(v);let g;var T=_(m),y=h(m,2);let b;W((D,I)=>{g=Q(m,1,"dc",null,g,D),N(T,i(d)),b=Q(y,1,"dc",null,b,I)},[()=>({"current-day":f===(p.currentDay||7)-1}),()=>({"current-day":f===(p.currentDay||7)-1})],Ne),A(c,v)});var l=h(s);ae(l,5,()=>(P(p),w(()=>[...p.schedule].reverse())),Ue,(c,d)=>{var f=Ks(),v=Pe(f);ae(v,1,()=>(i(d),w(()=>i(d).activities)),Ue,(T,y,b)=>{var D=Vs();let I;var k=_(D),E=_(k),G=h(k),B=_(G),z=h(G),xe=_(z),pe=_(xe),ne=h(z);ae(ne,1,()=>n,Ue,(Z,U,ye)=>{var J=zs(),ze=Pe(J);let Xe;var Ze=_(ze);{var _a=He=>{var be=js();be.__input=[Ys],W(()=>{qe(be,"max",(i(y),i(U),w(()=>i(y).days[i(U)].max<10?9:99))),be.readOnly=(i(d),w(()=>i(d).name==="TOTAL"))}),X(be,()=>i(y).days[i(U)].value,et=>(i(y).days[i(U)].value=et,te(()=>(i(d),p)))),A(He,be)};le(Ze,He=>{i(y),i(U),w(()=>i(y).days&&i(y).days[i(U)])&&He(_a)})}var jt=h(ze,2);let zt;var ha=_(jt);W((He,be)=>{Xe=Q(ze,1,"dc",null,Xe,He),zt=Q(jt,1,"dc",null,zt,be),N(ha,(i(y),i(U),w(()=>{var et,it;return((it=(et=i(y).days)==null?void 0:et[i(U)])==null?void 0:it.max)||""})))},[()=>({"current-day":ye===(p.currentDay||7)-1}),()=>({"current-day":ye===(p.currentDay||7)-1})],Ne),A(Z,J)});var _e=h(ne),Le=_(_e),he=h(_e),me=_(he),ge=h(he);let Ee;var Oe=_(ge);{var je=Z=>{var U=Hs(),ye=_(U);W(()=>N(ye,(i(y),w(()=>i(y).streaks.current)))),A(Z,U)};le(Oe,Z=>{i(y),w(()=>{var U;return((U=i(y).streaks)==null?void 0:U.current)>0})&&Z(je)})}W((Z,U,ye,J)=>{I=Q(D,1,"",null,I,Z),N(E,(i(d),w(()=>b===0?i(d).name:""))),N(B,U),N(pe,ye),Kn(Le,(i(y),w(()=>i(y).score))),N(me,(i(y),w(()=>i(y).maxScore))),Ee=Q(ge,1,"dc cell cell--color",null,Ee,J)},[()=>({total:i(d).name==="TOTAL"}),()=>(i(y),w(()=>i(y).name.includes(":")?i(y).name.split(":")[0]:"")),()=>(i(y),w(()=>i(y).name.includes(":")?i(y).name.split(":")[1].trim():i(y).name)),()=>{var Z,U;return{streak:((Z=i(y).streaks)==null?void 0:Z.current)>2,yellow:((U=i(y).streaks)==null?void 0:U.current)>2}}],Ne),A(T,D)});var m=h(v,2);{var g=T=>{var y=Gs();const b=Ne(()=>(i(d),w(()=>i(d).activities[0]))),D=Ne(()=>(P(i(b)),w(()=>i(b).maxScore>0?Math.min(100,i(b).score/i(b).maxScore*100):0))),I=Ne(()=>(P(i(b)),w(()=>i(b).maxScore>0?i(b).score/i(b).maxScore<.33?"progress--low":i(b).score/i(b).maxScore<.66?"progress--medium":"progress--high":"")));var k=_(y),E=_(k);W(()=>{Q(E,1,`progress__bar ${i(I)??""}`),oa(E,`width: ${i(D)??""}%`)}),A(T,y)};le(m,T=>{i(d),w(()=>{var y;return i(d).name==="TOTAL"&&((y=i(d).activities)==null?void 0:y.length)>0&&i(d).activities[0].maxScore>0})&&T(g)})}A(c,f)}),A(t,r),ue()}Ye(["input"]);var Zs=()=>p.saveData(),ei=()=>p.saveData(),ti=()=>p.saveData(),ai=R('<tr><td class="dc"> </td><td><select class="input"><option></option><option>A</option><option>B</option><option>C</option><option>D</option></select></td><td><input type="text" class="input input--text"/></td><td><select class="input"><option></option><option>Personal</option><option>Work</option></select></td><td><input type="text" class="input input--date"/></td><td><input type="text" class="input input--date"/></td><td><span> </span></td><td><input type="text" class="input input--date"/></td><td><input type="text" placeholder="☐" readonly=""/></td></tr>'),ni=R('<div class="section"><h3 class="title">TASKS & PROJECT MANAGEMENT</h3> <table><thead><tr><th>#</th><th>⭐</th><th>Task</th><th>🏷️</th><th class="icon-header">Start</th><th class="icon-header">Due</th><th class="icon-header">Delay</th><th class="icon-header">Done</th><th>✓</th></tr></thead><tbody></tbody></table></div>');function ri(t,e){oe(e,!1);function a(u){const l=[];u.completed==="✓"&&l.push("green");const c=p.getTaskDelay(u);return c>0?l.push("red"):c<0&&l.push("blue"),l.join(" ")}function n(u){return u<0?"green":u>0?"red":"yellow"}Ie();var r=ni(),s=h(_(r),2),o=h(_(s));ae(o,7,()=>(P(p),w(()=>p.tasks)),(u,l)=>u.id||l,(u,l,c)=>{var d=ai(),f=_(d),v=_(f),m=h(f),g=_(m);W(()=>{i(l),te(()=>{})}),g.__change=[Zs];var T=_(g);T.value=T.__value="";var y=h(T);y.value=y.__value="A";var b=h(y);b.value=b.__value="B";var D=h(b);D.value=D.__value="C";var I=h(D);I.value=I.__value="D";var k=h(m),E=_(k);E.__change=[ei];var G=h(k),B=_(G);W(()=>{i(l),te(()=>{})}),B.__change=[ti];var z=_(B);z.value=z.__value="";var xe=h(z);xe.value=xe.__value="P";var pe=h(xe);pe.value=pe.__value="W";var ne=h(G),_e=_(ne);_e.__change=()=>{p.calculateTaskDelay(i(l)),p.saveData()};var Le=h(ne),he=_(Le);he.__change=()=>{p.calculateTaskDelay(i(l)),p.saveData()};var me=h(Le),ge=_(me),Ee=_(ge),Oe=h(me),je=_(Oe);je.__change=()=>{p.calculateTaskDelay(i(l)),p.saveData()};var Z=h(Oe),U=_(Z);let ye;U.__click=J=>{J.preventDefault(),p.toggleTaskCompletion(i(l))},W((J,ze,Xe,Ze)=>{Q(d,1,J),N(v,i(c)+1),Q(me,1,`dc cell cell--bold ${ze??""}`),N(Ee,Xe),ye=Q(U,1,"input",null,ye,Ze),Kn(U,(i(l),w(()=>i(l).completed)))},[()=>Ts((i(l),w(()=>a(i(l))))),()=>(P(p),i(l),w(()=>n(p.getTaskDelay(i(l))))),()=>(P(p),i(l),w(()=>p.formatDelay(p.getTaskDelay(i(l))))),()=>({"task-done":i(l).completed==="✓"})],Ne),_n(g,()=>i(l).priority,J=>(i(l).priority=J,te(()=>p))),X(E,()=>i(l).description,J=>(i(l).description=J,te(()=>p))),_n(B,()=>i(l).tag,J=>(i(l).tag=J,te(()=>p))),X(_e,()=>i(l).startDate,J=>(i(l).startDate=J,te(()=>p))),X(he,()=>i(l).expectedDate,J=>(i(l).expectedDate=J,te(()=>p))),X(je,()=>i(l).actualDate,J=>(i(l).actualDate=J,te(()=>p))),A(u,d)}),A(t,r),ue()}Ye(["change","click"]);var si=()=>p.saveData(),ii=()=>p.saveData(),li=()=>p.saveData(),oi=R('<div class="exercise"><div class="exercise-name"><span> </span> <span> </span>:</div> <div class="exercise-inputs"><input type="number" class="input"/> <span class="exercise-unit">kg,</span> <input type="number" class="input sets"/> <span class="exercise-unit">×</span> <input type="number" class="input reps"/></div></div>'),ui=R('<div class="p-1 workout-day-card"><p class="bold text-center mb-1 workout-day-name"> </p> <!></div>'),ci=R('<div class="section"><h3 class="title">WORKOUT</h3> <div class="grid"></div></div>');function di(t,e){oe(e,!1),Ie();var a=ci(),n=h(_(a),2);ae(n,5,()=>(P(p),w(()=>p.workoutPlan)),r=>r.id,(r,s)=>{var o=ui(),u=_(o),l=_(u),c=h(u,2);ae(c,1,()=>(i(s),w(()=>i(s).exercises)),d=>d.id,(d,f,v)=>{var m=oi(),g=_(m),T=_(g),y=_(T),b=h(T,2),D=_(b),I=h(g,2),k=_(I);k.__input=[si];var E=h(k,4);E.__input=[ii];var G=h(E,4);G.__input=[li],W(()=>{qe(g,"title",`${i(f),w(()=>i(f).prefix)??""}${i(f),w(()=>i(f).name)??""}`),N(y,(i(f),w(()=>i(f).prefix))),N(D,(i(f),w(()=>i(f).name))),qe(k,"placeholder",(i(f),w(()=>i(f).defaultWeight))),qe(E,"placeholder",(i(f),w(()=>i(f).defaultSets))),qe(G,"placeholder",(i(f),w(()=>i(f).defaultReps)))}),X(k,()=>i(f).weight,B=>(i(f).weight=B,te(()=>(i(s),p)))),X(E,()=>i(f).sets,B=>(i(f).sets=B,te(()=>(i(s),p)))),X(G,()=>i(f).reps,B=>(i(f).reps=B,te(()=>(i(s),p)))),A(d,m)}),W(()=>N(l,(i(s),w(()=>i(s).name)))),A(r,o)}),A(t,a),ue()}Ye(["input"]);var fi=R('<div class="mb-05"><span class="bold"> </span> <span> </span></div>'),vi=R('<div class="section"><h3 class="title">MEALS</h3> <div class="text-xs"></div></div>');function pi(t,e){oe(e,!1),Ie();var a=vi(),n=h(_(a),2);ae(n,5,()=>(P(p),w(()=>p.meals)),r=>r.id,(r,s)=>{var o=fi(),u=_(o),l=_(u),c=h(u,2),d=_(c);W(()=>{N(l,`${i(s),w(()=>i(s).name)??""}:`),N(d,(i(s),w(()=>i(s).ingredients)))}),A(r,o)}),A(t,a),ue()}var _i=R('<div class="mb-05"><span class="bold"> </span> <span> </span></div>'),hi=R('<div class="section"><h3 class="title">GROCERY</h3> <div class="text-xs"></div></div>');function mi(t,e){oe(e,!1),Ie();var a=hi(),n=h(_(a),2);ae(n,5,()=>(P(p),w(()=>p.groceryList)),r=>r.id,(r,s)=>{var o=_i(),u=_(o),l=_(u),c=h(u,2),d=_(c);W(()=>{N(l,`${i(s),w(()=>i(s).name)??""}:`),N(d,(i(s),w(()=>i(s).items)))}),A(r,o)}),A(t,a),ue()}var gi=()=>p.saveData(),yi=R('<span><span> </span> <input type="text" class="input input--inline"/> <!></span>'),wi=R('<div class="section"><h3 class="title">BODY</h3> <div class="text-xs"></div></div>');function Si(t,e){oe(e,!1),Ie();var a=wi(),n=h(_(a),2);ae(n,7,()=>(P(p),w(()=>p.bodyMeasurements)),r=>r.id,(r,s,o)=>{var u=yi(),l=_(u),c=_(l),d=h(l,2);d.__change=[gi];var f=h(d,2);{var v=m=>{var g=Hn(",");A(m,g)};le(f,m=>{P(i(o)),P(p),w(()=>i(o)<p.bodyMeasurements.length-1)&&m(v)})}W(()=>{N(c,`${i(s),w(()=>i(s).name)??""}:`),qe(d,"placeholder",(i(s),w(()=>i(s).placeholder)))}),X(d,()=>i(s).value,m=>(i(s).value=m,te(()=>p))),A(r,u)}),A(t,a),ue()}Ye(["change"]);var xi=()=>p.saveData(),bi=R('<span><span> </span> £<input type="text" class="input input--inline"/> <span> </span> <!></span>'),Di=R('<div class="section"><h3 class="title">FINANCIAL</h3> <div class="text-xs"></div></div>');function ki(t,e){oe(e,!1),Ie();var a=Di(),n=h(_(a),2);ae(n,7,()=>(P(p),w(()=>p.financials)),r=>r.id,(r,s,o)=>{var u=bi(),l=_(u),c=_(l),d=h(l,2);d.__change=[xi];var f=h(d,2),v=_(f),m=h(f,2);{var g=T=>{var y=Hn(",");A(T,y)};le(m,T=>{P(i(o)),P(p),w(()=>i(o)<p.financials.length-1)&&T(g)})}W(()=>{N(c,`${i(s),w(()=>i(s).name)??""}:`),qe(d,"placeholder",(i(s),w(()=>i(s).placeholder))),N(v,(i(s),w(()=>i(s).account)))}),X(d,()=>i(s).value,T=>(i(s).value=T,te(()=>p))),A(r,u)}),A(t,a),ue()}Ye(["change"]);var Ti=R('<div id="sync-status"><span> </span></div>'),Ci=R('<div id="notification" class="notification notification--show"> </div>'),Ii=R('<div id="save-status"> </div> <!> <!>',1);function Ei(t,e){oe(e,!1),Ie();var a=Ii(),n=Pe(a),r=_(n),s=h(n,2);{var o=c=>{var d=Ti(),f=_(d),v=_(f);W(()=>{Q(d,1,`status status--sync ${P(p),w(()=>p.pendingSync.length>0?"status-pending":"status-synced")??""}`),N(v,(P(p),w(()=>p.isOnline?p.pendingSync.length>0?"Pending: "+p.pendingSync.length:"":"Offline")))}),A(c,d)};le(s,c=>{P(p),w(()=>p.pendingSync.length>0||!p.isOnline)&&c(o)})}var u=h(s,2);{var l=c=>{var d=Ci(),f=_(d);W(()=>N(f,(P(p),w(()=>p.notificationMessage)))),A(c,d)};le(u,c=>{P(p),w(()=>p.showNotification)&&c(l)})}W(()=>{Q(n,1,`status status--save status-${P(p),w(()=>p.saveStatus)??""}`),N(r,(P(p),w(()=>p.saveStatus==="saving"?"Saving...":p.saveStatus==="error"?"Error!":"Saved")))}),A(t,a),ue()}var Oi=(t,e)=>p.selectCity(i(e)),Ai=R('<div class="dropdown__item"> </div>'),Ni=R('<div class="dropdown-portal"><div class="dropdown__content"></div></div>'),Ri=(t,e)=>p.confirmLoadWeek(i(e).iso_week),Pi=(t,e)=>p.confirmDeleteWeek(i(e).iso_week),Mi=R('<div><span> </span> <span class="dropdown__delete">×</span></div>'),$i=R('<div class="dropdown__item--empty">No saved schedules</div>'),Li=R('<div class="dropdown-portal"><div class="dropdown__content"><!></div></div>'),Fi=R("<!> <!>",1);function Wi(t,e){oe(e,!1),Ie();var a=Fi(),n=Pe(a);{var r=u=>{var l=Ni(),c=_(l);ae(c,5,()=>(P(p),w(()=>p.cityOptions)),Ue,(d,f)=>{var v=Ai();v.__click=[Oi,f];var m=_(v);W(()=>N(m,(i(f),w(()=>i(f).name)))),A(d,v)}),W(()=>oa(l,(P(p),w(()=>p.cityDropdownStyle)))),A(u,l)};le(n,u=>{P(p),w(()=>p.showCitySelector)&&u(r)})}var s=h(n,2);{var o=u=>{var l=Li(),c=_(l),d=_(c);{var f=m=>{var g=ms(),T=Pe(g);ae(T,1,()=>(P(p),w(()=>p.savedWeeks)),Ue,(y,b)=>{var D=Mi();let I;var k=_(D);k.__click=[Ri,b];var E=_(k),G=h(k,2);G.__click=[Pi,b],W(B=>{I=Q(D,1,"flex between center dropdown__item",null,I,B),N(E,`${i(b),w(()=>i(b).iso_week)??""} ${i(b),w(()=>i(b).dateRange)??""}`)},[()=>({"dropdown__item--current":i(b).isCurrent})],Ne),A(y,D)}),A(m,g)},v=m=>{var g=$i();A(m,g)};le(d,m=>{P(p),w(()=>p.savedWeeks.length>0)?m(f):m(v,!1)})}W(()=>oa(l,(P(p),w(()=>p.weekDropdownStyle)))),A(u,l)};le(s,u=>{P(p),w(()=>p.showWeekSelector)&&u(o)})}A(t,a),ue()}Ye(["click"]);async function Ui(t,e,a,n){return e("Validating configuration...","i"),a()?n()?(e("✅ Validation passed","s"),!0):(e("❌ Seed validation failed","e"),!1):(e("❌ Collection validation failed","e"),!1)}async function qi(t,e,a,n,r){S(e,!0),S(a,"");try{(await fetch(`${i(n)}/api/health`)).ok?(S(a,"success"),r("✅ Connection successful","s")):(S(a,"error"),r("❌ Connection failed","e"))}catch(s){S(a,"error"),r(`❌ Connection error: ${s.message}`,"e")}finally{S(e,!1)}}async function Bi(t,e,a,n){e(),S(a,!0);try{await n()}finally{S(a,!1)}}async function Ji(t,e,a,n){e(),S(a,!0);try{await n()}finally{S(a,!1)}}function Yi(t,e,a,n,r,s,o){confirm("Reset all setup fields to defaults?")&&(e(),S(a,window.location.origin,!0),S(n,"admin@example.com"),S(r,"unifiedpassword"),s(),o("🔄 Reset to defaults","i"))}var ji=(t,e)=>t.target===t.currentTarget&&e(),zi=(t,e)=>S(e,!i(e)),Hi=(t,e)=>S(e,!0),Vi=R("<div> </div>"),Gi=(t,e)=>t.target===t.currentTarget&&S(e,!1),Ki=(t,e)=>S(e,!1),Qi=R(`<div class="setup-modal-overlay svelte-1vc718t" style="z-index: 11000;"><div class="setup-help-content svelte-1vc718t"><button class="setup-help-close svelte-1vc718t">✕ Close</button> <h1 class="svelte-1vc718t">📚 PocketBase Schema Reference</h1> <h2 class="svelte-1vc718t">🔧 Field Types & Properties</h2> <h3 class="svelte-1vc718t">Text Fields</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">Number Fields</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">Boolean Fields</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">JSON Fields</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">Relation Fields</h3> <pre class="svelte-1vc718t"></pre> <h2 class="svelte-1vc718t">📋 Collection Properties</h2> <pre class="svelte-1vc718t"></pre> <h2 class="svelte-1vc718t">🔒 API Rules</h2> <p class="svelte-1vc718t">Rules control who can access records via API. Common patterns:</p> <h3 class="svelte-1vc718t">Public Access</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">Authenticated Users</h3> <pre class="svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">Owner Only Access</h3> <pre class="svelte-1vc718t"></pre> <h2 class="svelte-1vc718t">❌ CRITICAL ERRORS TO AVOID</h2> <h3 class="svelte-1vc718t">🚫 NEVER Use These Patterns (DEPRECATED)</h3> <pre class="error-example svelte-1vc718t"></pre> <h3 class="svelte-1vc718t">✅ CORRECT Patterns (Current PocketBase)</h3> <pre class="success-example svelte-1vc718t"></pre> <h2 class="svelte-1vc718t">💡 Pro Tips</h2> <ul class="svelte-1vc718t"><li class="svelte-1vc718t">Always include <code class="svelte-1vc718t">type</code>, <code class="svelte-1vc718t">required</code>, and <code class="svelte-1vc718t">presentable</code> for every field</li> <li class="svelte-1vc718t">Use <code class="svelte-1vc718t">indexes</code> for fields you'll search/filter frequently</li> <li class="svelte-1vc718t">JSON fields are powerful but can't be indexed - use wisely</li> <li class="svelte-1vc718t">Test your API rules thoroughly before production</li> <li class="svelte-1vc718t">Keep field names simple: lowercase, no spaces, underscores OK</li> <li class="svelte-1vc718t">Set reasonable <code class="svelte-1vc718t">maxSize</code> limits on JSON fields</li> <li class="svelte-1vc718t">Use <code class="svelte-1vc718t">pattern</code> for email, phone, or custom validation</li> <li class="svelte-1vc718t">Remember: empty string "" = public access, null = admin only</li></ul> <h2 class="svelte-1vc718t">🔍 Quick Validation Checklist</h2> <ol class="svelte-1vc718t"><li class="svelte-1vc718t">✓ Every field has: name, type, required, presentable</li> <li class="svelte-1vc718t">✓ Collection has: name, type, fields array</li> <li class="svelte-1vc718t">✓ No "options" wrapper on field properties</li> <li class="svelte-1vc718t">✓ No spaces or hyphens in field names</li> <li class="svelte-1vc718t">✓ API rules are either "", null, or valid expressions</li> <li class="svelte-1vc718t">✓ JSON is valid (no trailing commas, proper quotes)</li></ol></div></div>`),Xi=R('<div class="setup-modal-overlay svelte-1vc718t"><div class="setup-modal-content svelte-1vc718t"><div class="setup-container svelte-1vc718t"><div class="setup-stats svelte-1vc718t"><div class="setup-stat svelte-1vc718t"><span class="setup-stat-val svelte-1vc718t"> </span> Collections</div> <div class="setup-stat svelte-1vc718t"><span class="setup-stat-val svelte-1vc718t"> </span> Fields</div> <div class="setup-stat svelte-1vc718t"><span class="setup-stat-val svelte-1vc718t"> </span> Seeds</div> <div class="setup-stat svelte-1vc718t"><span class="setup-stat-val svelte-1vc718t"> </span> Health</div></div> <div class="setup-progress svelte-1vc718t"><div class="setup-progress-fill svelte-1vc718t"></div></div> <div class="setup-row svelte-1vc718t"><div class="setup-col svelte-1vc718t"><label for="setup-url" class="svelte-1vc718t">PocketBase URL:</label> <input id="setup-url" placeholder="http://localhost:8090" class="svelte-1vc718t"/></div> <div class="setup-col svelte-1vc718t"><label for="setup-email" class="svelte-1vc718t">Admin Email:</label> <input id="setup-email" placeholder="admin@example.com" class="svelte-1vc718t"/></div> <div class="setup-col svelte-1vc718t"><label for="setup-pass" class="svelte-1vc718t">Password:</label> <div style="position:relative;"><input id="setup-pass" style="padding-right: 30px;" class="svelte-1vc718t"/> <button type="button" class="setup-pass-toggle svelte-1vc718t"> </button></div></div></div> <div class="setup-row svelte-1vc718t"><button class="svelte-1vc718t"> </button> <button class="svelte-1vc718t">✅ Validate</button> <button class="svelte-1vc718t">🚀 Full Setup</button> <button class="svelte-1vc718t">📋 Schema Only</button> <button class="svelte-1vc718t">🌱 Seed Only</button> <button class="svelte-1vc718t">📚 Help & Docs</button></div> <div class="setup-row svelte-1vc718t"><button class="setup-danger svelte-1vc718t">🗑️ Reset</button> <button class="svelte-1vc718t">❌ Close</button></div> <div class="setup-row svelte-1vc718t"><div class="setup-col svelte-1vc718t"><h2 class="svelte-1vc718t">📋 Collections Schema</h2> <textarea class="setup-editor svelte-1vc718t" placeholder="Collections JSON..."></textarea> <div> </div></div> <div class="setup-col svelte-1vc718t"><h2 class="svelte-1vc718t">🌱 Seed Data</h2> <textarea class="setup-editor svelte-1vc718t" placeholder="Seed data JSON..."></textarea> <div> </div></div></div> <div id="setup-output" class="setup-output svelte-1vc718t"></div></div></div></div> <!>',1);function Zi(t,e){oe(e,!0);let a=C(Y(window.location.origin)),n=C("admin@example.com"),r=C("unifiedpassword"),s=C(!1),o=C(!1),u=C(0),l=Y({collections:0,fields:0,seeds:0,health:"❓"}),c=Y({validate:!0,setup:!0,schema:!0,seed:!0}),d=Y({collections:{valid:!0,message:"Ready"},seeds:{valid:!0,message:"Ready"}}),f=C(""),v=C(""),m=C(Y([])),g=C(""),T=C(!1),y=C(!1);function b(){p.showSetupModal=!1;const O=document.querySelector(".setup-notification");O&&O.remove()}function D(O,q="i"){const F=new Date().toLocaleTimeString(),H={e:"error",s:"success",w:"warning",i:"info"};S(m,[...i(m),{time:F,msg:O,type:H[q]||"info"}],!0),setTimeout(()=>{const V=document.getElementById("setup-output");V&&(V.scrollTop=V.scrollHeight)},10)}function I(O,q){S(u,O,!0),q&&D(q,"i")}function k(){try{const O=JSON.parse(i(f)),q=JSON.parse(i(v));l.collections=O.length,l.fields=O.reduce((F,H)=>{var V;return F+(((V=H.fields)==null?void 0:V.length)||0)},0),l.seeds=q.reduce((F,H)=>{var V;return F+(((V=H.records)==null?void 0:V.length)||0)},0)}catch{}}function E(O,q){try{return{valid:!0,message:"Valid JSON",data:JSON.parse(O)}}catch(F){const H=F.message.match(/position (\d+)/);return{valid:!1,message:`Invalid JSON${H?` at position ${H[1]}`:""}`}}}function G(){const O=E(i(f));return d.collections=O,k(),O.valid}function B(){const O=E(i(v));return d.seeds=O,k(),O.valid}function z(){S(m,[],!0)}async function xe(){z(),S(y,!0);try{await pe()&&await ne()&&(D("🎉 Full setup complete!","s"),l.health="✅",setTimeout(()=>{b(),p.init()},2e3))}finally{S(y,!1)}}async function pe(){var O;if(!G())return D("❌ Collection validation failed","e"),!1;I(20,"Setting up schema...");try{const q=window.PocketBase,F=new q(i(a));await F.admins.authWithPassword(i(n),i(r));const H=JSON.parse(i(f));I(40,"Importing collections..."),await F.collections.import(H,!1);const V=H.find(ce=>ce.name==="templates"),we=H.find(ce=>ce.name==="planners");if(V&&we){I(70,"Adding relations...");try{const ce=await F.collections.getOne("templates"),Ae=await F.collections.getOne("planners"),Se=Ae.fields.findIndex(De=>De.name==="template_id");if(Se!==-1){const De=[...Ae.fields];De[Se]={name:"template_id",type:"relation",required:!1,presentable:!0,collectionId:ce.id,cascadeDelete:!1,minSelect:0,maxSelect:1,displayFields:["name","description"]},await F.collections.update(Ae.id,{fields:De}),D("✅ Updated template_id to relation field","s")}else D("⚠️ template_id field not found","w")}catch(ce){D(`⚠️ Relation setup warning: ${ce.message}`,"w")}}return I(100,"✅ Schema setup complete"),(O=F==null?void 0:F.authStore)!=null&&O.isValid&&F.authStore.clear(),!0}catch(q){return D(`❌ Schema error: ${q.message}`,"e"),l.health="❌",!1}}async function ne(){var O,q,F,H;if(!B())return D("❌ Seed validation failed","e"),!1;I(10,"Seeding data...");try{const V=window.PocketBase,we=new V(i(a));await we.admins.authWithPassword(i(n),i(r));const ce=JSON.parse(i(v));let Ae=0;for(const Se of ce){if(!Se.collection||!Se.records){D("⚠️ Invalid seed format","w");continue}I(30,`Seeding ${Se.collection}...`);for(const De of Se.records)try{await we.collection(Se.collection).create(De),Ae++}catch(tt){tt.status===400&&((F=(q=(O=tt.data)==null?void 0:O.data)==null?void 0:q.name)==null?void 0:F.code)==="validation_not_unique"?D(`ℹ️ Skipping duplicate: ${De.name||"record"}`,"i"):D(`⚠️ Seed error: ${tt.message}`,"w")}}return I(100,`✅ Seeded ${Ae} records`),(H=we==null?void 0:we.authStore)!=null&&H.isValid&&we.authStore.clear(),!0}catch(V){return D(`❌ Seed error: ${V.message}`,"e"),!1}}function _e(){return[{name:"templates",type:"base",fields:[{name:"name",type:"text",required:!0,presentable:!0,min:1,max:50},{name:"description",type:"text",required:!1,presentable:!1,max:200},{name:"is_default",type:"bool",required:!1,presentable:!1},{name:"version",type:"number",required:!1,presentable:!1,min:1,noDecimal:!0},{name:"structure",type:"json",required:!0,presentable:!1,maxSize:5242880}],indexes:["CREATE UNIQUE INDEX idx_templates_name ON templates (name)"],listRule:"",viewRule:"",createRule:null,updateRule:null,deleteRule:null},{name:"planners",type:"base",fields:[{name:"week_id",type:"text",required:!0,presentable:!0,pattern:"^\\d{4}-W(0[1-9]|[1-4]\\d|5[0-3])$",min:8,max:8},{name:"template_id",type:"text",required:!1,presentable:!0,max:50},{name:"title",type:"text",required:!1,presentable:!1,max:100},{name:"city",type:"text",required:!1,presentable:!1,max:50},{name:"date_range",type:"text",required:!1,presentable:!1,max:20},{name:"prayer_times",type:"json",required:!1,presentable:!1,maxSize:2048},{name:"schedule_data",type:"json",required:!1,presentable:!1,maxSize:1048576},{name:"tasks_data",type:"json",required:!1,presentable:!1,maxSize:524288},{name:"workout_data",type:"json",required:!1,presentable:!1,maxSize:262144},{name:"meals_data",type:"json",required:!1,presentable:!1,maxSize:131072},{name:"grocery_data",type:"json",required:!1,presentable:!1,maxSize:131072},{name:"measurements_data",type:"json",required:!1,presentable:!1,maxSize:65536},{name:"financials_data",type:"json",required:!1,presentable:!1,maxSize:65536}],indexes:["CREATE UNIQUE INDEX idx_planners_week_id ON planners (week_id)"],listRule:"",viewRule:"",createRule:"",updateRule:"",deleteRule:""}]}function Le(){return[{collection:"templates",records:[{name:"default",description:"Default weekly planner template with all sections",is_default:!0,version:5,structure:{prayer_times:[{label:"Q",value:"4:30AM"},{label:"F",value:"5:30AM"},{label:"D",value:"12:30PM"},{label:"A",value:"3:45PM"},{label:"M",value:"6:30PM"},{label:"I",value:"8:00PM"}],schedule:[{name:"QIYAM",activities:[{name:"DAILY: Wakeup early",max_per_day:1,max_score:7},{name:"DAILY: Qiyam/Tahajjud",max_per_day:1,max_score:7},{name:"DAILY: Nutty Pudding",max_per_day:1,max_score:7}]},{name:"FAJR",activities:[{name:"DAILY: Fajr prayer",max_per_day:1,max_score:7},{name:"DAILY: Quran - 1 Juz",max_per_day:1,max_score:7},{name:"DAILY: 5min Cold Shower",max_per_day:1,max_score:7}]},{name:"7AM - 9AM",activities:[{name:"MON/THU: COMMUTE",days:["mon","thu"],max_per_day:1,max_score:2},{name:"TUE/WED/FRI: Reading/Study (book/course/skill)",days:["tue","wed","fri"],max_per_day:1,max_score:3},{name:"SAT: Errands, Grocery shopping, Meal prep",days:["sat"],max_per_day:3,max_score:3},{name:"SUN: House cleaning, laundry",days:["sun"],max_per_day:2,max_score:2}]},{name:"9AM - 5PM",activities:[{name:"MON-FRI: Work",days:["mon","tue","wed","thu","fri"],max_per_day:1,max_score:5},{name:"DAILY: ZeroInbox (E1, E2, E3, E4, LI, Slack)",max_per_day:1,max_score:30},{name:"SAT/SUN: Nature time / Outdoor Activity / Adventure",days:["sat","sun"],max_per_day:1,max_score:2}]},{name:"DHUHR",activities:[{name:"DAILY: Dhuhr prayer",max_per_day:1,max_score:7},{name:"TUE/WED/FRI: Sun walk (30-45 minutes)",days:["tue","wed","fri"],max_per_day:1,max_score:3},{name:"FRI: £10 Sadaqa",days:["fri"],max_per_day:1,max_score:1}]},{name:"ASR",activities:[{name:"DAILY: Asr prayer",max_per_day:1,max_score:7}]},{name:"5PM - 6:30PM",activities:[{name:"MON/THU: COMMUTE",days:["mon","thu"],max_per_day:1,max_score:2},{name:"TUE/WED/FRI: Workout",days:["tue","wed","fri"],max_per_day:1,max_score:3},{name:"TUE/WED/FRI: Third Meal",days:["tue","wed","fri"],max_per_day:1,max_score:3}]},{name:"6:30PM - ISHA",activities:[{name:"MON/TUE/WED/THU: Personal",days:["mon","tue","wed","thu"],max_per_day:1,max_score:4},{name:"DAILY: Family/Friends/Date calls(M, WA, Phone)",max_per_day:1,max_score:12},{name:"FRI/SAT/SUN: Family/Friends/Date visits/outings/activities",days:["fri","sat","sun"],max_per_day:1,max_score:9}]},{name:"MAGHRIB",activities:[{name:"DAILY: Maghrib prayer",max_per_day:1,max_score:7},{name:"DAILY: Super Veggie",max_per_day:1,max_score:7}]},{name:"ISHA",activities:[{name:"DAILY: Isha prayer",max_per_day:1,max_score:7},{name:"DAILY: Sleep early",max_per_day:1,max_score:7}]},{name:"ALLDAY",activities:[{name:"DAILY: No Doomscrolling; (FB, YTB, LKDN, & IG)",max_per_day:4,max_score:28},{name:"DAILY: No Fap; (P, & M)",max_per_day:2,max_score:14},{name:"DAILY: No Processed; (Sugar, RefinedFlour, SeedOils, Soda, FastFood)",max_per_day:5,max_score:35},{name:"MON/THU: Fasting",days:["mon","thu"],max_per_day:1,max_score:2},{name:"DAILY: Expense Tracker <25",max_per_day:0,max_score:0}]},{name:"TOTAL",activities:[{name:"DAILY POINTS",max_per_day:0,max_score:247}]}],tasks:{count:15,fields:["priority","description","tag","start_date","expected_date","actual_date","completed"]},workout:[{name:"TUESDAY",exercises:[{name:"Incline Dumbbell Press",default_weight:30,default_sets:3,default_reps:12},{name:"Barbell Squats",default_weight:80,default_sets:3,default_reps:8},{name:"DB Chest-Supported Row",default_weight:25,default_sets:3,default_reps:12},{name:"Leg Curls",default_weight:40,default_sets:3,default_reps:12},{name:"SS: Incline DB Curls",default_weight:15,default_sets:3,default_reps:12},{name:"SS: Tricep Extensions",default_weight:20,default_sets:3,default_reps:12}]},{name:"WEDNESDAY",exercises:[{name:"Barbell Bench Press",default_weight:70,default_sets:3,default_reps:6},{name:"Romanian Deadlift",default_weight:90,default_sets:3,default_reps:8},{name:"Lat Pulldown",default_weight:60,default_sets:3,default_reps:12},{name:"Walking Lunges",default_weight:20,default_sets:3,default_reps:12},{name:"SS: Cable Lateral Raises",default_weight:10,default_sets:3,default_reps:15},{name:"SS: Reverse Crunches",default_weight:0,default_sets:3,default_reps:15}]},{name:"FRIDAY",exercises:[{name:"Seated DB Shoulder Press",default_weight:20,default_sets:3,default_reps:12},{name:"Dumbbell Row",default_weight:25,default_sets:3,default_reps:12},{name:"Barbell Hip Thrust",default_weight:100,default_sets:3,default_reps:15},{name:"Leg Extensions",default_weight:50,default_sets:3,default_reps:12},{name:"Seated Chest Flyes",default_weight:15,default_sets:3,default_reps:12},{name:"SS: Standing Calf Raises",default_weight:30,default_sets:3,default_reps:20},{name:"SS: Reverse Cable Flyes",default_weight:10,default_sets:3,default_reps:15}]}],meals:[{name:"Nutty Pudding",ingredients:"Berries ½c, Cherries 3, Pomegranate Juice 2oz, Macadamia nuts (raw) 45g, Walnuts (raw) 5g, Cocoa 1t, Brazil Nuts ¼, Milk 50-100ml, Chia Seeds 2T, Flax (ground, refr) 1t, Lecithin 1t, Ceylon Cinnamon ½t"},{name:"Super Veggie",ingredients:"Broccoli 250g, Cauliflower 150g, Mushrooms 50g, Garlic 1 clove, Ginger 3g, Cumin 1T, Black Lentils 45g, Hemp Seeds 1T, Apple Cider Vinegar 1T"},{name:"Third Meal",ingredients:"Sweet Potato 350-400g, Protein 100-150g, Grape Tomatoes 12, Avocado ½, Radishes 4, Cilantro ¼c, Lemon 1, Jalapeño (lg) 1, Chili Powder 1t"}],grocery:{categories:[{name:"Produce",items:"Broccoli 1.75kg, Cauliflower 1.05kg, Mushrooms 350g, Garlic 1 bulb, Ginger 1pc, Sweet Potato 2.8kg, Grape Tomatoes 84, Avocados (ripe) 4, Radishes 28, Cilantro 2-3 bunch"},{name:"Fruits & Protein",items:"Lemons 7, Jalapeños (lg) 7, Berries 3.5c, Cherries 21, Black Lentils 315g, Protein 1.05kg, Milk (fortified) 1L"}]},measurements:[{name:"Weight",placeholder:"75kg"},{name:"Chest",placeholder:"42in"},{name:"Waist",placeholder:"34in"},{name:"Hips",placeholder:"36in"},{name:"Arms",placeholder:"15in"},{name:"Thighs",placeholder:"24in"}],financials:[{name:"Rent",placeholder:"850",account:"Cash"},{name:"Allowance",placeholder:"850",account:"Revolut"},{name:"Savings",placeholder:"3800",account:"HSBCUK"}],city_default:"London"}}]}]}function he(){S(f,JSON.stringify(_e(),null,2),!0),S(v,JSON.stringify(Le(),null,2),!0),k(),G(),B()}Xn(()=>{he()});var me=Xi(),ge=Pe(me);ge.__click=[ji,b];var Ee=_(ge),Oe=_(Ee),je=_(Oe),Z=_(je),U=_(Z),ye=_(U),J=h(Z,2),ze=_(J),Xe=_(ze),Ze=h(J,2),_a=_(Ze),jt=_(_a),zt=h(Ze,2),ha=_(zt),He=_(ha),be=h(je,2),et=_(be),it=h(be,2),Ya=_(it),Zn=h(_(Ya),2),ja=h(Ya,2),er=h(_(ja),2),tr=h(ja,2),ar=h(_(tr),2),ma=_(ar),za=h(ma,2);za.__click=[zi,s];var nr=_(za),Ha=h(it,2),Ht=_(Ha);Ht.__click=[qi,T,g,a,D];var rr=_(Ht),ga=h(Ht,2);ga.__click=[Ui,D,G,B];var ya=h(ga,2);ya.__click=xe;var wa=h(ya,2);wa.__click=[Bi,z,y,pe];var Sa=h(wa,2);Sa.__click=[Ji,z,y,ne];var sr=h(Sa,2);sr.__click=[Hi,o];var Va=h(Ha,2),xa=_(Va);xa.__click=[Yi,z,a,n,r,he,D];var ir=h(xa,2);ir.__click=b;var Ga=h(Va,2),Ka=_(Ga),Vt=h(_(Ka),2);Vt.__input=G;var Qa=h(Vt,2);let Xa;var lr=_(Qa),or=h(Ka,2),Gt=h(_(or),2);Gt.__input=B;var Za=h(Gt,2);let en;var ur=_(Za),cr=h(Ga,2);ae(cr,21,()=>i(m),Ue,(O,q)=>{var F=Vi(),H=_(F);W(()=>{Q(F,1,`log-${i(q).type??""}`,"svelte-1vc718t"),N(H,`[${i(q).time??""}] ${i(q).msg??""}`)}),A(O,F)});var dr=h(ge,2);{var fr=O=>{var q=Qi();q.__click=[Gi,o];var F=_(q),H=_(F);H.__click=[Ki,o];var V=h(H,8);V.textContent=`{
  "name": "title",
  "type": "text",
  "required": true,
  "presentable": true,
  "min": 1,                // Minimum length
  "max": 100,              // Maximum length
  "pattern": "^[A-Z].*"    // Regex pattern
}`;var we=h(V,4);we.textContent=`{
  "name": "age",
  "type": "number",
  "required": false,
  "presentable": false,
  "min": 0,                // Minimum value
  "max": 150,              // Maximum value
  "noDecimal": true        // Integer only
}`;var ce=h(we,4);ce.textContent=`{
  "name": "is_active",
  "type": "bool",
  "required": false,
  "presentable": false
}`;var Ae=h(ce,4);Ae.textContent=`{
  "name": "metadata",
  "type": "json",
  "required": false,
  "presentable": false,
  "maxSize": 2097152       // Max size in bytes (2MB)
}`;var Se=h(Ae,4);Se.textContent=`{
  "name": "template_id",
  "type": "relation",
  "required": true,
  "presentable": true,
  "collectionId": "xyz123",     // Target collection ID
  "cascadeDelete": false,       // Delete this when related deleted
  "minSelect": 1,               // Minimum selections
  "maxSelect": 1,               // Maximum selections (1 = single)
  "displayFields": ["name"]     // Fields to show in UI
}`;var De=h(Se,4);De.textContent=`{
  "name": "planners",              // Collection name (a-z, 0-9, _)
  "type": "base",                  // "base" or "auth"
  "listRule": "",                  // API rules (see below)
  "viewRule": "",
  "createRule": "",
  "updateRule": "",
  "deleteRule": "",
  "indexes": [                     // SQL indexes for performance
    "CREATE INDEX idx_week ON planners (week_id)"
  ],
  "fields": [...]                  // Array of field definitions
}`;var tt=h(De,8);tt.textContent=`{
  "listRule": "",          // Empty string = public access
  "viewRule": "",          // Anyone can read
  "createRule": null,      // null = admin only
  "updateRule": null,      // No public updates
  "deleteRule": null       // No public deletes
}`;var tn=h(tt,4);tn.textContent=`{
  "listRule": "@request.auth.id != ''",    // Any logged in user
  "viewRule": "@request.auth.id != ''",    
  "createRule": "@request.auth.id != ''",  
  "updateRule": "@request.auth.id != ''",  
  "deleteRule": "@request.auth.id != ''"   
}`;var an=h(tn,4);an.textContent=`{
  "listRule": "user = @request.auth.id",     // List own records only
  "viewRule": "user = @request.auth.id",     // View own records only
  "createRule": "@request.auth.id != ''",    // Any auth user can create
  "updateRule": "user = @request.auth.id",   // Update own records only
  "deleteRule": "user = @request.auth.id"    // Delete own records only
}`;var nn=h(an,6);nn.textContent=`// ❌ WRONG: Nested options structure (old PocketBase version)
{
  "name": "title",
  "type": "text",
  "required": true,
  "options": {              // ❌ DON'T USE "options" wrapper
    "max": 100,
    "min": 1
  }
}

// ❌ WRONG: Schema key instead of fields
{
  "name": "posts",
  "schema": [...]           // ❌ DON'T USE "schema" key
}

// ❌ WRONG: Invalid field names
{
  "name": "field name",     // ❌ No spaces
  "name": "field-name",     // ❌ No hyphens
  "name": "123field",       // ❌ Can't start with number
  "name": "id",             // ❌ Reserved name
}`;var vr=h(nn,4);vr.textContent=`// ✅ CORRECT: Direct properties
{
  "name": "title",
  "type": "text",
  "required": true,
  "presentable": true,
  "max": 100,               // ✅ Direct property
  "min": 1                  // ✅ Direct property
}

// ✅ CORRECT: Fields key
{
  "name": "posts",
  "fields": [...]           // ✅ Use "fields" key
}

// ✅ CORRECT: Valid field names
{
  "name": "field_name",     // ✅ Underscores OK
  "name": "fieldName",      // ✅ camelCase OK
  "name": "field123"        // ✅ Numbers at end OK
}`,A(O,q)};le(dr,O=>{i(o)&&O(fr)})}W((O,q)=>{N(ye,l.collections),N(Xe,l.fields),N(jt,l.seeds),N(He,l.health),oa(et,`width: ${i(u)??""}%`),qe(ma,"type",i(s)?"text":"password"),N(nr,i(s)?"🙈":"👁️"),Ht.disabled=i(T)||i(y),N(rr,`${i(T)?"⏳":"🔌"} Test Connection`),ga.disabled=i(y)||!c.validate,ya.disabled=i(y)||!c.setup,wa.disabled=i(y)||!c.schema,Sa.disabled=i(y)||!c.seed,xa.disabled=i(y),Vt.disabled=i(y),Xa=Q(Qa,1,"setup-status svelte-1vc718t",null,Xa,O),N(lr,d.collections.message),Gt.disabled=i(y),en=Q(Za,1,"setup-status svelte-1vc718t",null,en,q),N(ur,d.seeds.message)},[()=>({"setup-valid":d.collections.valid,"setup-invalid":!d.collections.valid}),()=>({"setup-valid":d.seeds.valid,"setup-invalid":!d.seeds.valid})]),X(Zn,()=>i(a),O=>S(a,O)),X(er,()=>i(n),O=>S(n,O)),X(ma,()=>i(r),O=>S(r,O)),X(Vt,()=>i(f),O=>S(f,O)),X(Gt,()=>i(v),O=>S(v,O)),A(t,me),ue()}Ye(["click","input"]);var el=R('<div class="viewport-container"><div class="card"><!> <!> <!> <!> <!> <!> <!> <!></div></div> <!>',1),tl=R("<!> <!> <!>",1);function al(t,e){oe(e,!0);let a=C(!1);ea(()=>{S(a,p.showSetupModal,!0)}),Xn(()=>{p.init()});var n=tl(),r=Pe(n);Ei(r,{});var s=h(r,2);{var o=c=>{var d=el(),f=Pe(d),v=_(f),m=_(v);Bs(m,{});var g=h(m,2);Xs(g,{});var T=h(g,2);ri(T,{});var y=h(T,2);di(y,{});var b=h(y,2);pi(b,{});var D=h(b,2);mi(D,{});var I=h(D,2);Si(I,{});var k=h(I,2);ki(k,{});var E=h(f,2);Wi(E,{}),A(c,d)};le(s,c=>{p.isInitializing||c(o)})}var u=h(s,2);{var l=c=>{Zi(c,{})};le(u,c=>{i(a)&&c(l)})}A(t,n),ue()}gs(al,{target:document.getElementById("app")});
